var _SETTINGS={MarketJSGameCenter:{Activator:{Enabled:!1,Position:{Top:"15%",Left:"0"}},API:{Enabled:!1,Log:{Events:{InitializeGame:!0,EndGame:!0,Level:{Begin:!0,End:!0,Win:!0,Lose:!0,Draw:!0}}}}},API:{Enabled:!1,Log:{Events:{InitializeGame:!0,EndGame:!0,Level:{Begin:!0,End:!0,Win:!0,Lose:!0,Draw:!0}}}},Ad:{Mobile:{Preroll:{Enabled:!1,Duration:5,Width:300,Height:250,Rotation:{Enabled:!1,Weight:{MobileAdInGamePreroll:40,MobileAdInGamePreroll2:40,MobileAdInGamePreroll3:20}}},Header:{Enabled:!1,Duration:5,
Width:320,Height:50,Rotation:{Enabled:!1,Weight:{MobileAdInGameHeader:40,MobileAdInGameHeader2:40,MobileAdInGameHeader3:20}}},Footer:{Enabled:!1,Duration:5,Width:320,Height:50,Rotation:{Enabled:!1,Weight:{MobileAdInGameFooter:40,MobileAdInGameFooter2:40,MobileAdInGameFooter3:20}}},End:{Enabled:!1,Duration:1,Width:300,Height:250,Rotation:{Enabled:!1,Weight:{MobileAdInGameEnd:40,MobileAdInGameEnd2:40,MobileAdInGameEnd3:20}}}}},Language:{Default:"en"},DeveloperBranding:{Splash:{Enabled:!1},Logo:{Enabled:!1,
Link:"http://google.com",LinkEnabled:!1,NewWindow:!0,Width:166,Height:61}},Branding:{Splash:{Enabled:!0},Logo:{Enabled:!1,Link:"http://google.com",LinkEnabled:!1,NewWindow:!0,Width:166,Height:61}},MoreGames:{Enabled:!1,Link:"http://www.coolmath-games.com/",NewWindow:!0},Gamecenter:{Enabled:!1}};var _STRINGS={Ad:{Mobile:{Preroll:{ReadyIn:"The game is ready in ",Loading:"Your game is loading...",Close:"Close"},Header:{ReadyIn:"The game is ready in ",Loading:"Your game is loading...",Close:"Close"},End:{ReadyIn:"Advertisement ends in ",Loading:"Please wait ...",Close:"Close"}}},Splash:{Loading:"Loading ...",LogoLine1:"Some text here",LogoLine2:"powered by MarketJS",LogoLine3:"none"},Game:{SelectPlayer:"Select Player",Win:"You win!",Lose:"You lose!",Score:"Score",Time:"Time",moves:"Moves",best:"Best",
back:"Back",restart:"Restart",undo:"Undo",hints:"Hints",faster:"Faster",paused:"PAUSED",options:"OPTIONS",sound:"Sound",music:"Music",levelcomplete:"Level Complete",selectlevel:"Level Select",pathcomplete:"Path Complete!",go:"GO!",hintplus:"+1 hint"},Results:{Title:"High score"}};var MobileAdInGamePreroll={ad_duration:_SETTINGS.Ad.Mobile.Preroll.Duration,ad_width:_SETTINGS.Ad.Mobile.Preroll.Width,ad_height:_SETTINGS.Ad.Mobile.Preroll.Height,ready_in:_STRINGS.Ad.Mobile.Preroll.ReadyIn,loading:_STRINGS.Ad.Mobile.Preroll.Loading,close:_STRINGS.Ad.Mobile.Preroll.Close+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",Initialize:function(){if(_SETTINGS.Ad.Mobile.Preroll.Rotation.Enabled){var j=_SETTINGS.Ad.Mobile.Preroll.Rotation.Weight,l=j.MobileAdInGamePreroll,m=
l+j.MobileAdInGamePreroll2,j=m+j.MobileAdInGamePreroll3,n=Math.floor(100*Math.random());console.log("seed: ",n);n<=l?this.selectedOverlayName="MobileAdInGamePreroll":n<=m?this.selectedOverlayName="MobileAdInGamePreroll2":n<=j&&(this.selectedOverlayName="MobileAdInGamePreroll3");console.log("Ad rotating preroll enabled")}else this.selectedOverlayName="MobileAdInGamePreroll",console.log("Ad rotating preroll disabled");console.log("selected:",this.selectedOverlayName);this.overlay=$("#"+this.selectedOverlayName);
this.box=$("#"+this.selectedOverlayName+"-Box");this.game=$("#game");this.boxContents={footer:$("#"+this.selectedOverlayName+"-Box-Footer"),header:$("#"+this.selectedOverlayName+"-Box-Header"),close:$("#"+this.selectedOverlayName+"-Box-Close"),body:$("#"+this.selectedOverlayName+"-Box-Body")};this.box.width(this.ad_width);this.box.height(this.ad_height);this.box.css("left",(this.overlay.width()-this.box.width())/2);this.box.css("top",(this.overlay.height()-this.box.height()-this.boxContents.header.height()-
this.boxContents.footer.height())/2);this.overlay.show(this.Timer(this.ad_duration))},Timer:function(j){var l=j,m=setInterval(function(){MobileAdInGamePreroll.boxContents.header.text(MobileAdInGamePreroll.ready_in+l+"...");MobileAdInGamePreroll.boxContents.footer.text(MobileAdInGamePreroll.loading);l--;0>l&&(clearInterval(m),MobileAdInGamePreroll.boxContents.close.css("left",MobileAdInGamePreroll.boxContents.body.width()-23),MobileAdInGamePreroll.boxContents.close.show(),MobileAdInGamePreroll.boxContents.header.html(MobileAdInGamePreroll.close),
MobileAdInGamePreroll.boxContents.footer.text(""))},1E3)},Close:function(){this.boxContents.close.hide();this.overlay.hide()}};var MobileAdInGameHeader={ad_duration:_SETTINGS.Ad.Mobile.Header.Duration,ad_width:_SETTINGS.Ad.Mobile.Header.Width,ad_height:_SETTINGS.Ad.Mobile.Header.Height,Initialize:function(){if(_SETTINGS.Ad.Mobile.Header.Rotation.Enabled){var j=_SETTINGS.Ad.Mobile.Header.Rotation.Weight,l=j.MobileAdInGameHeader,m=l+j.MobileAdInGameHeader2,j=m+j.MobileAdInGameHeader3,n=Math.floor(100*Math.random());console.log("seed: ",n);n<=l?this.selectedOverlayName="MobileAdInGameHeader":n<=m?this.selectedOverlayName="MobileAdInGameHeader2":
n<=j&&(this.selectedOverlayName="MobileAdInGameHeader3");console.log("Ad rotating header enabled")}else this.selectedOverlayName="MobileAdInGameHeader",console.log("Ad rotating header disabled");this.div=$("#"+this.selectedOverlayName);this.game=$("#game");this.div.width(this.ad_width);this.div.height(this.ad_height);this.div.css("left",this.game.position().left+(this.game.width()-this.div.width())/2);this.div.css("top",0);this.div.show(this.Timer(this.ad_duration))},Timer:function(j){var l=setInterval(function(){j--;
0>j&&(MobileAdInGameHeader.div.hide(),clearInterval(l))},1E3)}};var MobileAdInGameFooter={ad_duration:_SETTINGS.Ad.Mobile.Footer.Duration,ad_width:_SETTINGS.Ad.Mobile.Footer.Width,ad_height:_SETTINGS.Ad.Mobile.Footer.Height,Initialize:function(){if(_SETTINGS.Ad.Mobile.Footer.Rotation.Enabled){var j=_SETTINGS.Ad.Mobile.Footer.Rotation.Weight,l=j.MobileAdInGameFooter,m=l+j.MobileAdInGameFooter2,j=m+j.MobileAdInGameFooter3,n=Math.floor(100*Math.random());console.log("seed: ",n);n<=l?this.selectedOverlayName="MobileAdInGameFooter":n<=m?this.selectedOverlayName="MobileAdInGameFooter2":
n<=j&&(this.selectedOverlayName="MobileAdInGameFooter3");console.log("Ad rotating footer enabled")}else this.selectedOverlayName="MobileAdInGameFooter",console.log("Ad rotating footer disabled");this.div=$("#"+this.selectedOverlayName);this.game=$("#game");this.div.width(this.ad_width);this.div.height(this.ad_height);this.div.css("left",this.game.position().left+(this.game.width()-this.div.width())/2);this.div.css("top",this.game.height()-this.div.height()-5);this.div.show(this.Timer(this.ad_duration))},
Timer:function(j){var l=setInterval(function(){j--;0>j&&(MobileAdInGameFooter.div.hide(),clearInterval(l))},1E3)}};var MobileAdInGameEnd={ad_duration:_SETTINGS.Ad.Mobile.End.Duration,ad_width:_SETTINGS.Ad.Mobile.End.Width,ad_height:_SETTINGS.Ad.Mobile.End.Height,ready_in:_STRINGS.Ad.Mobile.End.ReadyIn,loading:_STRINGS.Ad.Mobile.End.Loading,close:_STRINGS.Ad.Mobile.End.Close+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",Initialize:function(){if(_SETTINGS.Ad.Mobile.End.Rotation.Enabled){var j=_SETTINGS.Ad.Mobile.End.Rotation.Weight,l=j.MobileAdInGameEnd,m=l+j.MobileAdInGameEnd2,j=m+j.MobileAdInGameEnd3,
n=Math.floor(100*Math.random());console.log("seed: ",n);n<=l?this.selectedOverlayName="MobileAdInGameEnd":n<=m?this.selectedOverlayName="MobileAdInGameEnd2":n<=j&&(this.selectedOverlayName="MobileAdInGameEnd3");console.log("Ad rotating end enabled")}else this.selectedOverlayName="MobileAdInGameEnd",console.log("Ad rotating end disabled");console.log("selected:",this.selectedOverlayName);this.overlay=$("#"+this.selectedOverlayName);this.box=$("#"+this.selectedOverlayName+"-Box");this.game=$("#game");
this.boxContents={footer:$("#"+this.selectedOverlayName+"-Box-Footer"),header:$("#"+this.selectedOverlayName+"-Box-Header"),close:$("#"+this.selectedOverlayName+"-Box-Close"),body:$("#"+this.selectedOverlayName+"-Box-Body")};this.box.width(this.ad_width);this.box.height(this.ad_height);this.box.css("left",(this.overlay.width()-this.box.width())/2);this.box.css("top",(this.overlay.height()-this.box.height()-this.boxContents.header.height()-this.boxContents.footer.height())/2);this.overlay.show(this.Timer(this.ad_duration))},
Timer:function(j){var l=j,m=setInterval(function(){MobileAdInGameEnd.boxContents.header.text(MobileAdInGameEnd.ready_in+l+"...");MobileAdInGameEnd.boxContents.footer.text(MobileAdInGameEnd.loading);l--;0>l&&(clearInterval(m),MobileAdInGameEnd.boxContents.close.css("left",MobileAdInGameEnd.boxContents.body.width()-23),MobileAdInGameEnd.boxContents.close.show(),MobileAdInGameEnd.boxContents.header.html(MobileAdInGameEnd.close),MobileAdInGameEnd.boxContents.footer.text(""))},1E3)},Close:function(){this.boxContents.close.hide();
this.overlay.hide()}};(function(j,l){function m(j,B,m){if(m===l&&1===j.nodeType)if(m="data-"+B.replace(yc,"-$1").toLowerCase(),m=j.getAttribute(m),"string"==typeof m){try{m="true"===m?!0:"false"===m?!1:"null"===m?null:+m+""===m?+m:zc.test(m)?q.parseJSON(m):m}catch(r){}q.data(j,B,m)}else m=l;return m}function n(j){for(var l in j)if(!("data"===l&&q.isEmptyObject(j[l]))&&"toJSON"!==l)return!1;return!0}function p(){return!1}function s(){return!0}function A(j){return!j||!j.parentNode||11===j.parentNode.nodeType}function v(j,
l){do j=j[l];while(j&&1!==j.nodeType);return j}function r(j,l,m){l=l||0;if(q.isFunction(l))return q.grep(j,function(j,D){return!!l.call(j,D,j)===m});if(l.nodeType)return q.grep(j,function(j){return j===l===m});if("string"==typeof l){var r=q.grep(j,function(j){return 1===j.nodeType});if(Bc.test(l))return q.filter(l,r,!m);l=q.filter(l,r)}return q.grep(j,function(j){return 0<=q.inArray(j,l)===m})}function u(j){var l=Cb.split("|");j=j.createDocumentFragment();if(j.createElement)for(;l.length;)j.createElement(l.pop());
return j}function t(j,l){if(1===l.nodeType&&q.hasData(j)){var m,r,n;r=q._data(j);var p=q._data(l,r),C=r.events;if(C)for(m in delete p.handle,p.events={},C){r=0;for(n=C[m].length;r<n;r++)q.event.add(l,m,C[m][r])}p.data&&(p.data=q.extend({},p.data))}}function x(j,l){var m;1===l.nodeType&&(l.clearAttributes&&l.clearAttributes(),l.mergeAttributes&&l.mergeAttributes(j),m=l.nodeName.toLowerCase(),"object"===m?(l.parentNode&&(l.outerHTML=j.outerHTML),q.support.html5Clone&&j.innerHTML&&!q.trim(l.innerHTML)&&
(l.innerHTML=j.innerHTML)):"input"===m&&Db.test(j.type)?(l.defaultChecked=l.checked=j.checked,l.value!==j.value&&(l.value=j.value)):"option"===m?l.selected=j.defaultSelected:"input"===m||"textarea"===m?l.defaultValue=j.defaultValue:"script"===m&&l.text!==j.text&&(l.text=j.text),l.removeAttribute(q.expando))}function y(j){return"undefined"!=typeof j.getElementsByTagName?j.getElementsByTagName("*"):"undefined"!=typeof j.querySelectorAll?j.querySelectorAll("*"):[]}function z(j){Db.test(j.type)&&(j.defaultChecked=
j.checked)}function F(j,l){if(l in j)return l;for(var m=l.charAt(0).toUpperCase()+l.slice(1),q=l,r=Eb.length;r--;)if(l=Eb[r]+m,l in j)return l;return q}function H(j,l){return j=l||j,"none"===q.css(j,"display")||!q.contains(j.ownerDocument,j)}function M(j,l){for(var m,r,n=[],p=0,C=j.length;p<C;p++)m=j[p],m.style&&(n[p]=q._data(m,"olddisplay"),l?(!n[p]&&"none"===m.style.display&&(m.style.display=""),""===m.style.display&&H(m)&&(n[p]=q._data(m,"olddisplay",ya(m.nodeName)))):(r=R(m,"display"),!n[p]&&
"none"!==r&&q._data(m,"olddisplay",r)));for(p=0;p<C;p++)if(m=j[p],m.style&&(!l||"none"===m.style.display||""===m.style.display))m.style.display=l?n[p]||"":"none";return j}function J(j,l,m){return(j=Cc.exec(l))?Math.max(0,j[1]-(m||0))+(j[2]||"px"):l}function ra(j,l,m,r){l=m===(r?"border":"content")?4:"width"===l?1:0;for(var n=0;4>l;l+=2)"margin"===m&&(n+=q.css(j,m+ia[l],!0)),r?("content"===m&&(n-=parseFloat(R(j,"padding"+ia[l]))||0),"margin"!==m&&(n-=parseFloat(R(j,"border"+ia[l]+"Width"))||0)):(n+=
parseFloat(R(j,"padding"+ia[l]))||0,"padding"!==m&&(n+=parseFloat(R(j,"border"+ia[l]+"Width"))||0));return n}function Fa(j,l,m){var r="width"===l?j.offsetWidth:j.offsetHeight,n=!0,p=q.support.boxSizing&&"border-box"===q.css(j,"boxSizing");if(0>=r||null==r){r=R(j,l);if(0>r||null==r)r=j.style[l];if(Ga.test(r))return r;n=p&&(q.support.boxSizingReliable||r===j.style[l]);r=parseFloat(r)||0}return r+ra(j,l,m||(p?"border":"content"),n)+"px"}function ya(j){if(db[j])return db[j];var l=q("<"+j+">").appendTo(E.body),
m=l.css("display");l.remove();if("none"===m||""===m){sa=E.body.appendChild(sa||q.extend(E.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!ta||!sa.createElement)ta=(sa.contentWindow||sa.contentDocument).document,ta.write("<!doctype html><html><body>"),ta.close();l=ta.body.appendChild(ta.createElement(j));m=R(l,"display");E.body.removeChild(sa)}return db[j]=m,m}function ja(j,l,m,r){var n;if(q.isArray(l))q.each(l,function(l,B){m||Dc.test(j)?r(j,B):ja(j+"["+("object"==typeof B?l:"")+"]",
B,m,r)});else if(!m&&"object"===q.type(l))for(n in l)ja(j+"["+n+"]",l[n],m,r);else r(j,l)}function I(j){return function(l,m){"string"!=typeof l&&(m=l,l="*");var r,n,p=l.toLowerCase().split(ka),C=0,u=p.length;if(q.isFunction(m))for(;C<u;C++)r=p[C],(n=/^\+/.test(r))&&(r=r.substr(1)||"*"),r=j[r]=j[r]||[],r[n?"unshift":"push"](m)}}function la(j,B,m,r,q,n){q=q||B.dataTypes[0];n=n||{};n[q]=!0;var p;q=j[q];for(var u=0,t=q?q.length:0,s=j===eb;u<t&&(s||!p);u++)p=q[u](B,m,r),"string"==typeof p&&(!s||n[p]?p=
l:(B.dataTypes.unshift(p),p=la(j,B,m,r,p,n)));return(s||!p)&&!n["*"]&&(p=la(j,B,m,r,"*",n)),p}function za(j,B){var m,r,n=q.ajaxSettings.flatOptions||{};for(m in B)B[m]!==l&&((n[m]?j:r||(r={}))[m]=B[m]);r&&q.extend(!0,j,r)}function Fb(){try{return new j.XMLHttpRequest}catch(D){}}function Gb(){return setTimeout(function(){Ha=l},0),Ha=q.now()}function Hb(j,l,m){var r,n=0,p=Ia.length,C=q.Deferred().always(function(){delete u.elem}),u=function(){for(var l=Ha||Gb(),l=Math.max(0,t.startTime+t.duration-l),
B=1-(l/t.duration||0),m=0,r=t.tweens.length;m<r;m++)t.tweens[m].run(B);return C.notifyWith(j,[t,B,l]),1>B&&r?l:(C.resolveWith(j,[t]),!1)},t=C.promise({elem:j,props:q.extend({},l),opts:q.extend(!0,{specialEasing:{}},m),originalProperties:l,originalOptions:m,startTime:Ha||Gb(),duration:m.duration,tweens:[],createTween:function(l,B){var m=q.Tween(j,t.opts,l,B,t.opts.specialEasing[l]||t.opts.easing);return t.tweens.push(m),m},stop:function(l){for(var B=0,m=l?t.tweens.length:0;B<m;B++)t.tweens[B].run(1);
return l?C.resolveWith(j,[t,l]):C.rejectWith(j,[t,l]),this}});l=t.props;m=t.opts.specialEasing;var s,x,y,v;for(r in l)if(s=q.camelCase(r),x=m[s],y=l[r],q.isArray(y)&&(x=y[1],y=l[r]=y[0]),r!==s&&(l[s]=y,delete l[r]),(v=q.cssHooks[s])&&"expand"in v)for(r in y=v.expand(y),delete l[s],y)r in l||(l[r]=y[r],m[r]=x);else m[s]=x;for(;n<p;n++)if(r=Ia[n].call(t,j,l,t.opts))return r;var z=t;q.each(l,function(j,D){for(var l=(Aa[j]||[]).concat(Aa["*"]),B=0,m=l.length;B<m&&!l[B].call(z,j,D);B++);});return q.isFunction(t.opts.start)&&
t.opts.start.call(j,t),q.fx.timer(q.extend(u,{anim:t,queue:t.opts.queue,elem:j})),t.progress(t.opts.progress).done(t.opts.done,t.opts.complete).fail(t.opts.fail).always(t.opts.always)}function T(j,l,m,r,q){return new T.prototype.init(j,l,m,r,q)}function Ja(j,l){var m,r={height:j},q=0;for(l=l?1:0;4>q;q+=2-l)m=ia[q],r["margin"+m]=r["padding"+m]=j;return l&&(r.opacity=r.width=j),r}function Ib(j){return q.isWindow(j)?j:9===j.nodeType?j.defaultView||j.parentWindow:!1}var Jb,Ka,E=j.document,Fc=j.location,
Gc=j.navigator,Hc=j.jQuery,Ic=j.$,Kb=Array.prototype.push,da=Array.prototype.slice,Lb=Array.prototype.indexOf,Jc=Object.prototype.toString,fb=Object.prototype.hasOwnProperty,gb=String.prototype.trim,q=function(j,l){return new q.fn.init(j,l,Jb)},La=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,Kc=/\S/,ka=/\s+/,Lc=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Mc=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,Mb=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Nc=/^[\],:{}\s]*$/,Oc=/(?:^|:|,)(?:\s*\[)+/g,Pc=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,
Qc=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,Rc=/^-ms-/,Sc=/-([\da-z])/gi,Tc=function(j,l){return(l+"").toUpperCase()},Ma=function(){E.addEventListener?(E.removeEventListener("DOMContentLoaded",Ma,!1),q.ready()):"complete"===E.readyState&&(E.detachEvent("onreadystatechange",Ma),q.ready())},Nb={};q.fn=q.prototype={constructor:q,init:function(j,B,m){var r,n;if(!j)return this;if(j.nodeType)return this.context=this[0]=j,this.length=1,this;if("string"==typeof j){"<"===j.charAt(0)&&
">"===j.charAt(j.length-1)&&3<=j.length?r=[null,j,null]:r=Mc.exec(j);if(r&&(r[1]||!B)){if(r[1])return B=B instanceof q?B[0]:B,n=B&&B.nodeType?B.ownerDocument||B:E,j=q.parseHTML(r[1],n,!0),Mb.test(r[1])&&q.isPlainObject(B)&&this.attr.call(j,B,!0),q.merge(this,j);if((B=E.getElementById(r[2]))&&B.parentNode){if(B.id!==r[2])return m.find(j);this.length=1;this[0]=B}return this.context=E,this.selector=j,this}return!B||B.jquery?(B||m).find(j):this.constructor(B).find(j)}return q.isFunction(j)?m.ready(j):
(j.selector!==l&&(this.selector=j.selector,this.context=j.context),q.makeArray(j,this))},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length},toArray:function(){return da.call(this)},get:function(j){return null==j?this.toArray():0>j?this[this.length+j]:this[j]},pushStack:function(j,l,m){j=q.merge(this.constructor(),j);return j.prevObject=this,j.context=this.context,"find"===l?j.selector=this.selector+(this.selector?" ":"")+m:l&&(j.selector=this.selector+"."+l+"("+m+")"),j},each:function(j,
l){return q.each(this,j,l)},ready:function(j){return q.ready.promise().done(j),this},eq:function(j){return j=+j,-1===j?this.slice(j):this.slice(j,j+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(da.apply(this,arguments),"slice",da.call(arguments).join(","))},map:function(j){return this.pushStack(q.map(this,function(l,m){return j.call(l,m,l)}))},end:function(){return this.prevObject||this.constructor(null)},push:Kb,sort:[].sort,splice:[].splice};
q.fn.init.prototype=q.fn;q.extend=q.fn.extend=function(){var j,B,m,r,n,p,C=arguments[0]||{},u=1,t=arguments.length,s=!1;"boolean"==typeof C&&(s=C,C=arguments[1]||{},u=2);"object"!=typeof C&&!q.isFunction(C)&&(C={});for(t===u&&(C=this,--u);u<t;u++)if(null!=(j=arguments[u]))for(B in j)m=C[B],r=j[B],C!==r&&(s&&r&&(q.isPlainObject(r)||(n=q.isArray(r)))?(n?(n=!1,p=m&&q.isArray(m)?m:[]):p=m&&q.isPlainObject(m)?m:{},C[B]=q.extend(s,p,r)):r!==l&&(C[B]=r));return C};q.extend({noConflict:function(l){return j.$===
q&&(j.$=Ic),l&&j.jQuery===q&&(j.jQuery=Hc),q},isReady:!1,readyWait:1,holdReady:function(j){j?q.readyWait++:q.ready(!0)},ready:function(j){if(!(!0===j?--q.readyWait:q.isReady)){if(!E.body)return setTimeout(q.ready,1);q.isReady=!0;!0!==j&&0<--q.readyWait||(Ka.resolveWith(E,[q]),q.fn.trigger&&q(E).trigger("ready").off("ready"))}},isFunction:function(j){return"function"===q.type(j)},isArray:Array.isArray||function(j){return"array"===q.type(j)},isWindow:function(j){return null!=j&&j==j.window},isNumeric:function(j){return!isNaN(parseFloat(j))&&
isFinite(j)},type:function(j){return null==j?String(j):Nb[Jc.call(j)]||"object"},isPlainObject:function(j){if(!j||"object"!==q.type(j)||j.nodeType||q.isWindow(j))return!1;try{if(j.constructor&&!fb.call(j,"constructor")&&!fb.call(j.constructor.prototype,"isPrototypeOf"))return!1}catch(B){return!1}for(var m in j);return m===l||fb.call(j,m)},isEmptyObject:function(j){for(var l in j)return!1;return!0},error:function(j){throw Error(j);},parseHTML:function(j,l,m){var r;return!j||"string"!=typeof j?null:
("boolean"==typeof l&&(m=l,l=0),l=l||E,(r=Mb.exec(j))?[l.createElement(r[1])]:(r=q.buildFragment([j],l,m?null:[]),q.merge([],(r.cacheable?q.clone(r.fragment):r.fragment).childNodes)))},parseJSON:function(l){if(!l||"string"!=typeof l)return null;l=q.trim(l);if(j.JSON&&j.JSON.parse)return j.JSON.parse(l);if(Nc.test(l.replace(Pc,"@").replace(Qc,"]").replace(Oc,"")))return(new Function("return "+l))();q.error("Invalid JSON: "+l)},parseXML:function(D){var B,m;if(!D||"string"!=typeof D)return null;try{j.DOMParser?
(m=new DOMParser,B=m.parseFromString(D,"text/xml")):(B=new ActiveXObject("Microsoft.XMLDOM"),B.async="false",B.loadXML(D))}catch(r){B=l}return(!B||!B.documentElement||B.getElementsByTagName("parsererror").length)&&q.error("Invalid XML: "+D),B},noop:function(){},globalEval:function(l){l&&Kc.test(l)&&(j.execScript||function(l){j.eval.call(j,l)})(l)},camelCase:function(j){return j.replace(Rc,"ms-").replace(Sc,Tc)},nodeName:function(j,l){return j.nodeName&&j.nodeName.toLowerCase()===l.toLowerCase()},
each:function(j,m,r){var n,p=0,u=j.length,C=u===l||q.isFunction(j);if(r)if(C)for(n in j){if(!1===m.apply(j[n],r))break}else for(;p<u&&!1!==m.apply(j[p++],r););else if(C)for(n in j){if(!1===m.call(j[n],n,j[n]))break}else for(;p<u&&!1!==m.call(j[p],p,j[p++]););return j},trim:gb&&!gb.call("\ufeff\u00a0")?function(j){return null==j?"":gb.call(j)}:function(j){return null==j?"":(j+"").replace(Lc,"")},makeArray:function(j,l){var m,r=l||[];return null!=j&&(m=q.type(j),null==j.length||"string"===m||"function"===
m||"regexp"===m||q.isWindow(j)?Kb.call(r,j):q.merge(r,j)),r},inArray:function(j,l,m){var r;if(l){if(Lb)return Lb.call(l,j,m);r=l.length;for(m=m?0>m?Math.max(0,r+m):m:0;m<r;m++)if(m in l&&l[m]===j)return m}return-1},merge:function(j,m){var r=m.length,q=j.length,n=0;if("number"==typeof r)for(;n<r;n++)j[q++]=m[n];else for(;m[n]!==l;)j[q++]=m[n++];return j.length=q,j},grep:function(j,l,m){var r,q=[],n=0,p=j.length;for(m=!!m;n<p;n++)r=!!l(j[n],n),m!==r&&q.push(j[n]);return q},map:function(j,m,r){var n,
p,u=[],C=0,t=j.length;if(j instanceof q||t!==l&&"number"==typeof t&&(0<t&&j[0]&&j[t-1]||0===t||q.isArray(j)))for(;C<t;C++)n=m(j[C],C,r),null!=n&&(u[u.length]=n);else for(p in j)n=m(j[p],p,r),null!=n&&(u[u.length]=n);return u.concat.apply([],u)},guid:1,proxy:function(j,m){var r,n,p;return"string"==typeof m&&(r=j[m],m=j,j=r),q.isFunction(j)?(n=da.call(arguments,2),p=function(){return j.apply(m,n.concat(da.call(arguments)))},p.guid=j.guid=j.guid||q.guid++,p):l},access:function(j,m,r,n,p,u,C){var t,s=
null==r,x=0,y=j.length;if(r&&"object"==typeof r){for(x in r)q.access(j,m,x,r[x],1,u,n);p=1}else if(n!==l){t=C===l&&q.isFunction(n);s&&(t?(t=m,m=function(j,l,D){return t.call(q(j),D)}):(m.call(j,n),m=null));if(m)for(;x<y;x++)m(j[x],r,t?n.call(j[x],x,m(j[x],r)):n,C);p=1}return p?j:s?m.call(j):y?m(j[0],r):u},now:function(){return(new Date).getTime()}});q.ready.promise=function(l){if(!Ka)if(Ka=q.Deferred(),"complete"===E.readyState)setTimeout(q.ready,1);else if(E.addEventListener)E.addEventListener("DOMContentLoaded",
Ma,!1),j.addEventListener("load",q.ready,!1);else{E.attachEvent("onreadystatechange",Ma);j.attachEvent("onload",q.ready);var m=!1;try{m=null==j.frameElement&&E.documentElement}catch(r){}m&&m.doScroll&&function Ac(){if(!q.isReady){try{m.doScroll("left")}catch(j){return setTimeout(Ac,50)}q.ready()}}()}return Ka.promise(l)};q.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(j,l){Nb["[object "+l+"]"]=l.toLowerCase()});Jb=q(E);var Ob={};q.Callbacks=function(j){var m;if("string"==
typeof j){if(!(m=Ob[j])){m=j;var r=Ob[m]={};m=(q.each(m.split(ka),function(j,l){r[l]=!0}),r)}}else m=q.extend({},j);j=m;var n,p,u,C,t,s,x=[],y=!j.once&&[],v=function(l){n=j.memory&&l;p=!0;s=C||0;C=0;t=x.length;for(u=!0;x&&s<t;s++)if(!1===x[s].apply(l[0],l[1])&&j.stopOnFalse){n=!1;break}u=!1;x&&(y?y.length&&v(y.shift()):n?x=[]:z.disable())},z={add:function(){if(x){var l=x.length;(function Ec(l){q.each(l,function(l,m){var B=q.type(m);"function"===B&&(!j.unique||!z.has(m))?x.push(m):m&&m.length&&"string"!==
B&&Ec(m)})})(arguments);u?t=x.length:n&&(C=l,v(n))}return this},remove:function(){return x&&q.each(arguments,function(j,l){for(var D;-1<(D=q.inArray(l,x,D));)x.splice(D,1),u&&(D<=t&&t--,D<=s&&s--)}),this},has:function(j){return-1<q.inArray(j,x)},empty:function(){return x=[],this},disable:function(){return x=y=n=l,this},disabled:function(){return!x},lock:function(){return y=l,n||z.disable(),this},locked:function(){return!y},fireWith:function(j,l){return l=l||[],l=[j,l.slice?l.slice():l],x&&(!p||y)&&
(u?y.push(l):v(l)),this},fire:function(){return z.fireWith(this,arguments),this},fired:function(){return!!p}};return z};q.extend({Deferred:function(j){var l=[["resolve","done",q.Callbacks("once memory"),"resolved"],["reject","fail",q.Callbacks("once memory"),"rejected"],["notify","progress",q.Callbacks("memory")]],m="pending",r={state:function(){return m},always:function(){return n.done(arguments).fail(arguments),this},then:function(){var j=arguments;return q.Deferred(function(D){q.each(l,function(l,
m){var B=m[0],r=j[l];n[m[1]](q.isFunction(r)?function(){var j=r.apply(this,arguments);j&&q.isFunction(j.promise)?j.promise().done(D.resolve).fail(D.reject).progress(D.notify):D[B+"With"](this===n?D:this,[j])}:D[B])});j=null}).promise()},promise:function(j){return null!=j?q.extend(j,r):r}},n={};return r.pipe=r.then,q.each(l,function(j,D){var q=D[2],p=D[3];r[D[1]]=q.add;p&&q.add(function(){m=p},l[j^1][2].disable,l[2][2].lock);n[D[0]]=q.fire;n[D[0]+"With"]=q.fireWith}),r.promise(n),j&&j.call(n,n),n},
when:function(j){var l=0,m=da.call(arguments),r=m.length,n=1!==r||j&&q.isFunction(j.promise)?r:0,p=1===n?j:q.Deferred(),u=function(j,l,D){return function(m){l[j]=this;D[j]=1<arguments.length?da.call(arguments):m;D===t?p.notifyWith(l,D):--n||p.resolveWith(l,D)}},t,s,x;if(1<r){t=Array(r);s=Array(r);for(x=Array(r);l<r;l++)m[l]&&q.isFunction(m[l].promise)?m[l].promise().done(u(l,x,m)).fail(p.reject).progress(u(l,s,t)):--n}return n||p.resolveWith(x,m),p.promise()}});var Uc=q,hb;var Q,Na,ma,Oa,Pa,W,na,
Qa,ib,Ba,Pb,N=E.createElement("div");N.setAttribute("className","t");N.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";Na=N.getElementsByTagName("*");ma=N.getElementsByTagName("a")[0];ma.style.cssText="top:1px;float:left;opacity:.5";if(!Na||!Na.length)hb={};else{Oa=E.createElement("select");Pa=Oa.appendChild(E.createElement("option"));W=N.getElementsByTagName("input")[0];Q={leadingWhitespace:3===N.firstChild.nodeType,tbody:!N.getElementsByTagName("tbody").length,htmlSerialize:!!N.getElementsByTagName("link").length,
style:/top/.test(ma.getAttribute("style")),hrefNormalized:"/a"===ma.getAttribute("href"),opacity:/^0.5/.test(ma.style.opacity),cssFloat:!!ma.style.cssFloat,checkOn:"on"===W.value,optSelected:Pa.selected,getSetAttribute:"t"!==N.className,enctype:!!E.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==E.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===E.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,
shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1};W.checked=!0;Q.noCloneChecked=W.cloneNode(!0).checked;Oa.disabled=!0;Q.optDisabled=!Pa.disabled;try{delete N.test}catch(Wd){Q.deleteExpando=!1}!N.addEventListener&&N.attachEvent&&N.fireEvent&&(N.attachEvent("onclick",Pb=function(){Q.noCloneEvent=!1}),N.cloneNode(!0).fireEvent("onclick"),N.detachEvent("onclick",Pb));W=E.createElement("input");W.value="t";W.setAttribute("type","radio");Q.radioValue="t"===W.value;W.setAttribute("checked",
"checked");W.setAttribute("name","t");N.appendChild(W);na=E.createDocumentFragment();na.appendChild(N.lastChild);Q.checkClone=na.cloneNode(!0).cloneNode(!0).lastChild.checked;Q.appendChecked=W.checked;na.removeChild(W);na.appendChild(N);if(N.attachEvent)for(ib in{submit:!0,change:!0,focusin:!0})Qa="on"+ib,(Ba=Qa in N)||(N.setAttribute(Qa,"return;"),Ba="function"==typeof N[Qa]),Q[ib+"Bubbles"]=Ba;hb=(q(function(){var l,m,r,q,n=E.getElementsByTagName("body")[0];n&&(l=E.createElement("div"),l.style.cssText=
"visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",n.insertBefore(l,n.firstChild),m=E.createElement("div"),l.appendChild(m),m.innerHTML="<table><tr><td></td><td>t</td></tr></table>",r=m.getElementsByTagName("td"),r[0].style.cssText="padding:0;margin:0;border:0;display:none",Ba=0===r[0].offsetHeight,r[0].style.display="",r[1].style.display="none",Q.reliableHiddenOffsets=Ba&&0===r[0].offsetHeight,m.innerHTML="",m.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",
Q.boxSizing=4===m.offsetWidth,Q.doesNotIncludeMarginInBodyOffset=1!==n.offsetTop,j.getComputedStyle&&(Q.pixelPosition="1%"!==(j.getComputedStyle(m,null)||{}).top,Q.boxSizingReliable="4px"===(j.getComputedStyle(m,null)||{width:"4px"}).width,q=E.createElement("div"),q.style.cssText=m.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;",q.style.marginRight=q.style.width="0",m.style.width="1px",m.appendChild(q),Q.reliableMarginRight=!parseFloat((j.getComputedStyle(q,null)||{}).marginRight)),
"undefined"!=typeof m.style.zoom&&(m.innerHTML="",m.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;width:1px;padding:1px;display:inline;zoom:1",Q.inlineBlockNeedsLayout=3===m.offsetWidth,m.style.display="block",m.style.overflow="visible",m.innerHTML="<div></div>",m.firstChild.style.width="5px",Q.shrinkWrapBlocks=3!==m.offsetWidth,l.style.zoom=1),n.removeChild(l))}),na.removeChild(N),Na=ma=Oa=Pa=W=na=N=null,Q)}Uc.support=hb;var zc=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,yc=/([A-Z])/g;
q.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(q.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(j){return j=j.nodeType?q.cache[j[q.expando]]:j[q.expando],!!j&&!n(j)},data:function(j,m,r,n){if(q.acceptData(j)){var p,u,C=q.expando,t="string"==typeof m,s=j.nodeType,x=s?q.cache:j,y=s?j[C]:j[C]&&C;if(y&&x[y]&&(n||x[y].data)||!(t&&r===l)){y||(s?j[C]=y=q.deletedIds.pop()||q.guid++:y=C);x[y]||(x[y]={},
s||(x[y].toJSON=q.noop));if("object"==typeof m||"function"==typeof m)n?x[y]=q.extend(x[y],m):x[y].data=q.extend(x[y].data,m);return p=x[y],n||(p.data||(p.data={}),p=p.data),r!==l&&(p[q.camelCase(m)]=r),t?(u=p[m],null==u&&(u=p[q.camelCase(m)])):u=p,u}}},removeData:function(j,l,m){if(q.acceptData(j)){var r,p,u,C=j.nodeType,t=C?q.cache:j,s=C?j[q.expando]:q.expando;if(t[s]){if(l&&(r=m?t[s]:t[s].data)){q.isArray(l)||(l in r?l=[l]:(l=q.camelCase(l),l in r?l=[l]:l=l.split(" ")));p=0;for(u=l.length;p<u;p++)delete r[l[p]];
if(!(m?n:q.isEmptyObject)(r))return}if(!m&&(delete t[s].data,!n(t[s])))return;C?q.cleanData([j],!0):q.support.deleteExpando||t!=t.window?delete t[s]:t[s]=null}}},_data:function(j,l,m){return q.data(j,l,m,!0)},acceptData:function(j){var l=j.nodeName&&q.noData[j.nodeName.toLowerCase()];return!l||!0!==l&&j.getAttribute("classid")===l}});q.fn.extend({data:function(j,B){var r,n,p,u,C,t=this[0],s=0,x=null;if(j===l){if(this.length&&(x=q.data(t),1===t.nodeType&&!q._data(t,"parsedAttrs"))){p=t.attributes;
for(C=p.length;s<C;s++)u=p[s].name,u.indexOf("data-")||(u=q.camelCase(u.substring(5)),m(t,u,x[u]));q._data(t,"parsedAttrs",!0)}return x}return"object"==typeof j?this.each(function(){q.data(this,j)}):(r=j.split(".",2),r[1]=r[1]?"."+r[1]:"",n=r[1]+"!",q.access(this,function(B){if(B===l)return x=this.triggerHandler("getData"+n,[r[0]]),x===l&&t&&(x=q.data(t,j),x=m(t,j,x)),x===l&&r[1]?this.data(r[0]):x;r[1]=B;this.each(function(){var l=q(this);l.triggerHandler("setData"+n,r);q.data(this,j,B);l.triggerHandler("changeData"+
n,r)})},null,B,1<arguments.length,null,!1))},removeData:function(j){return this.each(function(){q.removeData(this,j)})}});q.extend({queue:function(j,l,m){var r;if(j)return l=(l||"fx")+"queue",r=q._data(j,l),m&&(!r||q.isArray(m)?r=q._data(j,l,q.makeArray(m)):r.push(m)),r||[]},dequeue:function(j,l){l=l||"fx";var m=q.queue(j,l),r=m.length,n=m.shift(),p=q._queueHooks(j,l),u=function(){q.dequeue(j,l)};"inprogress"===n&&(n=m.shift(),r--);n&&("fx"===l&&m.unshift("inprogress"),delete p.stop,n.call(j,u,p));
!r&&p&&p.empty.fire()},_queueHooks:function(j,l){var m=l+"queueHooks";return q._data(j,m)||q._data(j,m,{empty:q.Callbacks("once memory").add(function(){q.removeData(j,l+"queue",!0);q.removeData(j,m,!0)})})}});q.fn.extend({queue:function(j,m){var r=2;return"string"!=typeof j&&(m=j,j="fx",r--),arguments.length<r?q.queue(this[0],j):m===l?this:this.each(function(){var l=q.queue(this,j,m);q._queueHooks(this,j);"fx"===j&&"inprogress"!==l[0]&&q.dequeue(this,j)})},dequeue:function(j){return this.each(function(){q.dequeue(this,
j)})},delay:function(j,l){return j=q.fx?q.fx.speeds[j]||j:j,l=l||"fx",this.queue(l,function(l,m){var r=setTimeout(l,j);m.stop=function(){clearTimeout(r)}})},clearQueue:function(j){return this.queue(j||"fx",[])},promise:function(j,m){var r,n=1,p=q.Deferred(),u=this,t=this.length,s=function(){--n||p.resolveWith(u,[u])};"string"!=typeof j&&(m=j,j=l);for(j=j||"fx";t--;)(r=q._data(u[t],j+"queueHooks"))&&r.empty&&(n++,r.empty.add(s));return s(),p.promise(m)}});var ea,Qb,Rb,Sb=/[\t\r\n]/g,Vc=/\r/g,Wc=/^(?:button|input)$/i,
Xc=/^(?:button|input|object|select|textarea)$/i,Yc=/^a(?:rea|)$/i,Tb=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Ub=q.support.getSetAttribute;q.fn.extend({attr:function(j,l){return q.access(this,q.attr,j,l,1<arguments.length)},removeAttr:function(j){return this.each(function(){q.removeAttr(this,j)})},prop:function(j,l){return q.access(this,q.prop,j,l,1<arguments.length)},removeProp:function(j){return j=q.propFix[j]||
j,this.each(function(){try{this[j]=l,delete this[j]}catch(m){}})},addClass:function(j){var l,m,r,n,p,u,t;if(q.isFunction(j))return this.each(function(l){q(this).addClass(j.call(this,l,this.className))});if(j&&"string"==typeof j){l=j.split(ka);m=0;for(r=this.length;m<r;m++)if(n=this[m],1===n.nodeType)if(!n.className&&1===l.length)n.className=j;else{p=" "+n.className+" ";u=0;for(t=l.length;u<t;u++)0>p.indexOf(" "+l[u]+" ")&&(p+=l[u]+" ");n.className=q.trim(p)}}return this},removeClass:function(j){var m,
r,n,p,u,t,s;if(q.isFunction(j))return this.each(function(l){q(this).removeClass(j.call(this,l,this.className))});if(j&&"string"==typeof j||j===l){m=(j||"").split(ka);t=0;for(s=this.length;t<s;t++)if(n=this[t],1===n.nodeType&&n.className){r=(" "+n.className+" ").replace(Sb," ");p=0;for(u=m.length;p<u;p++)for(;0<=r.indexOf(" "+m[p]+" ");)r=r.replace(" "+m[p]+" "," ");n.className=j?q.trim(r):""}}return this},toggleClass:function(j,l){var m=typeof j,r="boolean"==typeof l;return q.isFunction(j)?this.each(function(m){q(this).toggleClass(j.call(this,
m,this.className,l),l)}):this.each(function(){if("string"===m)for(var n,p=0,u=q(this),t=l,s=j.split(ka);n=s[p++];)t=r?t:!u.hasClass(n),u[t?"addClass":"removeClass"](n);else if("undefined"===m||"boolean"===m)this.className&&q._data(this,"__className__",this.className),this.className=this.className||!1===j?"":q._data(this,"__className__")||""})},hasClass:function(j){j=" "+j+" ";for(var l=0,m=this.length;l<m;l++)if(1===this[l].nodeType&&0<=(" "+this[l].className+" ").replace(Sb," ").indexOf(j))return!0;
return!1},val:function(j){var m,r,n,p=this[0];if(arguments.length)return n=q.isFunction(j),this.each(function(r){var L,p=q(this);if(1===this.nodeType&&(n?L=j.call(this,r,p.val()):L=j,null==L?L="":"number"==typeof L?L+="":q.isArray(L)&&(L=q.map(L,function(j){return null==j?"":j+""})),m=q.valHooks[this.type]||q.valHooks[this.nodeName.toLowerCase()],!m||!("set"in m)||m.set(this,L,"value")===l))this.value=L});if(p)return m=q.valHooks[p.type]||q.valHooks[p.nodeName.toLowerCase()],m&&"get"in m&&(r=m.get(p,
"value"))!==l?r:(r=p.value,"string"==typeof r?r.replace(Vc,""):null==r?"":r)}});q.extend({valHooks:{option:{get:function(j){var l=j.attributes.value;return!l||l.specified?j.value:j.text}},select:{get:function(j){var l,m,r=j.selectedIndex,n=[],p=j.options,u="select-one"===j.type;if(0>r)return null;j=u?r:0;for(m=u?r+1:p.length;j<m;j++)if(l=p[j],l.selected&&(q.support.optDisabled?!l.disabled:null===l.getAttribute("disabled"))&&(!l.parentNode.disabled||!q.nodeName(l.parentNode,"optgroup"))){l=q(l).val();
if(u)return l;n.push(l)}return u&&!n.length&&p.length?q(p[r]).val():n},set:function(j,l){var m=q.makeArray(l);return q(j).find("option").each(function(){this.selected=0<=q.inArray(q(this).val(),m)}),m.length||(j.selectedIndex=-1),m}}},attrFn:{},attr:function(j,m,r,n){var p,u,t=j.nodeType;if(j&&!(3===t||8===t||2===t)){if(n&&q.isFunction(q.fn[m]))return q(j)[m](r);if("undefined"==typeof j.getAttribute)return q.prop(j,m,r);(n=1!==t||!q.isXMLDoc(j))&&(m=m.toLowerCase(),u=q.attrHooks[m]||(Tb.test(m)?Qb:
ea));if(r!==l){if(null===r){q.removeAttr(j,m);return}return u&&"set"in u&&n&&(p=u.set(j,r,m))!==l?p:(j.setAttribute(m,r+""),r)}return u&&"get"in u&&n&&null!==(p=u.get(j,m))?p:(p=j.getAttribute(m),null===p?l:p)}},removeAttr:function(j,l){var m,r,n,p,u=0;if(l&&1===j.nodeType)for(r=l.split(ka);u<r.length;u++)(n=r[u])&&(m=q.propFix[n]||n,p=Tb.test(n),p||q.attr(j,n,""),j.removeAttribute(Ub?n:m),p&&m in j&&(j[m]=!1))},attrHooks:{type:{set:function(j,l){if(Wc.test(j.nodeName)&&j.parentNode)q.error("type property can't be changed");
else if(!q.support.radioValue&&"radio"===l&&q.nodeName(j,"input")){var m=j.value;return j.setAttribute("type",l),m&&(j.value=m),l}}},value:{get:function(j,l){return ea&&q.nodeName(j,"button")?ea.get(j,l):l in j?j.value:null},set:function(j,l,m){if(ea&&q.nodeName(j,"button"))return ea.set(j,l,m);j.value=l}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",
usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(j,m,r){var n,p,u,t=j.nodeType;if(j&&!(3===t||8===t||2===t))return u=1!==t||!q.isXMLDoc(j),u&&(m=q.propFix[m]||m,p=q.propHooks[m]),r!==l?p&&"set"in p&&(n=p.set(j,r,m))!==l?n:j[m]=r:p&&"get"in p&&null!==(n=p.get(j,m))?n:j[m]},propHooks:{tabIndex:{get:function(j){var m=j.getAttributeNode("tabindex");return m&&m.specified?parseInt(m.value,10):Xc.test(j.nodeName)||Yc.test(j.nodeName)&&j.href?0:l}}}});Qb={get:function(j,
m){var r,n=q.prop(j,m);return!0===n||"boolean"!=typeof n&&(r=j.getAttributeNode(m))&&!1!==r.nodeValue?m.toLowerCase():l},set:function(j,l,m){var r;return!1===l?q.removeAttr(j,m):(r=q.propFix[m]||m,r in j&&(j[r]=!0),j.setAttribute(m,m.toLowerCase())),m}};Ub||(Rb={name:!0,id:!0,coords:!0},ea=q.valHooks.button={get:function(j,m){var r;return r=j.getAttributeNode(m),r&&(Rb[m]?""!==r.value:r.specified)?r.value:l},set:function(j,l,m){var r=j.getAttributeNode(m);return r||(r=E.createAttribute(m),j.setAttributeNode(r)),
r.value=l+""}},q.each(["width","height"],function(j,l){q.attrHooks[l]=q.extend(q.attrHooks[l],{set:function(j,m){if(""===m)return j.setAttribute(l,"auto"),m}})}),q.attrHooks.contenteditable={get:ea.get,set:function(j,l,m){""===l&&(l="false");ea.set(j,l,m)}});q.support.hrefNormalized||q.each(["href","src","width","height"],function(j,m){q.attrHooks[m]=q.extend(q.attrHooks[m],{get:function(j){j=j.getAttribute(m,2);return null===j?l:j}})});q.support.style||(q.attrHooks.style={get:function(j){return j.style.cssText.toLowerCase()||
l},set:function(j,l){return j.style.cssText=l+""}});q.support.optSelected||(q.propHooks.selected=q.extend(q.propHooks.selected,{get:function(j){j=j.parentNode;return j&&(j.selectedIndex,j.parentNode&&j.parentNode.selectedIndex),null}}));q.support.enctype||(q.propFix.enctype="encoding");q.support.checkOn||q.each(["radio","checkbox"],function(){q.valHooks[this]={get:function(j){return null===j.getAttribute("value")?"on":j.value}}});q.each(["radio","checkbox"],function(){q.valHooks[this]=q.extend(q.valHooks[this],
{set:function(j,l){if(q.isArray(l))return j.checked=0<=q.inArray(q(j).val(),l)}})});var jb=/^(?:textarea|input|select)$/i,Vb=/^([^\.]*|)(?:\.(.+)|)$/,Zc=/(?:^|\s)hover(\.\S+|)\b/,$c=/^key/,ad=/^(?:mouse|contextmenu)|click/,Wb=/^(?:focusinfocus|focusoutblur)$/,Xb=function(j){return q.event.special.hover?j:j.replace(Zc,"mouseenter$1 mouseleave$1")};q.event={add:function(j,m,r,n,p){var u,t,s,x,y,v,z,A,F;if(!(3===j.nodeType||8===j.nodeType||!m||!r||!(u=q._data(j)))){r.handler&&(z=r,r=z.handler,p=z.selector);
r.guid||(r.guid=q.guid++);(s=u.events)||(u.events=s={});(t=u.handle)||(u.handle=t=function(j){return"undefined"!=typeof q&&(!j||q.event.triggered!==j.type)?q.event.dispatch.apply(t.elem,arguments):l},t.elem=j);m=q.trim(Xb(m)).split(" ");for(u=0;u<m.length;u++){x=Vb.exec(m[u])||[];y=x[1];v=(x[2]||"").split(".").sort();F=q.event.special[y]||{};y=(p?F.delegateType:F.bindType)||y;F=q.event.special[y]||{};x=q.extend({type:y,origType:x[1],data:n,handler:r,guid:r.guid,selector:p,needsContext:p&&q.expr.match.needsContext.test(p),
namespace:v.join(".")},z);A=s[y];if(!A&&(A=s[y]=[],A.delegateCount=0,!F.setup||!1===F.setup.call(j,n,v,t)))j.addEventListener?j.addEventListener(y,t,!1):j.attachEvent&&j.attachEvent("on"+y,t);F.add&&(F.add.call(j,x),x.handler.guid||(x.handler.guid=r.guid));p?A.splice(A.delegateCount++,0,x):A.push(x);q.event.global[y]=!0}j=null}},global:{},remove:function(j,l,m,r,n){var p,u,t,s,x,y,v,z,A,F,H=q.hasData(j)&&q._data(j);if(H&&(v=H.events)){l=q.trim(Xb(l||"")).split(" ");for(p=0;p<l.length;p++)if(u=Vb.exec(l[p])||
[],t=s=u[1],u=u[2],t){z=q.event.special[t]||{};t=(r?z.delegateType:z.bindType)||t;A=v[t]||[];x=A.length;u=u?RegExp("(^|\\.)"+u.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(y=0;y<A.length;y++)F=A[y],(n||s===F.origType)&&(!m||m.guid===F.guid)&&(!u||u.test(F.namespace))&&(!r||r===F.selector||"**"===r&&F.selector)&&(A.splice(y--,1),F.selector&&A.delegateCount--,z.remove&&z.remove.call(j,F));0===A.length&&x!==A.length&&((!z.teardown||!1===z.teardown.call(j,u,H.handle))&&q.removeEvent(j,
t,H.handle),delete v[t])}else for(t in v)q.event.remove(j,t+l[p],m,r,!0);q.isEmptyObject(v)&&(delete H.handle,q.removeData(j,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(m,r,n,p){if(!n||3!==n.nodeType&&8!==n.nodeType){var u,t,C,s,x,y,v,z=m.type||m;s=[];if(!Wb.test(z+q.event.triggered)&&(0<=z.indexOf("!")&&(z=z.slice(0,-1),u=!0),0<=z.indexOf(".")&&(s=z.split("."),z=s.shift(),s.sort()),n&&!q.event.customEvent[z]||q.event.global[z]))if(m="object"==typeof m?m[q.expando]?
m:new q.Event(z,m):new q.Event(z),m.type=z,m.isTrigger=!0,m.exclusive=u,m.namespace=s.join("."),m.namespace_re=m.namespace?RegExp("(^|\\.)"+s.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,s=0>z.indexOf(":")?"on"+z:"",n){if(m.result=l,m.target||(m.target=n),r=null!=r?q.makeArray(r):[],r.unshift(m),x=q.event.special[z]||{},!(x.trigger&&!1===x.trigger.apply(n,r))){v=[[n,x.bindType||z]];if(!p&&!x.noBubble&&!q.isWindow(n)){t=x.delegateType||z;u=Wb.test(t+z)?n:n.parentNode;for(C=n;u;u=u.parentNode)v.push([u,t]),
C=u;C===(n.ownerDocument||E)&&v.push([C.defaultView||C.parentWindow||j,t])}for(t=0;t<v.length&&!m.isPropagationStopped();t++)u=v[t][0],m.type=v[t][1],(y=(q._data(u,"events")||{})[m.type]&&q._data(u,"handle"))&&y.apply(u,r),(y=s&&u[s])&&q.acceptData(u)&&y.apply&&!1===y.apply(u,r)&&m.preventDefault();return m.type=z,!p&&!m.isDefaultPrevented()&&(!x._default||!1===x._default.apply(n.ownerDocument,r))&&("click"!==z||!q.nodeName(n,"a"))&&q.acceptData(n)&&s&&n[z]&&("focus"!==z&&"blur"!==z||0!==m.target.offsetWidth)&&
!q.isWindow(n)&&(C=n[s],C&&(n[s]=null),q.event.triggered=z,n[z](),q.event.triggered=l,C&&(n[s]=C)),m.result}}else for(t in n=q.cache,n)n[t].events&&n[t].events[z]&&q.event.trigger(m,r,n[t].handle.elem,!0)}},dispatch:function(m){m=q.event.fix(m||j.event);var r,n,p,u,t,s,x=(q._data(this,"events")||{})[m.type]||[],y=x.delegateCount,v=da.call(arguments),z=!m.exclusive&&!m.namespace,A=q.event.special[m.type]||{},F=[];v[0]=m;m.delegateTarget=this;if(!(A.preDispatch&&!1===A.preDispatch.call(this,m))){if(y&&
(!m.button||"click"!==m.type))for(n=m.target;n!=this;n=n.parentNode||this)if(!0!==n.disabled||"click"!==m.type){u={};t=[];for(r=0;r<y;r++)p=x[r],s=p.selector,u[s]===l&&(u[s]=p.needsContext?0<=q(s,this).index(n):q.find(s,this,null,[n]).length),u[s]&&t.push(p);t.length&&F.push({elem:n,matches:t})}x.length>y&&F.push({elem:this,matches:x.slice(y)});for(r=0;r<F.length&&!m.isPropagationStopped();r++){u=F[r];m.currentTarget=u.elem;for(n=0;n<u.matches.length&&!m.isImmediatePropagationStopped();n++)if(p=u.matches[n],
z||!m.namespace&&!p.namespace||m.namespace_re&&m.namespace_re.test(p.namespace))m.data=p.data,m.handleObj=p,p=((q.event.special[p.origType]||{}).handle||p.handler).apply(u.elem,v),p!==l&&(m.result=p,!1===p&&(m.preventDefault(),m.stopPropagation()))}return A.postDispatch&&A.postDispatch.call(this,m),m.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},
keyHooks:{props:["char","charCode","key","keyCode"],filter:function(j,l){return null==j.which&&(j.which=null!=l.charCode?l.charCode:l.keyCode),j}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(j,m){var r,q,n,p=m.button,u=m.fromElement;return null==j.pageX&&null!=m.clientX&&(r=j.target.ownerDocument||E,q=r.documentElement,n=r.body,j.pageX=m.clientX+(q&&q.scrollLeft||n&&n.scrollLeft||0)-(q&&q.clientLeft||
n&&n.clientLeft||0),j.pageY=m.clientY+(q&&q.scrollTop||n&&n.scrollTop||0)-(q&&q.clientTop||n&&n.clientTop||0)),!j.relatedTarget&&u&&(j.relatedTarget=u===j.target?m.toElement:u),!j.which&&p!==l&&(j.which=p&1?1:p&2?3:p&4?2:0),j}},fix:function(j){if(j[q.expando])return j;var l,m,r=j,n=q.event.fixHooks[j.type]||{},p=n.props?this.props.concat(n.props):this.props;j=q.Event(r);for(l=p.length;l;)m=p[--l],j[m]=r[m];return j.target||(j.target=r.srcElement||E),3===j.target.nodeType&&(j.target=j.target.parentNode),
j.metaKey=!!j.metaKey,n.filter?n.filter(j,r):j},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(j,l,m){q.isWindow(this)&&(this.onbeforeunload=m)},teardown:function(j,l){this.onbeforeunload===l&&(this.onbeforeunload=null)}}},simulate:function(j,l,m,r){j=q.extend(new q.Event,m,{type:j,isSimulated:!0,originalEvent:{}});r?q.event.trigger(j,null,l):q.event.dispatch.call(l,j);j.isDefaultPrevented()&&m.preventDefault()}};q.event.handle=
q.event.dispatch;q.removeEvent=E.removeEventListener?function(j,l,m){j.removeEventListener&&j.removeEventListener(l,m,!1)}:function(j,l,m){l="on"+l;j.detachEvent&&("undefined"==typeof j[l]&&(j[l]=null),j.detachEvent(l,m))};q.Event=function(j,l){if(this instanceof q.Event)j&&j.type?(this.originalEvent=j,this.type=j.type,this.isDefaultPrevented=j.defaultPrevented||!1===j.returnValue||j.getPreventDefault&&j.getPreventDefault()?s:p):this.type=j,l&&q.extend(this,l),this.timeStamp=j&&j.timeStamp||q.now(),
this[q.expando]=!0;else return new q.Event(j,l)};q.Event.prototype={preventDefault:function(){this.isDefaultPrevented=s;var j=this.originalEvent;j&&(j.preventDefault?j.preventDefault():j.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=s;var j=this.originalEvent;j&&(j.stopPropagation&&j.stopPropagation(),j.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=s;this.stopPropagation()},isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p};
q.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(j,l){q.event.special[j]={delegateType:l,bindType:l,handle:function(j){var m,r=j.relatedTarget,D=j.handleObj;if(!r||r!==this&&!q.contains(this,r))j.type=D.origType,m=D.handler.apply(this,arguments),j.type=l;return m}}});q.support.submitBubbles||(q.event.special.submit={setup:function(){if(q.nodeName(this,"form"))return!1;q.event.add(this,"click._submit keypress._submit",function(j){j=j.target;(j=q.nodeName(j,"input")||q.nodeName(j,"button")?
j.form:l)&&!q._data(j,"_submit_attached")&&(q.event.add(j,"submit._submit",function(j){j._submit_bubble=!0}),q._data(j,"_submit_attached",!0))})},postDispatch:function(j){j._submit_bubble&&(delete j._submit_bubble,this.parentNode&&!j.isTrigger&&q.event.simulate("submit",this.parentNode,j,!0))},teardown:function(){if(q.nodeName(this,"form"))return!1;q.event.remove(this,"._submit")}});q.support.changeBubbles||(q.event.special.change={setup:function(){if(jb.test(this.nodeName)){if("checkbox"===this.type||
"radio"===this.type)q.event.add(this,"propertychange._change",function(j){"checked"===j.originalEvent.propertyName&&(this._just_changed=!0)}),q.event.add(this,"click._change",function(j){this._just_changed&&!j.isTrigger&&(this._just_changed=!1);q.event.simulate("change",this,j,!0)});return!1}q.event.add(this,"beforeactivate._change",function(j){j=j.target;jb.test(j.nodeName)&&!q._data(j,"_change_attached")&&(q.event.add(j,"change._change",function(j){this.parentNode&&!j.isSimulated&&!j.isTrigger&&
q.event.simulate("change",this.parentNode,j,!0)}),q._data(j,"_change_attached",!0))})},handle:function(j){var l=j.target;if(this!==l||j.isSimulated||j.isTrigger||"radio"!==l.type&&"checkbox"!==l.type)return j.handleObj.handler.apply(this,arguments)},teardown:function(){return q.event.remove(this,"._change"),!jb.test(this.nodeName)}});q.support.focusinBubbles||q.each({focus:"focusin",blur:"focusout"},function(j,l){var m=0,r=function(j){q.event.simulate(l,j.target,q.event.fix(j),!0)};q.event.special[l]=
{setup:function(){0===m++&&E.addEventListener(j,r,!0)},teardown:function(){0===--m&&E.removeEventListener(j,r,!0)}}});q.fn.extend({on:function(j,m,r,n,u){var t,s;if("object"==typeof j){"string"!=typeof m&&(r=r||m,m=l);for(s in j)this.on(s,m,r,j[s],u);return this}null==r&&null==n?(n=m,r=m=l):null==n&&("string"==typeof m?(n=r,r=l):(n=r,r=m,m=l));if(!1===n)n=p;else if(!n)return this;return 1===u&&(t=n,n=function(j){return q().off(j),t.apply(this,arguments)},n.guid=t.guid||(t.guid=q.guid++)),this.each(function(){q.event.add(this,
j,n,r,m)})},one:function(j,l,m,r){return this.on(j,l,m,r,1)},off:function(j,m,r){var n,u;if(j&&j.preventDefault&&j.handleObj)return n=j.handleObj,q(j.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof j){for(u in j)this.off(u,m,j[u]);return this}if(!1===m||"function"==typeof m)r=m,m=l;return!1===r&&(r=p),this.each(function(){q.event.remove(this,j,r,m)})},bind:function(j,l,m){return this.on(j,null,l,m)},unbind:function(j,l){return this.off(j,
null,l)},live:function(j,l,m){return q(this.context).on(j,this.selector,l,m),this},die:function(j,l){return q(this.context).off(j,this.selector||"**",l),this},delegate:function(j,l,m,r){return this.on(l,j,m,r)},undelegate:function(j,l,m){return 1===arguments.length?this.off(j,"**"):this.off(l,j||"**",m)},trigger:function(j,l){return this.each(function(){q.event.trigger(j,l,this)})},triggerHandler:function(j,l){if(this[0])return q.event.trigger(j,l,this[0],!0)},toggle:function(j){var l=arguments,m=
j.guid||q.guid++,r=0,n=function(m){var n=(q._data(this,"lastToggle"+j.guid)||0)%r;return q._data(this,"lastToggle"+j.guid,n+1),m.preventDefault(),l[n].apply(this,arguments)||!1};for(n.guid=m;r<l.length;)l[r++].guid=m;return this.click(n)},hover:function(j,l){return this.mouseenter(j).mouseleave(l||j)}});q.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),
function(j,l){q.fn[l]=function(j,m){return null==m&&(m=j,j=null),0<arguments.length?this.on(l,null,j,m):this.trigger(l)};$c.test(l)&&(q.event.fixHooks[l]=q.event.keyHooks);ad.test(l)&&(q.event.fixHooks[l]=q.event.mouseHooks)});var bd=j,G=function(j,l,m,r){m=m||[];l=l||aa;var q,n,p,u,t=l.nodeType;if(!j||"string"!=typeof j)return m;if(1!==t&&9!==t)return[];p=Ra(l);if(!p&&!r&&(q=cd.exec(j)))if(u=q[1])if(9===t){n=l.getElementById(u);if(!n||!n.parentNode)return m;if(n.id===u)return m.push(n),m}else{if(l.ownerDocument&&
(n=l.ownerDocument.getElementById(u))&&Yb(l,n)&&n.id===u)return m.push(n),m}else{if(q[2])return ua.apply(m,va.call(l.getElementsByTagName(j),0)),m;if((u=q[3])&&Zb&&l.getElementsByClassName)return ua.apply(m,va.call(l.getElementsByClassName(u),0)),m}return kb(j.replace(Sa,"$1"),l,m,r,p)},Ca=function(j){return function(l){return"input"===l.nodeName.toLowerCase()&&l.type===j}},$b=function(j){return function(l){var m=l.nodeName.toLowerCase();return("input"===m||"button"===m)&&l.type===j}},oa=function(j){return ba(function(l){return l=
+l,ba(function(m,r){for(var q,n=j([],m.length,l),p=n.length;p--;)m[q=n[p]]&&(m[q]=!(r[q]=m[q]))})})},Ta=function(j,l,m){if(j===l)return m;for(j=j.nextSibling;j;){if(j===l)return-1;j=j.nextSibling}return 1},Va=function(j,l){var m,r,q,n,p,u,t;if(p=ac[O][j])return l?0:p.slice(0);p=j;u=[];for(t=P.preFilter;p;){if(!m||(r=dd.exec(p)))r&&(p=p.slice(r[0].length)),u.push(q=[]);m=!1;if(r=ed.exec(p))q.push(m=new bc(r.shift())),p=p.slice(m.length),m.type=r[0].replace(Sa," ");for(n in P.filter)(r=Ua[n].exec(p))&&
(!t[n]||(r=t[n](r,aa,!0)))&&(q.push(m=new bc(r.shift())),p=p.slice(m.length),m.type=n,m.matches=r);if(!m)break}return l?p.length:p?G.error(j):ac(j,u).slice(0)},mb=function(j,l,m){var r=l.dir,q=m&&"parentNode"===l.dir,n=fd++;return l.first?function(l,m,n){for(;l=l[r];)if(q||1===l.nodeType)return j(l,m,n)}:function(l,m,p){if(p)for(;l=l[r];){if((q||1===l.nodeType)&&j(l,m,p))return l}else for(var B,u=Da+" "+n+" ",t=u+lb;l=l[r];)if(q||1===l.nodeType){if((B=l[O])===t)return l.sizset;if("string"==typeof B&&
0===B.indexOf(u)){if(l.sizset)return l}else{l[O]=t;if(j(l,m,p))return l.sizset=!0,l;l.sizset=!1}}}},nb=function(j){return 1<j.length?function(l,m,r){for(var q=j.length;q--;)if(!j[q](l,m,r))return!1;return!0}:j[0]},Wa=function(j,l,m,r,q){for(var n,p=[],u=0,t=j.length,s=null!=l;u<t;u++)if(n=j[u])if(!m||m(n,r,q))p.push(n),s&&l.push(u);return p},ob=function(j,l,m,r,q,n){return r&&!r[O]&&(r=ob(r)),q&&!q[O]&&(q=ob(q,n)),ba(function(n,p,u,t){if(!n||!q){var s,x,y=[],v=[],S=p.length;if(!(x=n)){x=l||"*";var z=
u.nodeType?[u]:u,A=[];s=0;for(var F=z.length;s<F;s++)G(x,z[s],A,n);x=A}z=j&&(n||!l)?Wa(x,y,j,u,t):x;A=m?q||(n?j:S||r)?[]:p:z;m&&m(z,A,u,t);if(r){x=Wa(A,v);r(x,[],u,t);for(u=x.length;u--;)if(s=x[u])A[v[u]]=!(z[v[u]]=s)}if(n)for(u=j&&A.length;u--;){if(s=A[u])n[y[u]]=!(p[y[u]]=s)}else A=Wa(A===p?A.splice(S,A.length):A),q?q(null,p,A,t):ua.apply(p,A)}})},pb=function(j){var l,m,r,q=j.length,n=P.relative[j[0].type];m=n||P.relative[" "];for(var p=n?1:0,u=mb(function(j){return j===l},m,!0),t=mb(function(j){return-1<
cc.call(l,j)},m,!0),s=[function(j,m,r){return!n&&(r||m!==Xa)||((l=m).nodeType?u(j,m,r):t(j,m,r))}];p<q;p++)if(m=P.relative[j[p].type])s=[mb(nb(s),m)];else{m=P.filter[j[p].type].apply(null,j[p].matches);if(m[O]){for(r=++p;r<q&&!P.relative[j[r].type];r++);return ob(1<p&&nb(s),1<p&&j.slice(0,p-1).join("").replace(Sa,"$1"),m,p<r&&pb(j.slice(p,r)),r<q&&pb(j=j.slice(r)),r<q&&j.join(""))}s.push(m)}return nb(s)},kb=function(j,l,m,r,q){var n,p,u,t,s=Va(j);if(!r&&1===s.length){p=s[0]=s[0].slice(0);if(2<p.length&&
"ID"===(u=p[0]).type&&9===l.nodeType&&!q&&P.relative[p[1].type]){l=P.find.ID(u.matches[0].replace(pa,""),l,q)[0];if(!l)return m;j=j.slice(p.shift().length)}for(n=Ua.POS.test(j)?-1:p.length-1;0<=n;n--){u=p[n];if(P.relative[t=u.type])break;if(t=P.find[t])if(r=t(u.matches[0].replace(pa,""),qb.test(p[0].type)&&l.parentNode||l,q)){p.splice(n,1);j=r.length&&p.join("");if(!j)return ua.apply(m,va.call(r,0)),m;break}}}return rb(j,s)(r,l,q,m,qb.test(j)),m},dc=function(){},lb,sb,P,Ya,Ra,Yb,rb,tb,Ea,Xa,ec=!0,
O=("sizcache"+Math.random()).replace(".",""),bc=String,aa=bd.document,Z=aa.documentElement,Da=0,fd=0,gd=[].pop,ua=[].push,va=[].slice,cc=[].indexOf||function(j){for(var l=0,m=this.length;l<m;l++)if(this[l]===j)return l;return-1},ba=function(j,l){return j[O]=null==l||l,j},ub=function(){var j={},l=[];return ba(function(m,r){return l.push(m)>P.cacheLength&&delete j[l.shift()],j[m]=r},j)},fc=ub(),ac=ub(),gc=ub(),hc="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+
"(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+".replace("w","w#")+")|)|)[\\x20\\t\\r\\n\\f]*\\]",vb=":((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+hc+")|[^:]|\\\\.)*|.*))\\)|)",Sa=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,dd=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,ed=/^[\x20\t\r\n\f]*([\x20\t\r\n\f>+~])[\x20\t\r\n\f]*/,hd=RegExp(vb),cd=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,qb=/[\x20\t\r\n\f]*[+~]/,id=/h\d/i,jd=/input|select|textarea|button/i,pa=/\\(?!\\)/g,
Ua={ID:/^#((?:\\.|[-\w]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[-\w]|[^\x00-\xa0])+)/,NAME:/^\[name=['"]?((?:\\.|[-\w]|[^\x00-\xa0])+)['"]?\]/,TAG:RegExp("^("+"(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:RegExp("^"+hc),PSEUDO:RegExp("^"+vb),POS:/:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i,CHILD:RegExp("^:(only|nth|first|last)-child(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)",
"i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},fa=function(j){var l=aa.createElement("div");try{return j(l)}catch(m){return!1}finally{}},kd=fa(function(j){return j.appendChild(aa.createComment("")),!j.getElementsByTagName("*").length}),ld=fa(function(j){return j.innerHTML="<a href='#'></a>",j.firstChild&&"undefined"!==typeof j.firstChild.getAttribute&&"#"===j.firstChild.getAttribute("href")}),
md=fa(function(j){j.innerHTML="<select></select>";j=typeof j.lastChild.getAttribute("multiple");return"boolean"!==j&&"string"!==j}),Zb=fa(function(j){return j.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!j.getElementsByClassName||!j.getElementsByClassName("e").length?!1:(j.lastChild.className="e",2===j.getElementsByClassName("e").length)}),nd=fa(function(j){j.id=O+0;j.innerHTML="<a name='"+O+"'></a><div name='"+O+"'></div>";Z.insertBefore(j,Z.firstChild);var l=aa.getElementsByName&&
aa.getElementsByName(O).length===2+aa.getElementsByName(O+0).length;return sb=!aa.getElementById(O),Z.removeChild(j),l});try{va.call(Z.childNodes,0)[0].nodeType}catch(Xd){va=function(j){for(var l,m=[];l=this[j];j++)m.push(l);return m}}G.matches=function(j,l){return G(j,null,null,l)};G.matchesSelector=function(j,l){return 0<G(l,null,null,[j]).length};Ya=G.getText=function(j){var l,m="",r=0;if(l=j.nodeType)if(1===l||9===l||11===l){if("string"==typeof j.textContent)return j.textContent;for(j=j.firstChild;j;j=
j.nextSibling)m+=Ya(j)}else{if(3===l||4===l)return j.nodeValue}else for(;l=j[r];r++)m+=Ya(l);return m};Ra=G.isXML=function(j){return(j=j&&(j.ownerDocument||j).documentElement)?"HTML"!==j.nodeName:!1};Yb=G.contains=Z.contains?function(j,l){var m=9===j.nodeType?j.documentElement:j,r=l&&l.parentNode;return j===r||!(!r||!(1===r.nodeType&&m.contains&&m.contains(r)))}:Z.compareDocumentPosition?function(j,l){return l&&!!(j.compareDocumentPosition(l)&16)}:function(j,l){for(;l=l.parentNode;)if(l===j)return!0;
return!1};G.attr=function(j,l){var m,r=Ra(j);return r||(l=l.toLowerCase()),(m=P.attrHandle[l])?m(j):r||md?j.getAttribute(l):(m=j.getAttributeNode(l),m?"boolean"==typeof j[l]?j[l]?l:null:m.specified?m.value:null:null)};P=G.selectors={cacheLength:50,createPseudo:ba,match:Ua,attrHandle:ld?{}:{href:function(j){return j.getAttribute("href",2)},type:function(j){return j.getAttribute("type")}},find:{ID:sb?function(j,l,m){if("undefined"!==typeof l.getElementById&&!m)return(j=l.getElementById(j))&&j.parentNode?
[j]:[]}:function(j,l,m){if("undefined"!==typeof l.getElementById&&!m)return(l=l.getElementById(j))?l.id===j||"undefined"!==typeof l.getAttributeNode&&l.getAttributeNode("id").value===j?[l]:void 0:[]},TAG:kd?function(j,l){if("undefined"!==typeof l.getElementsByTagName)return l.getElementsByTagName(j)}:function(j,l){var m=l.getElementsByTagName(j);if("*"===j){for(var r,q=[],n=0;r=m[n];n++)1===r.nodeType&&q.push(r);return q}return m},NAME:nd&&function(j,l){if("undefined"!==typeof l.getElementsByName)return l.getElementsByName(name)},
CLASS:Zb&&function(j,l,m){if("undefined"!==typeof l.getElementsByClassName&&!m)return l.getElementsByClassName(j)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(j){return j[1]=j[1].replace(pa,""),j[3]=(j[4]||j[5]||"").replace(pa,""),"~="===j[2]&&(j[3]=" "+j[3]+" "),j.slice(0,4)},CHILD:function(j){return j[1]=j[1].toLowerCase(),"nth"===j[1]?(j[2]||G.error(j[0]),j[3]=+(j[3]?j[4]+(j[5]||1):
2*("even"===j[2]||"odd"===j[2])),j[4]=+(j[6]+j[7]||"odd"===j[2])):j[2]&&G.error(j[0]),j},PSEUDO:function(j){var l,m;if(Ua.CHILD.test(j[0]))return null;if(j[3])j[2]=j[3];else if(l=j[4])hd.test(l)&&(m=Va(l,!0))&&(m=l.indexOf(")",l.length-m)-l.length)&&(l=l.slice(0,m),j[0]=j[0].slice(0,m)),j[2]=l;return j.slice(0,3)}},filter:{ID:sb?function(j){return j=j.replace(pa,""),function(l){return l.getAttribute("id")===j}}:function(j){return j=j.replace(pa,""),function(l){return(l="undefined"!==typeof l.getAttributeNode&&
l.getAttributeNode("id"))&&l.value===j}},TAG:function(j){return"*"===j?function(){return!0}:(j=j.replace(pa,"").toLowerCase(),function(l){return l.nodeName&&l.nodeName.toLowerCase()===j})},CLASS:function(j){var l=fc[O][j];return l||(l=fc(j,RegExp("(^|[\\x20\\t\\r\\n\\f])"+j+"([\\x20\\t\\r\\n\\f]|$)"))),function(j){return l.test(j.className||"undefined"!==typeof j.getAttribute&&j.getAttribute("class")||"")}},ATTR:function(j,l,m){return function(r){r=G.attr(r,j);return null==r?"!="===l:l?(r+="","="===
l?r===m:"!="===l?r!==m:"^="===l?m&&0===r.indexOf(m):"*="===l?m&&-1<r.indexOf(m):"$="===l?m&&r.substr(r.length-m.length)===m:"~="===l?-1<(" "+r+" ").indexOf(m):"|="===l?r===m||r.substr(0,m.length+1)===m+"-":!1):!0}},CHILD:function(j,l,m,r){return"nth"===j?function(j){var l,q;l=j.parentNode;if(1===m&&0===r)return!0;if(l){q=0;for(l=l.firstChild;l&&!(1===l.nodeType&&(q++,j===l));l=l.nextSibling);}return q-=r,q===m||0===q%m&&0<=q/m}:function(l){var m=l;switch(j){case "only":case "first":for(;m=m.previousSibling;)if(1===
m.nodeType)return!1;if("first"===j)return!0;m=l;case "last":for(;m=m.nextSibling;)if(1===m.nodeType)return!1;return!0}}},PSEUDO:function(j,l){var m,r=P.pseudos[j]||P.setFilters[j.toLowerCase()]||G.error("unsupported pseudo: "+j);return r[O]?r(l):1<r.length?(m=[j,j,"",l],P.setFilters.hasOwnProperty(j.toLowerCase())?ba(function(j,m){for(var q,n=r(j,l),p=n.length;p--;)q=cc.call(j,n[p]),j[q]=!(m[q]=n[p])}):function(j){return r(j,0,m)}):r}},pseudos:{not:ba(function(j){var l=[],m=[],r=rb(j.replace(Sa,"$1"));
return r[O]?ba(function(j,l,m,q){q=r(j,null,q,[]);for(var n=j.length;n--;)if(m=q[n])j[n]=!(l[n]=m)}):function(j,q,n){return l[0]=j,r(l,null,n,m),!m.pop()}}),has:ba(function(j){return function(l){return 0<G(j,l).length}}),contains:ba(function(j){return function(l){return-1<(l.textContent||l.innerText||Ya(l)).indexOf(j)}}),enabled:function(j){return!1===j.disabled},disabled:function(j){return!0===j.disabled},checked:function(j){var l=j.nodeName.toLowerCase();return"input"===l&&!!j.checked||"option"===
l&&!!j.selected},selected:function(j){return j.parentNode&&j.parentNode.selectedIndex,!0===j.selected},parent:function(j){return!P.pseudos.empty(j)},empty:function(j){var l;for(j=j.firstChild;j;){if("@"<j.nodeName||3===(l=j.nodeType)||4===l)return!1;j=j.nextSibling}return!0},header:function(j){return id.test(j.nodeName)},text:function(j){var l,m;return"input"===j.nodeName.toLowerCase()&&"text"===(l=j.type)&&(null==(m=j.getAttribute("type"))||m.toLowerCase()===l)},radio:Ca("radio"),checkbox:Ca("checkbox"),
file:Ca("file"),password:Ca("password"),image:Ca("image"),submit:$b("submit"),reset:$b("reset"),button:function(j){var l=j.nodeName.toLowerCase();return"input"===l&&"button"===j.type||"button"===l},input:function(j){return jd.test(j.nodeName)},focus:function(j){var l=j.ownerDocument;return j===l.activeElement&&(!l.hasFocus||l.hasFocus())&&(!!j.type||!!j.href)},active:function(j){return j===j.ownerDocument.activeElement},first:oa(function(){return[0]}),last:oa(function(j,l){return[l-1]}),eq:oa(function(j,
l,m){return[0>m?m+l:m]}),even:oa(function(j,l){for(var m=0;m<l;m+=2)j.push(m);return j}),odd:oa(function(j,l){for(var m=1;m<l;m+=2)j.push(m);return j}),lt:oa(function(j,l,m){for(l=0>m?m+l:m;0<=--l;)j.push(l);return j}),gt:oa(function(j,l,m){for(m=0>m?m+l:m;++m<l;)j.push(m);return j})}};tb=Z.compareDocumentPosition?function(j,l){return j===l?(Ea=!0,0):(!j.compareDocumentPosition||!l.compareDocumentPosition?j.compareDocumentPosition:j.compareDocumentPosition(l)&4)?-1:1}:function(j,l){if(j===l)return Ea=
!0,0;if(j.sourceIndex&&l.sourceIndex)return j.sourceIndex-l.sourceIndex;var m,r,q=[],n=[];m=j.parentNode;r=l.parentNode;var p=m;if(m===r)return Ta(j,l);if(!m)return-1;if(!r)return 1;for(;p;)q.unshift(p),p=p.parentNode;for(p=r;p;)n.unshift(p),p=p.parentNode;m=q.length;r=n.length;for(p=0;p<m&&p<r;p++)if(q[p]!==n[p])return Ta(q[p],n[p]);return p===m?Ta(j,n[p],-1):Ta(q[p],l,1)};[0,0].sort(tb);ec=!Ea;G.uniqueSort=function(j){var l,m=1;Ea=ec;j.sort(tb);if(Ea)for(;l=j[m];m++)l===j[m-1]&&j.splice(m--,1);
return j};G.error=function(j){throw Error("Syntax error, unrecognized expression: "+j);};rb=G.compile=function(j,l){var m,r=[],q=[],n=gc[O][j];if(!n){l||(l=Va(j));for(m=l.length;m--;)n=pb(l[m]),n[O]?r.push(n):q.push(n);var p=0<r.length,u=0<q.length,t=function(j,l,m,n,D){var B,s,x=[],y=0,L="0",v=j&&[],z=null!=D,A=Xa,S=j||u&&P.find.TAG("*",D&&l.parentNode||l),F=Da+=null==A?1:Math.E;for(z&&(Xa=l!==aa&&l,lb=t.el);null!=(D=S[L]);L++){if(u&&D){for(B=0;s=q[B];B++)if(s(D,l,m)){n.push(D);break}z&&(Da=F,lb=
++t.el)}p&&((D=!s&&D)&&y--,j&&v.push(D))}y+=L;if(p&&L!==y){for(B=0;s=r[B];B++)s(v,x,l,m);if(j){if(0<y)for(;L--;)!v[L]&&!x[L]&&(x[L]=gd.call(n));x=Wa(x)}ua.apply(n,x);z&&!j&&0<x.length&&1<y+r.length&&G.uniqueSort(n)}return z&&(Da=F,Xa=A),v};m=(t.el=0,p?ba(t):t);n=gc(j,m)}return n};if(aa.querySelectorAll){var ic,od=kb,pd=/'|\\/g,qd=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,ca=[":focus"],Za=[":active",":focus"],$a=Z.matchesSelector||Z.mozMatchesSelector||Z.webkitMatchesSelector||Z.oMatchesSelector||
Z.msMatchesSelector;fa(function(j){j.innerHTML="<select><option selected=''></option></select>";j.querySelectorAll("[selected]").length||ca.push("\\[[\\x20\\t\\r\\n\\f]*(?:checked|disabled|ismap|multiple|readonly|selected|value)");j.querySelectorAll(":checked").length||ca.push(":checked")});fa(function(j){j.innerHTML="<p test=''></p>";j.querySelectorAll("[test^='']").length&&ca.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:\"\"|'')");j.innerHTML="<input type='hidden'/>";j.querySelectorAll(":enabled").length||
ca.push(":enabled",":disabled")});ca=RegExp(ca.join("|"));kb=function(j,l,m,r,q){if(!r&&!q&&(!ca||!ca.test(j))){var n,p,u=!0,t=O;p=l;n=9===l.nodeType&&j;if(1===l.nodeType&&"object"!==l.nodeName.toLowerCase()){n=Va(j);(u=l.getAttribute("id"))?t=u.replace(pd,"\\$&"):l.setAttribute("id",t);t="[id='"+t+"'] ";for(p=n.length;p--;)n[p]=t+n[p].join("");p=qb.test(j)&&l.parentNode||l;n=n.join(",")}if(n)try{return ua.apply(m,va.call(p.querySelectorAll(n),0)),m}catch(s){}finally{u||l.removeAttribute("id")}}return od(j,
l,m,r,q)};$a&&(fa(function(j){ic=$a.call(j,"div");try{$a.call(j,"[test!='']:sizzle"),Za.push("!=",vb)}catch(l){}}),Za=RegExp(Za.join("|")),G.matchesSelector=function(j,l){l=l.replace(qd,"='$1']");if(!Ra(j)&&!Za.test(l)&&(!ca||!ca.test(l)))try{var m=$a.call(j,l);if(m||ic||j.document&&11!==j.document.nodeType)return m}catch(r){}return 0<G(l,null,null,[j]).length})}P.pseudos.nth=P.pseudos.eq;P.filters=dc.prototype=P.pseudos;P.setFilters=new dc;G.attr=q.attr;q.find=G;q.expr=G.selectors;q.expr[":"]=q.expr.pseudos;
q.unique=G.uniqueSort;q.text=G.getText;q.isXMLDoc=G.isXML;q.contains=G.contains;var rd=/Until$/,sd=/^(?:parents|prev(?:Until|All))/,Bc=/^.[^:#\[\.,]*$/,jc=q.expr.match.needsContext,td={children:!0,contents:!0,next:!0,prev:!0};q.fn.extend({find:function(j){var l,m,r,n,p,u,t=this;if("string"!=typeof j)return q(j).filter(function(){l=0;for(m=t.length;l<m;l++)if(q.contains(t[l],this))return!0});u=this.pushStack("","find",j);l=0;for(m=this.length;l<m;l++)if(r=u.length,q.find(j,this[l],u),0<l)for(n=r;n<
u.length;n++)for(p=0;p<r;p++)if(u[p]===u[n]){u.splice(n--,1);break}return u},has:function(j){var l,m=q(j,this),r=m.length;return this.filter(function(){for(l=0;l<r;l++)if(q.contains(this,m[l]))return!0})},not:function(j){return this.pushStack(r(this,j,!1),"not",j)},filter:function(j){return this.pushStack(r(this,j,!0),"filter",j)},is:function(j){return!!j&&("string"==typeof j?jc.test(j)?0<=q(j,this.context).index(this[0]):0<q.filter(j,this).length:0<this.filter(j).length)},closest:function(j,l){for(var m,
r=0,n=this.length,p=[],u=jc.test(j)||"string"!=typeof j?q(j,l||this.context):0;r<n;r++)for(m=this[r];m&&m.ownerDocument&&m!==l&&11!==m.nodeType;){if(u?-1<u.index(m):q.find.matchesSelector(m,j)){p.push(m);break}m=m.parentNode}return p=1<p.length?q.unique(p):p,this.pushStack(p,"closest",j)},index:function(j){return j?"string"==typeof j?q.inArray(this[0],q(j)):q.inArray(j.jquery?j[0]:j,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(j,l){var m="string"==typeof j?q(j,l):q.makeArray(j&&
j.nodeType?[j]:j),r=q.merge(this.get(),m);return this.pushStack(A(m[0])||A(r[0])?r:q.unique(r))},addBack:function(j){return this.add(null==j?this.prevObject:this.prevObject.filter(j))}});q.fn.andSelf=q.fn.addBack;q.each({parent:function(j){return(j=j.parentNode)&&11!==j.nodeType?j:null},parents:function(j){return q.dir(j,"parentNode")},parentsUntil:function(j,l,m){return q.dir(j,"parentNode",m)},next:function(j){return v(j,"nextSibling")},prev:function(j){return v(j,"previousSibling")},nextAll:function(j){return q.dir(j,
"nextSibling")},prevAll:function(j){return q.dir(j,"previousSibling")},nextUntil:function(j,l,m){return q.dir(j,"nextSibling",m)},prevUntil:function(j,l,m){return q.dir(j,"previousSibling",m)},siblings:function(j){return q.sibling((j.parentNode||{}).firstChild,j)},children:function(j){return q.sibling(j.firstChild)},contents:function(j){return q.nodeName(j,"iframe")?j.contentDocument||j.contentWindow.document:q.merge([],j.childNodes)}},function(j,l){q.fn[j]=function(m,r){var n=q.map(this,l,m);return rd.test(j)||
(r=m),r&&"string"==typeof r&&(n=q.filter(r,n)),n=1<this.length&&!td[j]?q.unique(n):n,1<this.length&&sd.test(j)&&(n=n.reverse()),this.pushStack(n,j,da.call(arguments).join(","))}});q.extend({filter:function(j,l,m){return m&&(j=":not("+j+")"),1===l.length?q.find.matchesSelector(l[0],j)?[l[0]]:[]:q.find.matches(j,l)},dir:function(j,m,r){var n=[];for(j=j[m];j&&9!==j.nodeType&&(r===l||1!==j.nodeType||!q(j).is(r));)1===j.nodeType&&n.push(j),j=j[m];return n},sibling:function(j,l){for(var m=[];j;j=j.nextSibling)1===
j.nodeType&&j!==l&&m.push(j);return m}});var Cb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ud=/ jQuery\d+="(?:null|\d+)"/g,wb=/^\s+/,kc=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,lc=/<([\w:]+)/,vd=/<tbody/i,wd=/<|&#?\w+;/,xd=/<(?:script|style|link)/i,yd=/<(?:script|object|embed|option|style)/i,xb=RegExp("<(?:"+Cb+")[\\s/>]","i"),Db=/^(?:checkbox|radio)$/,
mc=/checked\s*(?:[^=]|=\s*.checked.)/i,zd=/\/(java|ecma)script/i,Ad=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Y={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},nc=u(E),yb=nc.appendChild(E.createElement("div"));Y.optgroup=
Y.option;Y.tbody=Y.tfoot=Y.colgroup=Y.caption=Y.thead;Y.th=Y.td;q.support.htmlSerialize||(Y._default=[1,"X<div>","</div>"]);q.fn.extend({text:function(j){return q.access(this,function(j){return j===l?q.text(this):this.empty().append((this[0]&&this[0].ownerDocument||E).createTextNode(j))},null,j,arguments.length)},wrapAll:function(j){if(q.isFunction(j))return this.each(function(l){q(this).wrapAll(j.call(this,l))});if(this[0]){var l=q(j,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&l.insertBefore(this[0]);
l.map(function(){for(var j=this;j.firstChild&&1===j.firstChild.nodeType;)j=j.firstChild;return j}).append(this)}return this},wrapInner:function(j){return q.isFunction(j)?this.each(function(l){q(this).wrapInner(j.call(this,l))}):this.each(function(){var l=q(this),m=l.contents();m.length?m.wrapAll(j):l.append(j)})},wrap:function(j){var l=q.isFunction(j);return this.each(function(m){q(this).wrapAll(l?j.call(this,m):j)})},unwrap:function(){return this.parent().each(function(){q.nodeName(this,"body")||
q(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(j){(1===this.nodeType||11===this.nodeType)&&this.appendChild(j)})},prepend:function(){return this.domManip(arguments,!0,function(j){(1===this.nodeType||11===this.nodeType)&&this.insertBefore(j,this.firstChild)})},before:function(){if(!A(this[0]))return this.domManip(arguments,!1,function(j){this.parentNode.insertBefore(j,this)});if(arguments.length){var j=q.clean(arguments);return this.pushStack(q.merge(j,
this),"before",this.selector)}},after:function(){if(!A(this[0]))return this.domManip(arguments,!1,function(j){this.parentNode.insertBefore(j,this.nextSibling)});if(arguments.length){var j=q.clean(arguments);return this.pushStack(q.merge(this,j),"after",this.selector)}},remove:function(j,l){for(var m,r=0;null!=(m=this[r]);r++)if(!j||q.filter(j,[m]).length)!l&&1===m.nodeType&&(q.cleanData(m.getElementsByTagName("*")),q.cleanData([m])),m.parentNode&&m.parentNode.removeChild(m);return this},empty:function(){for(var j,
l=0;null!=(j=this[l]);l++)for(1===j.nodeType&&q.cleanData(j.getElementsByTagName("*"));j.firstChild;)j.removeChild(j.firstChild);return this},clone:function(j,l){return j=null==j?!1:j,l=null==l?j:l,this.map(function(){return q.clone(this,j,l)})},html:function(j){return q.access(this,function(j){var m=this[0]||{},r=0,n=this.length;if(j===l)return 1===m.nodeType?m.innerHTML.replace(ud,""):l;if("string"==typeof j&&!xd.test(j)&&(q.support.htmlSerialize||!xb.test(j))&&(q.support.leadingWhitespace||!wb.test(j))&&
!Y[(lc.exec(j)||["",""])[1].toLowerCase()]){j=j.replace(kc,"<$1></$2>");try{for(;r<n;r++)m=this[r]||{},1===m.nodeType&&(q.cleanData(m.getElementsByTagName("*")),m.innerHTML=j);m=0}catch(p){}}m&&this.empty().append(j)},null,j,arguments.length)},replaceWith:function(j){return A(this[0])?this.length?this.pushStack(q(q.isFunction(j)?j():j),"replaceWith",j):this:q.isFunction(j)?this.each(function(l){var m=q(this),r=m.html();m.replaceWith(j.call(this,l,r))}):("string"!=typeof j&&(j=q(j).detach()),this.each(function(){var l=
this.nextSibling,m=this.parentNode;q(this).remove();l?q(l).before(j):q(m).append(j)}))},detach:function(j){return this.remove(j,!0)},domManip:function(j,m,r){j=[].concat.apply([],j);var n,p,u,t=0,s=j[0],x=[],y=this.length;if(!q.support.checkClone&&1<y&&"string"==typeof s&&mc.test(s))return this.each(function(){q(this).domManip(j,m,r)});if(q.isFunction(s))return this.each(function(n){var p=q(this);j[0]=s.call(this,n,m?p.html():l);p.domManip(j,m,r)});if(this[0]){n=q.buildFragment(j,this,x);u=n.fragment;
p=u.firstChild;1===u.childNodes.length&&(u=p);if(p){m=m&&q.nodeName(p,"tr");for(n=n.cacheable||y-1;t<y;t++)r.call(m&&q.nodeName(this[t],"table")?this[t].getElementsByTagName("tbody")[0]||this[t].appendChild(this[t].ownerDocument.createElement("tbody")):this[t],t===n?u:q.clone(u,!0,!0))}u=p=null;x.length&&q.each(x,function(j,l){l.src?q.ajax?q.ajax({url:l.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):q.error("no ajax"):q.globalEval((l.text||l.textContent||l.innerHTML||"").replace(Ad,
""));l.parentNode&&l.parentNode.removeChild(l)})}return this}});q.buildFragment=function(j,m,r){var n,p,u,t=j[0];return m=m||E,m=!m.nodeType&&m[0]||m,m=m.ownerDocument||m,1===j.length&&"string"==typeof t&&512>t.length&&m===E&&"<"===t.charAt(0)&&!yd.test(t)&&(q.support.checkClone||!mc.test(t))&&(q.support.html5Clone||!xb.test(t))&&(p=!0,n=q.fragments[t],u=n!==l),n||(n=m.createDocumentFragment(),q.clean(j,m,n,r),p&&(q.fragments[t]=u&&n)),{fragment:n,cacheable:p}};q.fragments={};q.each({appendTo:"append",
prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(j,l){q.fn[j]=function(m){var r,n=0,p=[];m=q(m);var u=m.length;r=1===this.length&&this[0].parentNode;if((null==r||r&&11===r.nodeType&&1===r.childNodes.length)&&1===u)return m[l](this[0]),this;for(;n<u;n++)r=(0<n?this.clone(!0):this).get(),q(m[n])[l](r),p=p.concat(r);return this.pushStack(p,j,m.selector)}});q.extend({clone:function(j,l,m){var r,n,p,u;q.support.html5Clone||q.isXMLDoc(j)||!xb.test("<"+j.nodeName+
">")?u=j.cloneNode(!0):(yb.innerHTML=j.outerHTML,yb.removeChild(u=yb.firstChild));if((!q.support.noCloneEvent||!q.support.noCloneChecked)&&(1===j.nodeType||11===j.nodeType)&&!q.isXMLDoc(j)){x(j,u);r=y(j);n=y(u);for(p=0;r[p];++p)n[p]&&x(r[p],n[p])}if(l&&(t(j,u),m)){r=y(j);n=y(u);for(p=0;r[p];++p)t(r[p],n[p])}return u},clean:function(j,l,m,r){var n,p,t,s,x,y,v,A=l===E&&nc,F=[];if(!l||"undefined"==typeof l.createDocumentFragment)l=E;for(n=0;null!=(t=j[n]);n++)if("number"==typeof t&&(t+=""),t){if("string"==
typeof t)if(wd.test(t)){A=A||u(l);y=l.createElement("div");A.appendChild(y);t=t.replace(kc,"<$1></$2>");p=(lc.exec(t)||["",""])[1].toLowerCase();s=Y[p]||Y._default;x=s[0];for(y.innerHTML=s[1]+t+s[2];x--;)y=y.lastChild;if(!q.support.tbody){x=vd.test(t);s="table"===p&&!x?y.firstChild&&y.firstChild.childNodes:"<table>"===s[1]&&!x?y.childNodes:[];for(p=s.length-1;0<=p;--p)q.nodeName(s[p],"tbody")&&!s[p].childNodes.length&&s[p].parentNode.removeChild(s[p])}!q.support.leadingWhitespace&&wb.test(t)&&y.insertBefore(l.createTextNode(wb.exec(t)[0]),
y.firstChild);t=y.childNodes;y.parentNode.removeChild(y)}else t=l.createTextNode(t);t.nodeType?F.push(t):q.merge(F,t)}y&&(t=y=A=null);if(!q.support.appendChecked)for(n=0;null!=(t=F[n]);n++)q.nodeName(t,"input")?z(t):"undefined"!=typeof t.getElementsByTagName&&q.grep(t.getElementsByTagName("input"),z);if(m){j=function(j){if(!j.type||zd.test(j.type))return r?r.push(j.parentNode?j.parentNode.removeChild(j):j):m.appendChild(j)};for(n=0;null!=(t=F[n]);n++)if(!q.nodeName(t,"script")||!j(t))m.appendChild(t),
"undefined"!=typeof t.getElementsByTagName&&(v=q.grep(q.merge([],t.getElementsByTagName("script")),j),F.splice.apply(F,[n+1,0].concat(v)),n+=v.length)}return F},cleanData:function(j,l){for(var m,r,n,p,u=0,t=q.expando,s=q.cache,x=q.support.deleteExpando,y=q.event.special;null!=(n=j[u]);u++)if(l||q.acceptData(n))if(m=(r=n[t])&&s[r]){if(m.events)for(p in m.events)y[p]?q.event.remove(n,p):q.removeEvent(n,p,m.handle);s[r]&&(delete s[r],x?delete n[t]:n.removeAttribute?n.removeAttribute(t):n[t]=null,q.deletedIds.push(r))}}});
var ab,ha;q.uaMatch=function(j){j=j.toLowerCase();j=/(chrome)[ \/]([\w.]+)/.exec(j)||/(webkit)[ \/]([\w.]+)/.exec(j)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(j)||/(msie) ([\w.]+)/.exec(j)||0>j.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(j)||[];return{browser:j[1]||"",version:j[2]||"0"}};ab=q.uaMatch(Gc.userAgent);ha={};ab.browser&&(ha[ab.browser]=!0,ha.version=ab.version);ha.chrome?ha.webkit=!0:ha.webkit&&(ha.safari=!0);q.browser=ha;q.sub=function(){function j(l,m){return new j.fn.init(l,
m)}q.extend(!0,j,this);j.superclass=this;j.fn=j.prototype=this();j.fn.constructor=j;j.sub=this.sub;j.fn.init=function(m,r){return r&&r instanceof q&&!(r instanceof j)&&(r=j(r)),q.fn.init.call(this,m,r,l)};j.fn.init.prototype=j.fn;var l=j(E);return j};var R,sa,ta,zb=/alpha\([^)]*\)/i,Bd=/opacity=([^)]*)/,Cd=/^(top|right|bottom|left)$/,Dd=/^(none|table(?!-c[ea]).+)/,oc=/^margin/,Cc=RegExp("^("+La+")(.*)$","i"),Ga=RegExp("^("+La+")(?!px)[a-z%]+$","i"),Ed=RegExp("^([-+])=("+La+")","i"),db={},Fd={position:"absolute",
visibility:"hidden",display:"block"},pc={letterSpacing:0,fontWeight:400},ia=["Top","Right","Bottom","Left"],Eb=["Webkit","O","Moz","ms"],Gd=q.fn.toggle;q.fn.extend({css:function(j,m){return q.access(this,function(j,m,r){return r!==l?q.style(j,m,r):q.css(j,m)},j,m,1<arguments.length)},show:function(){return M(this,!0)},hide:function(){return M(this)},toggle:function(j,l){var m="boolean"==typeof j;return q.isFunction(j)&&q.isFunction(l)?Gd.apply(this,arguments):this.each(function(){(m?j:H(this))?q(this).show():
q(this).hide()})}});q.extend({cssHooks:{opacity:{get:function(j,l){if(l){var m=R(j,"opacity");return""===m?"1":m}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":q.support.cssFloat?"cssFloat":"styleFloat"},style:function(j,m,r,n){if(j&&!(3===j.nodeType||8===j.nodeType||!j.style)){var p,u,t,s=q.camelCase(m),x=j.style;m=q.cssProps[s]||(q.cssProps[s]=F(x,s));t=q.cssHooks[m]||q.cssHooks[s];if(r===l)return t&&"get"in t&&(p=t.get(j,
!1,n))!==l?p:x[m];u=typeof r;"string"===u&&(p=Ed.exec(r))&&(r=(p[1]+1)*p[2]+parseFloat(q.css(j,m)),u="number");if(!(null==r||"number"===u&&isNaN(r)))if("number"===u&&!q.cssNumber[s]&&(r+="px"),!t||!("set"in t)||(r=t.set(j,r,n))!==l)try{x[m]=r}catch(y){}}},css:function(j,m,r,n){var p,u,t,s=q.camelCase(m);return m=q.cssProps[s]||(q.cssProps[s]=F(j.style,s)),t=q.cssHooks[m]||q.cssHooks[s],t&&"get"in t&&(p=t.get(j,!0,n)),p===l&&(p=R(j,m)),"normal"===p&&m in pc&&(p=pc[m]),r||n!==l?(u=parseFloat(p),r||
q.isNumeric(u)?u||0:p):p},swap:function(j,l,m){var r,n={};for(r in l)n[r]=j.style[r],j.style[r]=l[r];m=m.call(j);for(r in l)j.style[r]=n[r];return m}});j.getComputedStyle?R=function(l,m){var r,n,p,u,t=j.getComputedStyle(l,null),s=l.style;return t&&(r=t[m],""===r&&!q.contains(l.ownerDocument,l)&&(r=q.style(l,m)),Ga.test(r)&&oc.test(m)&&(n=s.width,p=s.minWidth,u=s.maxWidth,s.minWidth=s.maxWidth=s.width=r,r=t.width,s.width=n,s.minWidth=p,s.maxWidth=u)),r}:E.documentElement.currentStyle&&(R=function(j,
l){var m,r,n=j.currentStyle&&j.currentStyle[l],q=j.style;return null==n&&q&&q[l]&&(n=q[l]),Ga.test(n)&&!Cd.test(l)&&(m=q.left,r=j.runtimeStyle&&j.runtimeStyle.left,r&&(j.runtimeStyle.left=j.currentStyle.left),q.left="fontSize"===l?"1em":n,n=q.pixelLeft+"px",q.left=m,r&&(j.runtimeStyle.left=r)),""===n?"auto":n});q.each(["height","width"],function(j,l){q.cssHooks[l]={get:function(j,m,r){if(m)return 0===j.offsetWidth&&Dd.test(R(j,"display"))?q.swap(j,Fd,function(){return Fa(j,l,r)}):Fa(j,l,r)},set:function(j,
m,r){return J(j,m,r?ra(j,l,r,q.support.boxSizing&&"border-box"===q.css(j,"boxSizing")):0)}}});q.support.opacity||(q.cssHooks.opacity={get:function(j,l){return Bd.test((l&&j.currentStyle?j.currentStyle.filter:j.style.filter)||"")?0.01*parseFloat(RegExp.$1)+"":l?"1":""},set:function(j,l){var m=j.style,r=j.currentStyle,n=q.isNumeric(l)?"alpha(opacity="+100*l+")":"",p=r&&r.filter||m.filter||"";m.zoom=1;if(1<=l&&(""===q.trim(p.replace(zb,""))&&m.removeAttribute)&&(m.removeAttribute("filter"),r&&!r.filter))return;
m.filter=zb.test(p)?p.replace(zb,n):p+" "+n}});q(function(){q.support.reliableMarginRight||(q.cssHooks.marginRight={get:function(j,l){return q.swap(j,{display:"inline-block"},function(){if(l)return R(j,"marginRight")})}});!q.support.pixelPosition&&q.fn.position&&q.each(["top","left"],function(j,l){q.cssHooks[l]={get:function(j,m){if(m){var r=R(j,l);return Ga.test(r)?q(j).position()[l]+"px":r}}}})});q.expr&&q.expr.filters&&(q.expr.filters.hidden=function(j){return 0===j.offsetWidth&&0===j.offsetHeight||
!q.support.reliableHiddenOffsets&&"none"===(j.style&&j.style.display||R(j,"display"))},q.expr.filters.visible=function(j){return!q.expr.filters.hidden(j)});q.each({margin:"",padding:"",border:"Width"},function(j,l){q.cssHooks[j+l]={expand:function(m){var r="string"==typeof m?m.split(" "):[m],n={};for(m=0;4>m;m++)n[j+ia[m]+l]=r[m]||r[m-2]||r[0];return n}};oc.test(j)||(q.cssHooks[j+l].set=J)});var Hd=/%20/g,Dc=/\[\]$/,qc=/\r?\n/g,Id=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,
Jd=/^(?:select|textarea)/i;q.fn.extend({serialize:function(){return q.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?q.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Jd.test(this.nodeName)||Id.test(this.type))}).map(function(j,l){var m=q(this).val();return null==m?null:q.isArray(m)?q.map(m,function(j){return{name:l.name,value:j.replace(qc,"\r\n")}}):{name:l.name,value:m.replace(qc,"\r\n")}}).get()}});
q.param=function(j,m){var r,n=[],p=function(j,l){l=q.isFunction(l)?l():null==l?"":l;n[n.length]=encodeURIComponent(j)+"="+encodeURIComponent(l)};m===l&&(m=q.ajaxSettings&&q.ajaxSettings.traditional);if(q.isArray(j)||j.jquery&&!q.isPlainObject(j))q.each(j,function(){p(this.name,this.value)});else for(r in j)ja(r,j[r],m,p);return n.join("&").replace(Hd,"+")};var wa,qa,Kd=/#.*$/,Ld=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Md=/^(?:GET|HEAD)$/,Nd=/^\/\//,rc=/\?/,Od=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,
Pd=/([?&])_=[^&]*/,sc=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,tc=q.fn.load,eb={},uc={},vc=["*/"]+["*"];try{qa=Fc.href}catch(Yd){qa=E.createElement("a"),qa.href="",qa=qa.href}wa=sc.exec(qa.toLowerCase())||[];q.fn.load=function(j,m,r){if("string"!=typeof j&&tc)return tc.apply(this,arguments);if(!this.length)return this;var n,p,u,t=this,s=j.indexOf(" ");return 0<=s&&(n=j.slice(s,j.length),j=j.slice(0,s)),q.isFunction(m)?(r=m,m=l):m&&"object"==typeof m&&(p="POST"),q.ajax({url:j,type:p,dataType:"html",
data:m,complete:function(j,l){r&&t.each(r,u||[j.responseText,l,j])}}).done(function(j){u=arguments;t.html(n?q("<div>").append(j.replace(Od,"")).find(n):j)}),this};q.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(j,l){q.fn[l]=function(j){return this.on(l,j)}});q.each(["get","post"],function(j,m){q[m]=function(j,r,n,p){return q.isFunction(r)&&(p=p||n,n=r,r=l),q.ajax({type:m,url:j,data:r,success:n,dataType:p})}});q.extend({getScript:function(j,m){return q.get(j,
l,m,"script")},getJSON:function(j,l,m){return q.get(j,l,m,"json")},ajaxSetup:function(j,l){return l?za(j,q.ajaxSettings):(l=j,j=q.ajaxSettings),za(j,l),j},ajaxSettings:{url:qa,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(wa[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":vc},contents:{xml:/xml/,
html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":j.String,"text html":!0,"text json":q.parseJSON,"text xml":q.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:I(eb),ajaxTransport:I(uc),ajax:function(j,m){function r(j,m,u,x){var v,D,B,L,S,V=m;if(2!==J){J=2;s&&clearTimeout(s);t=l;p=x||"";K.readyState=0<j?4:0;if(u){L=z;x=K;var X,G,I,N,P=L.contents,O=L.dataTypes,Q=L.responseFields;for(G in Q)G in u&&(x[Q[G]]=u[G]);for(;"*"===O[0];)O.shift(),
X===l&&(X=L.mimeType||x.getResponseHeader("content-type"));if(X)for(G in P)if(P[G]&&P[G].test(X)){O.unshift(G);break}if(O[0]in u)I=O[0];else{for(G in u){if(!O[0]||L.converters[G+" "+O[0]]){I=G;break}N||(N=G)}I=I||N}u=I?(I!==O[0]&&O.unshift(I),u[I]):void 0;L=u}if(200<=j&&300>j||304===j)if(z.ifModified&&(S=K.getResponseHeader("Last-Modified"),S&&(q.lastModified[n]=S),S=K.getResponseHeader("Etag"),S&&(q.etag[n]=S)),304===j)V="notmodified",v=!0;else{var U;a:{v=z;D=L;var R,V=v.dataTypes.slice();u=V[0];
X={};G=0;v.dataFilter&&(D=v.dataFilter(D,v.dataType));if(V[1])for(U in v.converters)X[U.toLowerCase()]=v.converters[U];for(;B=V[++G];)if("*"!==B){if("*"!==u&&u!==B){U=X[u+" "+B]||X["* "+B];if(!U)for(R in X)if(S=R.split(" "),S[1]===B&&(U=X[u+" "+S[0]]||X["* "+S[0]])){!0===U?U=X[R]:!0!==X[R]&&(B=S[0],V.splice(G--,0,B));break}if(!0!==U)if(U&&v["throws"])D=U(D);else try{D=U(D)}catch(T){U={state:"parsererror",error:U?T:"No conversion from "+u+" to "+B};break a}}u=B}U={state:"success",data:D}}v=U;V=v.state;
D=v.data;B=v.error;v=!B}else if(B=V,!V||j)V="error",0>j&&(j=0);K.status=j;K.statusText=(m||V)+"";v?H.resolveWith(A,[D,V,K]):H.rejectWith(A,[K,V,B]);K.statusCode(E);E=l;y&&F.trigger("ajax"+(v?"Success":"Error"),[K,z,v?D:B]);M.fireWith(A,[K,V]);y&&(F.trigger("ajaxComplete",[K,z]),--q.active||q.event.trigger("ajaxStop"))}}"object"==typeof j&&(m=j,j=l);m=m||{};var n,p,u,t,s,x,y,v,z=q.ajaxSetup({},m),A=z.context||z,F=A!==z&&(A.nodeType||A instanceof q)?q(A):q.event,H=q.Deferred(),M=q.Callbacks("once memory"),
E=z.statusCode||{},G={},I={},J=0,N="canceled",K={readyState:0,setRequestHeader:function(j,l){if(!J){var m=j.toLowerCase();j=I[m]=I[m]||j;G[j]=l}return this},getAllResponseHeaders:function(){return 2===J?p:null},getResponseHeader:function(j){var m;if(2===J){if(!u)for(u={};m=Ld.exec(p);)u[m[1].toLowerCase()]=m[2];m=u[j.toLowerCase()]}return m===l?null:m},overrideMimeType:function(j){return J||(z.mimeType=j),this},abort:function(j){return j=j||N,t&&t.abort(j),r(0,j),this}};H.promise(K);K.success=K.done;
K.error=K.fail;K.complete=M.add;K.statusCode=function(j){if(j){var l;if(2>J)for(l in j)E[l]=[E[l],j[l]];else l=j[K.status],K.always(l)}return this};z.url=((j||z.url)+"").replace(Kd,"").replace(Nd,wa[1]+"//");z.dataTypes=q.trim(z.dataType||"*").toLowerCase().split(ka);null==z.crossDomain&&(x=sc.exec(z.url.toLowerCase())||!1,z.crossDomain=x&&x.join(":")+(x[3]?"":"http:"===x[1]?80:443)!==wa.join(":")+(wa[3]?"":"http:"===wa[1]?80:443));z.data&&z.processData&&"string"!=typeof z.data&&(z.data=q.param(z.data,
z.traditional));la(eb,z,m,K);if(2===J)return K;y=z.global;z.type=z.type.toUpperCase();z.hasContent=!Md.test(z.type);y&&0===q.active++&&q.event.trigger("ajaxStart");if(!z.hasContent&&(z.data&&(z.url+=(rc.test(z.url)?"&":"?")+z.data,delete z.data),n=z.url,!1===z.cache)){x=q.now();var P=z.url.replace(Pd,"$1_="+x);z.url=P+(P===z.url?(rc.test(z.url)?"&":"?")+"_="+x:"")}(z.data&&z.hasContent&&!1!==z.contentType||m.contentType)&&K.setRequestHeader("Content-Type",z.contentType);z.ifModified&&(n=n||z.url,
q.lastModified[n]&&K.setRequestHeader("If-Modified-Since",q.lastModified[n]),q.etag[n]&&K.setRequestHeader("If-None-Match",q.etag[n]));K.setRequestHeader("Accept",z.dataTypes[0]&&z.accepts[z.dataTypes[0]]?z.accepts[z.dataTypes[0]]+("*"!==z.dataTypes[0]?", "+vc+"; q=0.01":""):z.accepts["*"]);for(v in z.headers)K.setRequestHeader(v,z.headers[v]);if(!z.beforeSend||!1!==z.beforeSend.call(A,K,z)&&2!==J){N="abort";for(v in{success:1,error:1,complete:1})K[v](z[v]);if(t=la(uc,z,m,K)){K.readyState=1;y&&F.trigger("ajaxSend",
[K,z]);z.async&&0<z.timeout&&(s=setTimeout(function(){K.abort("timeout")},z.timeout));try{J=1,t.send(G,r)}catch(O){if(2>J)r(-1,O);else throw O;}}else r(-1,"No Transport");return K}return K.abort()},active:0,lastModified:{},etag:{}});var wc=[],Qd=/\?/,bb=/(=)\?(?=&|$)|\?\?/,Rd=q.now();q.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var j=wc.pop()||q.expando+"_"+Rd++;return this[j]=!0,j}});q.ajaxPrefilter("json jsonp",function(m,r,n){var p,u,t,s=m.data,x=m.url,y=!1!==m.jsonp,z=y&&bb.test(x),
v=y&&!z&&"string"==typeof s&&!(m.contentType||"").indexOf("application/x-www-form-urlencoded")&&bb.test(s);if("jsonp"===m.dataTypes[0]||z||v)return p=m.jsonpCallback=q.isFunction(m.jsonpCallback)?m.jsonpCallback():m.jsonpCallback,u=j[p],z?m.url=x.replace(bb,"$1"+p):v?m.data=s.replace(bb,"$1"+p):y&&(m.url+=(Qd.test(x)?"&":"?")+m.jsonp+"="+p),m.converters["script json"]=function(){return t||q.error(p+" was not called"),t[0]},m.dataTypes[0]="json",j[p]=function(){t=arguments},n.always(function(){j[p]=
u;m[p]&&(m.jsonpCallback=r.jsonpCallback,wc.push(p));t&&q.isFunction(u)&&u(t[0]);t=u=l}),"script"});q.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(j){return q.globalEval(j),j}}});q.ajaxPrefilter("script",function(j){j.cache===l&&(j.cache=!1);j.crossDomain&&(j.type="GET",j.global=!1)});q.ajaxTransport("script",function(j){if(j.crossDomain){var m,r=
E.head||E.getElementsByTagName("head")[0]||E.documentElement;return{send:function(n,q){m=E.createElement("script");m.async="async";j.scriptCharset&&(m.charset=j.scriptCharset);m.src=j.url;m.onload=m.onreadystatechange=function(j,n){if(n||!m.readyState||/loaded|complete/.test(m.readyState))m.onload=m.onreadystatechange=null,r&&m.parentNode&&r.removeChild(m),m=l,n||q(200,"success")};r.insertBefore(m,r.firstChild)},abort:function(){m&&m.onload(0,1)}}}});var xa,Ab=j.ActiveXObject?function(){for(var j in xa)xa[j](0,
1)}:!1,Sd=0;q.ajaxSettings.xhr=j.ActiveXObject?function(){var l;if(!(l=!this.isLocal&&Fb()))a:{try{l=new j.ActiveXObject("Microsoft.XMLHTTP");break a}catch(m){}l=void 0}return l}:Fb;var Bb=q.ajaxSettings.xhr();q.extend(q.support,{ajax:!!Bb,cors:!!Bb&&"withCredentials"in Bb});q.support.ajax&&q.ajaxTransport(function(m){if(!m.crossDomain||q.support.cors){var r;return{send:function(n,p){var u,t,s=m.xhr();m.username?s.open(m.type,m.url,m.async,m.username,m.password):s.open(m.type,m.url,m.async);if(m.xhrFields)for(t in m.xhrFields)s[t]=
m.xhrFields[t];m.mimeType&&s.overrideMimeType&&s.overrideMimeType(m.mimeType);!m.crossDomain&&!n["X-Requested-With"]&&(n["X-Requested-With"]="XMLHttpRequest");try{for(t in n)s.setRequestHeader(t,n[t])}catch(x){}s.send(m.hasContent&&m.data||null);r=function(j,n){var t,x,y,z,v;try{if(r&&(n||4===s.readyState))if(r=l,u&&(s.onreadystatechange=q.noop,Ab&&delete xa[u]),n)4!==s.readyState&&s.abort();else{t=s.status;y=s.getAllResponseHeaders();z={};(v=s.responseXML)&&v.documentElement&&(z.xml=v);try{z.text=
s.responseText}catch(A){}try{x=s.statusText}catch(F){x=""}!t&&m.isLocal&&!m.crossDomain?t=z.text?200:404:1223===t&&(t=204)}}catch(L){n||p(-1,L)}z&&p(t,x,z,y)};m.async?4===s.readyState?setTimeout(r,0):(u=++Sd,Ab&&(xa||(xa={},q(j).unload(Ab)),xa[u]=r),s.onreadystatechange=r):r()},abort:function(){r&&r(0,1)}}}});var Ha,cb,Td=/^(?:toggle|show|hide)$/,Ud=RegExp("^(?:([-+])=|)("+La+")([a-z%]*)$","i"),Vd=/queueHooks$/,Ia=[function(j,l,m){var r,n,p,u,t,s,x=this,y=j.style,z={},v=[],A=j.nodeType&&H(j);m.queue||
(t=q._queueHooks(j,"fx"),null==t.unqueued&&(t.unqueued=0,s=t.empty.fire,t.empty.fire=function(){t.unqueued||s()}),t.unqueued++,x.always(function(){x.always(function(){t.unqueued--;q.queue(j,"fx").length||t.empty.fire()})}));1===j.nodeType&&("height"in l||"width"in l)&&(m.overflow=[y.overflow,y.overflowX,y.overflowY],"inline"===q.css(j,"display")&&"none"===q.css(j,"float")&&(!q.support.inlineBlockNeedsLayout||"inline"===ya(j.nodeName)?y.display="inline-block":y.zoom=1));m.overflow&&(y.overflow="hidden",
q.support.shrinkWrapBlocks||x.done(function(){y.overflow=m.overflow[0];y.overflowX=m.overflow[1];y.overflowY=m.overflow[2]}));for(r in l)n=l[r],Td.exec(n)&&(delete l[r],n!==(A?"hide":"show")&&v.push(r));if(n=v.length){p=q._data(j,"fxshow")||q._data(j,"fxshow",{});A?q(j).show():x.done(function(){q(j).hide()});x.done(function(){var l;q.removeData(j,"fxshow",!0);for(l in z)q.style(j,l,z[l])});for(r=0;r<n;r++)l=v[r],u=x.createTween(l,A?p[l]:0),z[l]=p[l]||q.style(j,l),l in p||(p[l]=u.start,A&&(u.end=u.start,
u.start="width"===l||"height"===l?1:0))}}],Aa={"*":[function(j,l){var m,r,n=this.createTween(j,l),p=Ud.exec(l),u=n.cur(),t=+u||0,s=1,x=20;if(p){m=+p[2];r=p[3]||(q.cssNumber[j]?"":"px");if("px"!==r&&t){t=q.css(n.elem,j,!0)||m||1;do s=s||".5",t/=s,q.style(n.elem,j,t+r);while(s!==(s=n.cur()/u)&&1!==s&&--x)}n.unit=r;n.start=t;n.end=p[1]?t+(p[1]+1)*m:m}return n}]};q.Animation=q.extend(Hb,{tweener:function(j,l){q.isFunction(j)?(l=j,j=["*"]):j=j.split(" ");for(var m,r=0,n=j.length;r<n;r++)m=j[r],Aa[m]=Aa[m]||
[],Aa[m].unshift(l)},prefilter:function(j,l){l?Ia.unshift(j):Ia.push(j)}});q.Tween=T;T.prototype={constructor:T,init:function(j,l,m,r,n,p){this.elem=j;this.prop=m;this.easing=n||"swing";this.options=l;this.start=this.now=this.cur();this.end=r;this.unit=p||(q.cssNumber[m]?"":"px")},cur:function(){var j=T.propHooks[this.prop];return j&&j.get?j.get(this):T.propHooks._default.get(this)},run:function(j){var l,m=T.propHooks[this.prop];return this.options.duration?this.pos=l=q.easing[this.easing](j,this.options.duration*
j,0,1,this.options.duration):this.pos=l=j,this.now=(this.end-this.start)*l+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),m&&m.set?m.set(this):T.propHooks._default.set(this),this}};T.prototype.init.prototype=T.prototype;T.propHooks={_default:{get:function(j){var l;return null==j.elem[j.prop]||j.elem.style&&null!=j.elem.style[j.prop]?(l=q.css(j.elem,j.prop,!1,""),!l||"auto"===l?0:l):j.elem[j.prop]},set:function(j){q.fx.step[j.prop]?q.fx.step[j.prop](j):j.elem.style&&
(null!=j.elem.style[q.cssProps[j.prop]]||q.cssHooks[j.prop])?q.style(j.elem,j.prop,j.now+j.unit):j.elem[j.prop]=j.now}}};T.propHooks.scrollTop=T.propHooks.scrollLeft={set:function(j){j.elem.nodeType&&j.elem.parentNode&&(j.elem[j.prop]=j.now)}};q.each(["toggle","show","hide"],function(j,l){var m=q.fn[l];q.fn[l]=function(r,n,p){return null==r||"boolean"==typeof r||!j&&q.isFunction(r)&&q.isFunction(n)?m.apply(this,arguments):this.animate(Ja(l,!0),r,n,p)}});q.fn.extend({fadeTo:function(j,l,m,r){return this.filter(H).css("opacity",
0).show().end().animate({opacity:l},j,m,r)},animate:function(j,l,m,r){var n=q.isEmptyObject(j),p=q.speed(l,m,r);l=function(){var l=Hb(this,q.extend({},j),p);n&&l.stop(!0)};return n||!1===p.queue?this.each(l):this.queue(p.queue,l)},stop:function(j,m,r){var n=function(j){var l=j.stop;delete j.stop;l(r)};return"string"!=typeof j&&(r=m,m=j,j=l),m&&!1!==j&&this.queue(j||"fx",[]),this.each(function(){var l=!0,m=null!=j&&j+"queueHooks",p=q.timers,u=q._data(this);if(m)u[m]&&u[m].stop&&n(u[m]);else for(m in u)u[m]&&
u[m].stop&&Vd.test(m)&&n(u[m]);for(m=p.length;m--;)p[m].elem===this&&(null==j||p[m].queue===j)&&(p[m].anim.stop(r),l=!1,p.splice(m,1));(l||!r)&&q.dequeue(this,j)})}});q.each({slideDown:Ja("show"),slideUp:Ja("hide"),slideToggle:Ja("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(j,l){q.fn[j]=function(j,m,r){return this.animate(l,j,m,r)}});q.speed=function(j,l,m){var r=j&&"object"==typeof j?q.extend({},j):{complete:m||!m&&l||q.isFunction(j)&&j,duration:j,
easing:m&&l||l&&!q.isFunction(l)&&l};r.duration=q.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in q.fx.speeds?q.fx.speeds[r.duration]:q.fx.speeds._default;if(null==r.queue||!0===r.queue)r.queue="fx";return r.old=r.complete,r.complete=function(){q.isFunction(r.old)&&r.old.call(this);r.queue&&q.dequeue(this,r.queue)},r};q.easing={linear:function(j){return j},swing:function(j){return 0.5-Math.cos(j*Math.PI)/2}};q.timers=[];q.fx=T.prototype.init;q.fx.tick=function(){for(var j,l=q.timers,
m=0;m<l.length;m++)j=l[m],!j()&&l[m]===j&&l.splice(m--,1);l.length||q.fx.stop()};q.fx.timer=function(j){j()&&q.timers.push(j)&&!cb&&(cb=setInterval(q.fx.tick,q.fx.interval))};q.fx.interval=13;q.fx.stop=function(){clearInterval(cb);cb=null};q.fx.speeds={slow:600,fast:200,_default:400};q.fx.step={};q.expr&&q.expr.filters&&(q.expr.filters.animated=function(j){return q.grep(q.timers,function(l){return j===l.elem}).length});var xc=/^(?:body|html)$/i;q.fn.offset=function(j){if(arguments.length)return j===
l?this:this.each(function(l){q.offset.setOffset(this,j,l)});var m,r,n,p,u,t,s,x={top:0,left:0},y=this[0],z=y&&y.ownerDocument;if(z)return(r=z.body)===y?q.offset.bodyOffset(y):(m=z.documentElement,q.contains(m,y)?("undefined"!=typeof y.getBoundingClientRect&&(x=y.getBoundingClientRect()),n=Ib(z),p=m.clientTop||r.clientTop||0,u=m.clientLeft||r.clientLeft||0,t=n.pageYOffset||m.scrollTop,s=n.pageXOffset||m.scrollLeft,{top:x.top+t-p,left:x.left+s-u}):x)};q.offset={bodyOffset:function(j){var l=j.offsetTop,
m=j.offsetLeft;return q.support.doesNotIncludeMarginInBodyOffset&&(l+=parseFloat(q.css(j,"marginTop"))||0,m+=parseFloat(q.css(j,"marginLeft"))||0),{top:l,left:m}},setOffset:function(j,l,m){var r=q.css(j,"position");"static"===r&&(j.style.position="relative");var n=q(j),p=n.offset(),u=q.css(j,"top"),t=q.css(j,"left"),s={},x={},y,z;("absolute"===r||"fixed"===r)&&-1<q.inArray("auto",[u,t])?(x=n.position(),y=x.top,z=x.left):(y=parseFloat(u)||0,z=parseFloat(t)||0);q.isFunction(l)&&(l=l.call(j,m,p));null!=
l.top&&(s.top=l.top-p.top+y);null!=l.left&&(s.left=l.left-p.left+z);"using"in l?l.using.call(j,s):n.css(s)}};q.fn.extend({position:function(){if(this[0]){var j=this[0],l=this.offsetParent(),m=this.offset(),r=xc.test(l[0].nodeName)?{top:0,left:0}:l.offset();return m.top-=parseFloat(q.css(j,"marginTop"))||0,m.left-=parseFloat(q.css(j,"marginLeft"))||0,r.top+=parseFloat(q.css(l[0],"borderTopWidth"))||0,r.left+=parseFloat(q.css(l[0],"borderLeftWidth"))||0,{top:m.top-r.top,left:m.left-r.left}}},offsetParent:function(){return this.map(function(){for(var j=
this.offsetParent||E.body;j&&!xc.test(j.nodeName)&&"static"===q.css(j,"position");)j=j.offsetParent;return j||E.body})}});q.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(j,m){var r=/Y/.test(m);q.fn[j]=function(n){return q.access(this,function(j,n,p){var u=Ib(j);if(p===l)return u?m in u?u[m]:u.document.documentElement[n]:j[n];u?u.scrollTo(r?q(u).scrollLeft():p,r?p:q(u).scrollTop()):j[n]=p},j,n,arguments.length,null)}});q.each({Height:"height",Width:"width"},function(j,m){q.each({padding:"inner"+
j,content:m,"":"outer"+j},function(r,n){q.fn[n]=function(n,p){var u=arguments.length&&(r||"boolean"!=typeof n),t=r||(!0===n||!0===p?"margin":"border");return q.access(this,function(m,r,n){var p;return q.isWindow(m)?m.document.documentElement["client"+j]:9===m.nodeType?(p=m.documentElement,Math.max(m.body["scroll"+j],p["scroll"+j],m.body["offset"+j],p["offset"+j],p["client"+j])):n===l?q.css(m,r,n,t):q.style(m,r,n,t)},m,u?n:l,u,null)}})});j.jQuery=j.$=q;"function"==typeof define&&define.amd&&define.amd.jQuery&&
define("jquery",[],function(){return q})})(window);function getInternetExplorerVersion(){var j=-1;"Microsoft Internet Explorer"==navigator.appName&&null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(j=parseFloat(RegExp.$1));return j}var ie=getInternetExplorerVersion();function getQueryVariable(j){for(var l=window.location.search.substring(1).split("&"),m=0;m<l.length;m++){var n=l[m].split("=");if(decodeURIComponent(n[0])==j)return decodeURIComponent(n[1])}};this.jukebox={};
jukebox.Player=function(j,l){this.id=++jukebox.__jukeboxId;this.origin=l||null;this.settings={};for(var m in this.defaults)this.settings[m]=this.defaults[m];if("[object Object]"===Object.prototype.toString.call(j))for(var n in j)this.settings[n]=j[n];"[object Function]"===Object.prototype.toString.call(jukebox.Manager)&&(jukebox.Manager=new jukebox.Manager);this.resource=this.isPlaying=null;this.resource="[object Object]"===Object.prototype.toString.call(jukebox.Manager)?jukebox.Manager.getPlayableResource(this.settings.resources):this.settings.resources[0]||
null;if(null===this.resource)throw"Your browser can't playback the given resources - or you have missed to include jukebox.Manager";this.__init();return this};jukebox.__jukeboxId=0;
jukebox.Player.prototype={defaults:{resources:[],autoplay:!1,spritemap:{},flashMediaElement:"./swf/FlashMediaElement.swf",timeout:1E3},__addToManager:function(){!0!==this.__wasAddedToManager&&(jukebox.Manager.add(this),this.__wasAddedToManager=!0)},__init:function(){var j=this,l=this.settings,m={},n;jukebox.Manager&&void 0!==jukebox.Manager.features&&(m=jukebox.Manager.features);if(!0===m.html5audio){this.context=new Audio;this.context.src=this.resource;if(null===this.origin){var p=function(l){j.__addToManager(l)};
this.context.addEventListener("canplaythrough",p,!0);window.setTimeout(function(){j.context.removeEventListener("canplaythrough",p,!0);p("timeout")},l.timeout)}this.context.autobuffer=!0;this.context.preload=!0;for(n in this.HTML5API)this[n]=this.HTML5API[n];1<m.channels?!0===l.autoplay?this.context.autoplay=!0:void 0!==l.spritemap[l.autoplay]&&this.play(l.autoplay):1===m.channels&&void 0!==l.spritemap[l.autoplay]&&(this.backgroundMusic=l.spritemap[l.autoplay],this.backgroundMusic.started=Date.now?
Date.now():+new Date,this.play(l.autoplay));1==m.channels&&!0!==l.canPlayBackground&&(window.addEventListener("pagehide",function(){null!==j.isPlaying&&(j.pause(),j.__wasAutoPaused=!0)}),window.addEventListener("pageshow",function(){j.__wasAutoPaused&&(j.resume(),delete j._wasAutoPaused)}))}else if(!0===m.flashaudio){for(n in this.FLASHAPI)this[n]=this.FLASHAPI[n];m=["id=jukebox-flashstream-"+this.id,"autoplay="+l.autoplay,"file="+window.encodeURIComponent(this.resource)];this.__initFlashContext(m);
!0===l.autoplay?this.play(0):l.spritemap[l.autoplay]&&this.play(l.autoplay)}else throw"Your Browser does not support Flash Audio or HTML5 Audio.";},__initFlashContext:function(j){var l,m=this.settings.flashMediaElement,n,p={flashvars:j.join("&"),quality:"high",bgcolor:"#000000",wmode:"transparent",allowscriptaccess:"always",allowfullscreen:"true"};if(navigator.userAgent.match(/MSIE/)){l=document.createElement("div");document.getElementsByTagName("body")[0].appendChild(l);var s=document.createElement("object");
s.id="jukebox-flashstream-"+this.id;s.setAttribute("type","application/x-shockwave-flash");s.setAttribute("classid","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000");s.setAttribute("width","0");s.setAttribute("height","0");p.movie=m+"?x="+(Date.now?Date.now():+new Date);p.flashvars=j.join("&amp;");for(n in p)j=document.createElement("param"),j.setAttribute("name",n),j.setAttribute("value",p[n]),s.appendChild(j);l.outerHTML=s.outerHTML;this.context=document.getElementById("jukebox-flashstream-"+this.id)}else{l=
document.createElement("embed");l.id="jukebox-flashstream-"+this.id;l.setAttribute("type","application/x-shockwave-flash");l.setAttribute("width","100");l.setAttribute("height","100");p.play=!1;p.loop=!1;p.src=m+"?x="+(Date.now?Date.now():+new Date);for(n in p)l.setAttribute(n,p[n]);document.getElementsByTagName("body")[0].appendChild(l);this.context=l}},backgroundHackForiOS:function(){if(void 0!==this.backgroundMusic){var j=Date.now?Date.now():+new Date;void 0===this.backgroundMusic.started?(this.backgroundMusic.started=
j,this.setCurrentTime(this.backgroundMusic.start)):(this.backgroundMusic.lastPointer=(j-this.backgroundMusic.started)/1E3%(this.backgroundMusic.end-this.backgroundMusic.start)+this.backgroundMusic.start,this.play(this.backgroundMusic.lastPointer))}},play:function(j,l){if(null!==this.isPlaying&&!0!==l)void 0!==jukebox.Manager&&jukebox.Manager.addToQueue(j,this.id);else{var m=this.settings.spritemap,n;if(void 0!==m[j])n=m[j].start;else if("number"===typeof j){n=j;for(var p in m)if(n>=m[p].start&&n<=
m[p].end){j=p;break}}void 0!==n&&"[object Object]"===Object.prototype.toString.call(m[j])&&(this.isPlaying=this.settings.spritemap[j],this.context.play&&this.context.play(),this.wasReady=this.setCurrentTime(n))}},stop:function(){this.__lastPosition=0;this.isPlaying=null;this.backgroundMusic?this.backgroundHackForiOS():this.context.pause();return!0},pause:function(){this.isPlaying=null;this.__lastPosition=this.getCurrentTime();this.context.pause();return this.__lastPosition},resume:function(j){j="number"===
typeof j?j:this.__lastPosition;if(null!==j)return this.play(j),this.__lastPosition=null,!0;this.context.play();return!1},HTML5API:{getVolume:function(){return this.context.volume||1},setVolume:function(j){this.context.volume=j;return 1E-4>Math.abs(this.context.volume-j)?!0:!1},getCurrentTime:function(){return this.context.currentTime||0},setCurrentTime:function(j){try{return this.context.currentTime=j,!0}catch(l){return!1}}},FLASHAPI:{getVolume:function(){return this.context&&"function"===typeof this.context.getVolume?
this.context.getVolume():1},setVolume:function(j){return this.context&&"function"===typeof this.context.setVolume?(this.context.setVolume(j),!0):!1},getCurrentTime:function(){return this.context&&"function"===typeof this.context.getCurrentTime?this.context.getCurrentTime():0},setCurrentTime:function(j){return this.context&&"function"===typeof this.context.setCurrentTime?this.context.setCurrentTime(j):!1}}};
if(void 0===this.jukebox)throw"jukebox.Manager requires jukebox.Player (Player.js) to run properly.";
jukebox.Manager=function(j){this.features={};this.codecs={};this.__players={};this.__playersLength=0;this.__clones={};this.__queue=[];this.settings={};for(var l in this.defaults)this.settings[l]=this.defaults[l];if("[object Object]"===Object.prototype.toString.call(j))for(var m in j)this.settings[m]=j[m];this.__detectFeatures();jukebox.Manager.__initialized=!1===this.settings.useGameLoop?window.setInterval(function(){jukebox.Manager.loop()},20):!0};
jukebox.Manager.prototype={defaults:{useFlash:!1,useGameLoop:!1},__detectFeatures:function(){var j=window.Audio&&new Audio;if(j&&j.canPlayType&&!1===this.settings.useFlash){for(var l=[{e:"3gp",m:["audio/3gpp","audio/amr"]},{e:"aac",m:["audio/aac","audio/aacp"]},{e:"amr",m:["audio/amr","audio/3gpp"]},{e:"caf",m:["audio/IMA-ADPCM","audio/x-adpcm",'audio/x-aiff; codecs="IMA-ADPCM, ADPCM"']},{e:"m4a",m:'audio/mp4{audio/mp4; codecs="mp4a.40.2,avc1.42E01E"{audio/mpeg4{audio/mpeg4-generic{audio/mp4a-latm{audio/MP4A-LATM{audio/x-m4a'.split("{")},
{e:"mp3",m:["audio/mp3","audio/mpeg",'audio/mpeg; codecs="mp3"',"audio/MPA","audio/mpa-robust"]},{e:"mpga",m:["audio/MPA","audio/mpa-robust","audio/mpeg","video/mpeg"]},{e:"mp4",m:["audio/mp4","video/mp4"]},{e:"ogg",m:["application/ogg","audio/ogg",'audio/ogg; codecs="theora, vorbis"',"video/ogg",'video/ogg; codecs="theora, vorbis"']},{e:"wav",m:["audio/wave","audio/wav",'audio/wav; codecs="1"',"audio/x-wav","audio/x-pn-wav"]},{e:"webm",m:["audio/webm",'audio/webm; codecs="vorbis"',"video/webm"]}],
m,n,p=0,s=l.length;p<s;p++)if(n=l[p].e,l[p].m.length&&"object"===typeof l[p].m)for(var A=0,v=l[p].m.length;A<v;A++)if(m=l[p].m[A],""!==j.canPlayType(m)){this.codecs[n]=m;break}else this.codecs[n]||(this.codecs[n]=!1);this.features.html5audio=!(!this.codecs.mp3&&!this.codecs.ogg&&!this.codecs.webm&&!this.codecs.wav);this.features.channels=8;j.volume=0.1337;this.features.volume=!!(1E-4>Math.abs(j.volume-0.1337));navigator.userAgent.match(/iPhone|iPod|iPad/i)&&(this.features.channels=1)}this.features.flashaudio=
!!navigator.mimeTypes["application/x-shockwave-flash"]||!!navigator.plugins["Shockwave Flash"]||!1;if(window.ActiveXObject)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash.10"),this.features.flashaudio=!0}catch(r){}!0===this.settings.useFlash&&(this.features.flashaudio=!0);!0===this.features.flashaudio&&!this.features.html5audio&&(this.codecs.mp3="audio/mp3",this.codecs.mpga="audio/mpeg",this.codecs.mp4="audio/mp4",this.codecs.m4a="audio/mp4",this.codecs["3gp"]="audio/3gpp",this.codecs.amr="audio/amr",
this.features.volume=!0,this.features.channels=1)},__getPlayerById:function(j){return this.__players&&void 0!==this.__players[j]?this.__players[j]:null},__getClone:function(j,l){for(var m in this.__clones){var n=this.__clones[m];if(null===n.isPlaying&&n.origin===j)return n}if("[object Object]"===Object.prototype.toString.call(l)){m={};for(var p in l)m[p]=l[p];m.autoplay=!1;p=new jukebox.Player(m,j);p.isClone=!0;p.wasReady=!1;return this.__clones[p.id]=p}return null},loop:function(){if(0!==this.__playersLength)if(this.__queue.length&&
this.__playersLength<this.features.channels){var j=this.__queue[0],l=this.__getPlayerById(j.origin);if(null!==l){var m=this.__getClone(j.origin,l.settings);null!==m&&(!0===this.features.volume&&(l=this.__players[j.origin])&&m.setVolume(l.getVolume()),this.add(m),m.play(j.pointer,!0))}this.__queue.splice(0,1)}else for(m in this.__queue.length&&1===this.features.channels&&(j=this.__queue[0],l=this.__getPlayerById(j.origin),null!==l&&l.play(j.pointer,!0),this.__queue.splice(0,1)),this.__players)j=this.__players[m],
l=j.getCurrentTime()||0,j.isPlaying&&!1===j.wasReady?j.wasReady=j.setCurrentTime(j.isPlaying.start):j.isPlaying&&!0===j.wasReady?l>j.isPlaying.end&&(!0===j.isPlaying.loop?j.play(j.isPlaying.start,!0):j.stop()):j.isClone&&null===j.isPlaying?this.remove(j):void 0!==j.backgroundMusic&&null===j.isPlaying&&l>j.backgroundMusic.end&&j.backgroundHackForiOS()},getPlayableResource:function(j){"[object Array]"!==Object.prototype.toString.call(j)&&(j=[j]);for(var l=0,m=j.length;l<m;l++){var n=j[l],p=n.match(/\.([^\.]*)$/)[1];
if(p&&this.codecs[p])return n}return null},add:function(j){return j instanceof jukebox.Player&&void 0===this.__players[j.id]?(this.__playersLength++,this.__players[j.id]=j,!0):!1},remove:function(j){return j instanceof jukebox.Player&&void 0!==this.__players[j.id]?(this.__playersLength--,delete this.__players[j.id],!0):!1},addToQueue:function(j,l){return("string"===typeof j||"number"===typeof j)&&void 0!==this.__players[l]?(this.__queue.push({pointer:j,origin:l}),!0):!1}};(function(){var j=function(){this.init()};j.prototype={init:function(){var j=this||l;j._counter=1E3;j._html5AudioPool=[];j.html5PoolSize=10;j._codecs={};j._howls=[];j._muted=!1;j._volume=1;j._canPlayEvent="canplaythrough";j._navigator="undefined"!==typeof window&&window.navigator?window.navigator:null;j.masterGain=null;j.noAudio=!1;j.usingWebAudio=!0;j.autoSuspend=!1;j.ctx=null;j.autoUnlock=!0;j._setup();return j},volume:function(j){var m=this||l;j=parseFloat(j);m.ctx||v();if("undefined"!==typeof j&&
0<=j&&1>=j){m._volume=j;if(m._muted)return m;m.usingWebAudio&&m.masterGain.gain.setValueAtTime(j,l.ctx.currentTime);for(var n=0;n<m._howls.length;n++)if(!m._howls[n]._webAudio)for(var p=m._howls[n]._getSoundIds(),s=0;s<p.length;s++){var z=m._howls[n]._soundById(p[s]);z&&z._node&&(z._node.volume=z._volume*j)}return m}return m._volume},mute:function(j){var m=this||l;m.ctx||v();m._muted=j;m.usingWebAudio&&m.masterGain.gain.setValueAtTime(j?0:m._volume,l.ctx.currentTime);for(var n=0;n<m._howls.length;n++)if(!m._howls[n]._webAudio)for(var p=
m._howls[n]._getSoundIds(),s=0;s<p.length;s++){var z=m._howls[n]._soundById(p[s]);z&&z._node&&(z._node.muted=j?!0:z._muted)}return m},stop:function(){for(var j=this||l,m=0;m<j._howls.length;m++)j._howls[m].stop();return j},unload:function(){for(var j=this||l,m=j._howls.length-1;0<=m;m--)j._howls[m].unload();j.usingWebAudio&&(j.ctx&&"undefined"!==typeof j.ctx.close)&&(j.ctx.close(),j.ctx=null,v());return j},codecs:function(j){return(this||l)._codecs[j.replace(/^x-/,"")]},_setup:function(){var j=this||
l;j.state=j.ctx?j.ctx.state||"suspended":"suspended";j._autoSuspend();if(!j.usingWebAudio)if("undefined"!==typeof Audio)try{var m=new Audio;"undefined"===typeof m.oncanplaythrough&&(j._canPlayEvent="canplay")}catch(n){j.noAudio=!0}else j.noAudio=!0;try{m=new Audio,m.muted&&(j.noAudio=!0)}catch(p){}j.noAudio||j._setupCodecs();return j},_setupCodecs:function(){var j=this||l,m=null;try{m="undefined"!==typeof Audio?new Audio:null}catch(n){return j}if(!m||"function"!==typeof m.canPlayType)return j;var p=
m.canPlayType("audio/mpeg;").replace(/^no$/,""),s=j._navigator&&j._navigator.userAgent.match(/OPR\/([0-6].)/g),s=s&&33>parseInt(s[0].split("/")[1],10);j._codecs={mp3:!(s||!p&&!m.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!p,opus:!!m.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!m.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!m.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!m.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),
aac:!!m.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!m.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(m.canPlayType("audio/x-m4a;")||m.canPlayType("audio/m4a;")||m.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(m.canPlayType("audio/x-m4b;")||m.canPlayType("audio/m4b;")||m.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(m.canPlayType("audio/x-mp4;")||m.canPlayType("audio/mp4;")||m.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!m.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,
""),webm:!!m.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!m.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(m.canPlayType("audio/x-flac;")||m.canPlayType("audio/flac;")).replace(/^no$/,"")};return j},_unlockAudio:function(){var j=this||l;if(!j._audioUnlocked&&j.ctx){j._audioUnlocked=!1;j.autoUnlock=!1;!j._mobileUnloaded&&44100!==j.ctx.sampleRate&&(j._mobileUnloaded=!0,j.unload());j._scratchBuffer=j.ctx.createBuffer(1,1,22050);var m=function(){for(;j._html5AudioPool.length<
j.html5PoolSize;)try{var l=new Audio;l._unlocked=!0;j._releaseHtml5Audio(l)}catch(n){j.noAudio=!0;break}for(l=0;l<j._howls.length;l++)if(!j._howls[l]._webAudio)for(var p=j._howls[l]._getSoundIds(),s=0;s<p.length;s++){var v=j._howls[l]._soundById(p[s]);v&&(v._node&&!v._node._unlocked)&&(v._node._unlocked=!0,v._node.load())}j._autoResume();var A=j.ctx.createBufferSource();A.buffer=j._scratchBuffer;A.connect(j.ctx.destination);"undefined"===typeof A.start?A.noteOn(0):A.start(0);"function"===typeof j.ctx.resume&&
j.ctx.resume();A.onended=function(){A.disconnect(0);j._audioUnlocked=!0;document.removeEventListener("touchstart",m,!0);document.removeEventListener("touchend",m,!0);document.removeEventListener("click",m,!0);for(var l=0;l<j._howls.length;l++)j._howls[l]._emit("unlock")}};document.addEventListener("touchstart",m,!0);document.addEventListener("touchend",m,!0);document.addEventListener("click",m,!0);return j}},_obtainHtml5Audio:function(){var j=this||l;if(j._html5AudioPool.length)return j._html5AudioPool.pop();
(j=(new Audio).play())&&("undefined"!==typeof Promise&&(j instanceof Promise||"function"===typeof j.then))&&j.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")});return new Audio},_releaseHtml5Audio:function(j){var m=this||l;j._unlocked&&m._html5AudioPool.push(j);return m},_autoSuspend:function(){var j=this;if(j.autoSuspend&&j.ctx&&"undefined"!==typeof j.ctx.suspend&&l.usingWebAudio){for(var m=0;m<j._howls.length;m++)if(j._howls[m]._webAudio)for(var n=
0;n<j._howls[m]._sounds.length;n++)if(!j._howls[m]._sounds[n]._paused)return j;j._suspendTimer&&clearTimeout(j._suspendTimer);j._suspendTimer=setTimeout(function(){if(j.autoSuspend){j._suspendTimer=null;j.state="suspending";var l=function(){j.state="suspended";j._resumeAfterSuspend&&(delete j._resumeAfterSuspend,j._autoResume())};j.ctx.suspend().then(l,l)}},3E4);return j}},_autoResume:function(){var j=this;if(j.ctx&&"undefined"!==typeof j.ctx.resume&&l.usingWebAudio)return"running"===j.state&&"interrupted"!==
j.ctx.state&&j._suspendTimer?(clearTimeout(j._suspendTimer),j._suspendTimer=null):"suspended"===j.state||"running"===j.state&&"interrupted"===j.ctx.state?(j.ctx.resume().then(function(){j.state="running";for(var l=0;l<j._howls.length;l++)j._howls[l]._emit("resume")}),j._suspendTimer&&(clearTimeout(j._suspendTimer),j._suspendTimer=null)):"suspending"===j.state&&(j._resumeAfterSuspend=!0),j}};var l=new j,m=function(j){!j.src||0===j.src.length?console.error("An array of source files must be passed with any new Howl."):
this.init(j)};m.prototype={init:function(j){var m=this;l.ctx||v();m._autoplay=j.autoplay||!1;m._format="string"!==typeof j.format?j.format:[j.format];m._html5=j.html5||!1;m._muted=j.mute||!1;m._loop=j.loop||!1;m._pool=j.pool||5;m._preload="boolean"===typeof j.preload||"metadata"===j.preload?j.preload:!0;m._rate=j.rate||1;m._sprite=j.sprite||{};m._src="string"!==typeof j.src?j.src:[j.src];m._volume=void 0!==j.volume?j.volume:1;m._xhr={method:j.xhr&&j.xhr.method?j.xhr.method:"GET",headers:j.xhr&&j.xhr.headers?
j.xhr.headers:null,withCredentials:j.xhr&&j.xhr.withCredentials?j.xhr.withCredentials:!1};m._duration=0;m._state="unloaded";m._sounds=[];m._endTimers={};m._queue=[];m._playLock=!1;m._onend=j.onend?[{fn:j.onend}]:[];m._onfade=j.onfade?[{fn:j.onfade}]:[];m._onload=j.onload?[{fn:j.onload}]:[];m._onloaderror=j.onloaderror?[{fn:j.onloaderror}]:[];m._onplayerror=j.onplayerror?[{fn:j.onplayerror}]:[];m._onpause=j.onpause?[{fn:j.onpause}]:[];m._onplay=j.onplay?[{fn:j.onplay}]:[];m._onstop=j.onstop?[{fn:j.onstop}]:
[];m._onmute=j.onmute?[{fn:j.onmute}]:[];m._onvolume=j.onvolume?[{fn:j.onvolume}]:[];m._onrate=j.onrate?[{fn:j.onrate}]:[];m._onseek=j.onseek?[{fn:j.onseek}]:[];m._onunlock=j.onunlock?[{fn:j.onunlock}]:[];m._onresume=[];m._webAudio=l.usingWebAudio&&!m._html5;"undefined"!==typeof l.ctx&&(l.ctx&&l.autoUnlock)&&l._unlockAudio();l._howls.push(m);m._autoplay&&m._queue.push({event:"play",action:function(){m.play()}});m._preload&&"none"!==m._preload&&m.load();return m},load:function(){var j=null;if(l.noAudio)this._emit("loaderror",
null,"No audio support.");else{"string"===typeof this._src&&(this._src=[this._src]);for(var m=0;m<this._src.length;m++){var t,x;if(this._format&&this._format[m])t=this._format[m];else{x=this._src[m];if("string"!==typeof x){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(t=/^data:audio\/([^;,]+);/i.exec(x))||(t=/\.([^.]+)$/.exec(x.split("?",1)[0]));t&&(t=t[1].toLowerCase())}t||console.warn('No file extension was found. Consider using the "format" property or specify an extension.');
if(t&&l.codecs(t)){j=this._src[m];break}}if(j){this._src=j;this._state="loading";"https:"===window.location.protocol&&"http:"===j.slice(0,5)&&(this._html5=!0,this._webAudio=!1);new n(this);if(this._webAudio){var y=this,z=y._src;if(p[z])y._duration=p[z].duration,A(y);else if(/^data:[^;]+;base64,/.test(z)){j=atob(z.split(",")[1]);m=new Uint8Array(j.length);for(t=0;t<j.length;++t)m[t]=j.charCodeAt(t);s(m.buffer,y)}else{var v=new XMLHttpRequest;v.open(y._xhr.method,z,!0);v.withCredentials=y._xhr.withCredentials;
v.responseType="arraybuffer";y._xhr.headers&&Object.keys(y._xhr.headers).forEach(function(j){v.setRequestHeader(j,y._xhr.headers[j])});v.onload=function(){var j=(v.status+"")[0];"0"!==j&&"2"!==j&&"3"!==j?y._emit("loaderror",null,"Failed loading audio file with status: "+v.status+"."):s(v.response,y)};v.onerror=function(){y._webAudio&&(y._html5=!0,y._webAudio=!1,y._sounds=[],delete p[z],y.load())};try{v.send()}catch(H){v.onerror()}}}return this}this._emit("loaderror",null,"No codec support for selected audio sources.")}},
play:function(j,m){var n=this,p=null;if("number"===typeof j)p=j,j=null;else{if("string"===typeof j&&"loaded"===n._state&&!n._sprite[j])return null;if("undefined"===typeof j&&(j="__default",!n._playLock)){for(var s=0,z=0;z<n._sounds.length;z++)n._sounds[z]._paused&&!n._sounds[z]._ended&&(s++,p=n._sounds[z]._id);1===s?j=null:p=null}}var v=p?n._soundById(p):n._inactiveSound();if(!v)return null;p&&!j&&(j=v._sprite||"__default");if("loaded"!==n._state){v._sprite=j;v._ended=!1;var A=v._id;n._queue.push({event:"play",
action:function(){n.play(A)}});return A}if(p&&!v._paused)return m||n._loadQueue("play"),v._id;n._webAudio&&l._autoResume();var M=Math.max(0,0<v._seek?v._seek:n._sprite[j][0]/1E3),J=Math.max(0,(n._sprite[j][0]+n._sprite[j][1])/1E3-M),ra=1E3*J/Math.abs(v._rate),Fa=n._sprite[j][0]/1E3,ya=(n._sprite[j][0]+n._sprite[j][1])/1E3;v._sprite=j;v._ended=!1;var ja=function(){v._paused=!1;v._seek=M;v._start=Fa;v._stop=ya;v._loop=!(!v._loop&&!n._sprite[j][2])};if(M>=ya)n._ended(v);else{var I=v._node;if(n._webAudio)p=
function(){n._playLock=!1;ja();n._refreshBuffer(v);I.gain.setValueAtTime(v._muted||n._muted?0:v._volume,l.ctx.currentTime);v._playStart=l.ctx.currentTime;"undefined"===typeof I.bufferSource.start?v._loop?I.bufferSource.noteGrainOn(0,M,86400):I.bufferSource.noteGrainOn(0,M,J):v._loop?I.bufferSource.start(0,M,86400):I.bufferSource.start(0,M,J);Infinity!==ra&&(n._endTimers[v._id]=setTimeout(n._ended.bind(n,v),ra));m||setTimeout(function(){n._emit("play",v._id);n._loadQueue()},0)},"running"===l.state&&
"interrupted"!==l.ctx.state?p():(n._playLock=!0,n.once("resume",p),n._clearTimer(v._id));else{var la=function(){I.currentTime=M;I.muted=v._muted||n._muted||l._muted||I.muted;I.volume=v._volume*l.volume();I.playbackRate=v._rate;try{var p=I.play();p&&"undefined"!==typeof Promise&&(p instanceof Promise||"function"===typeof p.then)?(n._playLock=!0,ja(),p.then(function(){n._playLock=!1;I._unlocked=!0;m||(n._emit("play",v._id),n._loadQueue())}).catch(function(){n._playLock=!1;n._emit("playerror",v._id,
"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");v._ended=!0;v._paused=!0})):m||(n._playLock=!1,ja(),n._emit("play",v._id),n._loadQueue());I.playbackRate=v._rate;I.paused?n._emit("playerror",v._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."):"__default"!==j||v._loop?n._endTimers[v._id]=setTimeout(n._ended.bind(n,
v),ra):(n._endTimers[v._id]=function(){n._ended(v);I.removeEventListener("ended",n._endTimers[v._id],!1)},I.addEventListener("ended",n._endTimers[v._id],!1))}catch(s){n._emit("playerror",v._id,s)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===I.src&&(I.src=n._src,I.load());p=window&&window.ejecta||!I.readyState&&l._navigator.isCocoonJS;if(3<=I.readyState||p)la();else{n._playLock=!0;var za=function(){la();I.removeEventListener(l._canPlayEvent,za,!1)};I.addEventListener(l._canPlayEvent,
za,!1);n._clearTimer(v._id)}}return v._id}},pause:function(j,l){var m=this;if("loaded"!==m._state||m._playLock)return m._queue.push({event:"pause",action:function(){m.pause(j)}}),m;for(var n=m._getSoundIds(j),p=0;p<n.length;p++){m._clearTimer(n[p]);var s=m._soundById(n[p]);if(s&&!s._paused&&(s._seek=m.seek(n[p]),s._rateSeek=0,s._paused=!0,m._stopFade(n[p]),s._node))if(m._webAudio){if(!s._node.bufferSource)continue;"undefined"===typeof s._node.bufferSource.stop?s._node.bufferSource.noteOff(0):s._node.bufferSource.stop(0);
m._cleanBuffer(s._node)}else(!isNaN(s._node.duration)||Infinity===s._node.duration)&&s._node.pause();l||m._emit("pause",s?s._id:null)}return m},stop:function(j,l){var m=this;if("loaded"!==m._state||m._playLock)return m._queue.push({event:"stop",action:function(){m.stop(j)}}),m;for(var n=m._getSoundIds(j),p=0;p<n.length;p++){m._clearTimer(n[p]);var s=m._soundById(n[p]);if(s){s._seek=s._start||0;s._rateSeek=0;s._paused=!0;s._ended=!0;m._stopFade(n[p]);if(s._node)if(m._webAudio)s._node.bufferSource&&
("undefined"===typeof s._node.bufferSource.stop?s._node.bufferSource.noteOff(0):s._node.bufferSource.stop(0),m._cleanBuffer(s._node));else if(!isNaN(s._node.duration)||Infinity===s._node.duration)s._node.currentTime=s._start||0,s._node.pause(),Infinity===s._node.duration&&m._clearSound(s._node);l||m._emit("stop",s._id)}}return m},mute:function(j,m){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(j,m)}}),n;if("undefined"===typeof m)if("boolean"===
typeof j)n._muted=j;else return n._muted;for(var p=n._getSoundIds(m),s=0;s<p.length;s++){var v=n._soundById(p[s]);v&&(v._muted=j,v._interval&&n._stopFade(v._id),n._webAudio&&v._node?v._node.gain.setValueAtTime(j?0:v._volume,l.ctx.currentTime):v._node&&(v._node.muted=l._muted?!0:j),n._emit("mute",v._id))}return n},volume:function(){var j=this,m=arguments,n,p;if(0===m.length)return j._volume;1===m.length||2===m.length&&"undefined"===typeof m[1]?0<=j._getSoundIds().indexOf(m[0])?p=parseInt(m[0],10):
n=parseFloat(m[0]):2<=m.length&&(n=parseFloat(m[0]),p=parseInt(m[1],10));var s;if("undefined"!==typeof n&&0<=n&&1>=n){if("loaded"!==j._state||j._playLock)return j._queue.push({event:"volume",action:function(){j.volume.apply(j,m)}}),j;"undefined"===typeof p&&(j._volume=n);p=j._getSoundIds(p);for(var v=0;v<p.length;v++)if(s=j._soundById(p[v]))s._volume=n,m[2]||j._stopFade(p[v]),j._webAudio&&s._node&&!s._muted?s._node.gain.setValueAtTime(n,l.ctx.currentTime):s._node&&!s._muted&&(s._node.volume=n*l.volume()),
j._emit("volume",s._id)}else return(s=p?j._soundById(p):j._sounds[0])?s._volume:0;return j},fade:function(j,m,n,p){var s=this;if("loaded"!==s._state||s._playLock)return s._queue.push({event:"fade",action:function(){s.fade(j,m,n,p)}}),s;j=Math.min(Math.max(0,parseFloat(j)),1);m=Math.min(Math.max(0,parseFloat(m)),1);n=parseFloat(n);s.volume(j,p);for(var v=s._getSoundIds(p),A=0;A<v.length;A++){var H=s._soundById(v[A]);if(H){p||s._stopFade(v[A]);if(s._webAudio&&!H._muted){var M=l.ctx.currentTime,J=M+
n/1E3;H._volume=j;H._node.gain.setValueAtTime(j,M);H._node.gain.linearRampToValueAtTime(m,J)}s._startFadeInterval(H,j,m,n,v[A],"undefined"===typeof p)}}return s},_startFadeInterval:function(j,l,m,n,p,s){var v=this,A=l,M=m-l;p=Math.abs(M/0.01);p=Math.max(4,0<p?n/p:n);var J=Date.now();j._fadeTo=m;j._interval=setInterval(function(){var p=(Date.now()-J)/n;J=Date.now();A+=M*p;A=0>M?Math.max(m,A):Math.min(m,A);A=Math.round(100*A)/100;v._webAudio?j._volume=A:v.volume(A,j._id,!0);s&&(v._volume=A);if(m<l&&
A<=m||m>l&&A>=m)clearInterval(j._interval),j._interval=null,j._fadeTo=null,v.volume(m,j._id),v._emit("fade",j._id)},p)},_stopFade:function(j){var m=this._soundById(j);m&&m._interval&&(this._webAudio&&m._node.gain.cancelScheduledValues(l.ctx.currentTime),clearInterval(m._interval),m._interval=null,this.volume(m._fadeTo,j),m._fadeTo=null,this._emit("fade",j));return this},loop:function(){var j=arguments,l,m;if(0===j.length)return this._loop;if(1===j.length)if("boolean"===typeof j[0])this._loop=l=j[0];
else return(j=this._soundById(parseInt(j[0],10)))?j._loop:!1;else 2===j.length&&(l=j[0],m=parseInt(j[1],10));m=this._getSoundIds(m);for(var n=0;n<m.length;n++)if(j=this._soundById(m[n]))if(j._loop=l,this._webAudio&&(j._node&&j._node.bufferSource)&&(j._node.bufferSource.loop=l))j._node.bufferSource.loopStart=j._start||0,j._node.bufferSource.loopEnd=j._stop;return this},rate:function(){var j=this,m=arguments,n,p;0===m.length?p=j._sounds[0]._id:1===m.length?0<=j._getSoundIds().indexOf(m[0])?p=parseInt(m[0],
10):n=parseFloat(m[0]):2===m.length&&(n=parseFloat(m[0]),p=parseInt(m[1],10));var s;if("number"===typeof n){if("loaded"!==j._state||j._playLock)return j._queue.push({event:"rate",action:function(){j.rate.apply(j,m)}}),j;"undefined"===typeof p&&(j._rate=n);p=j._getSoundIds(p);for(var v=0;v<p.length;v++)if(s=j._soundById(p[v])){j.playing(p[v])&&(s._rateSeek=j.seek(p[v]),s._playStart=j._webAudio?l.ctx.currentTime:s._playStart);s._rate=n;j._webAudio&&s._node&&s._node.bufferSource?s._node.bufferSource.playbackRate.setValueAtTime(n,
l.ctx.currentTime):s._node&&(s._node.playbackRate=n);var A=j.seek(p[v]),A=1E3*((j._sprite[s._sprite][0]+j._sprite[s._sprite][1])/1E3-A)/Math.abs(s._rate);if(j._endTimers[p[v]]||!s._paused)j._clearTimer(p[v]),j._endTimers[p[v]]=setTimeout(j._ended.bind(j,s),A);j._emit("rate",s._id)}}else return(s=j._soundById(p))?s._rate:j._rate;return j},seek:function(){var j=this,m=arguments,n,p;0===m.length?p=j._sounds[0]._id:1===m.length?0<=j._getSoundIds().indexOf(m[0])?p=parseInt(m[0],10):j._sounds.length&&(p=
j._sounds[0]._id,n=parseFloat(m[0])):2===m.length&&(n=parseFloat(m[0]),p=parseInt(m[1],10));if("undefined"===typeof p)return j;if("loaded"!==j._state||j._playLock)return j._queue.push({event:"seek",action:function(){j.seek.apply(j,m)}}),j;var s=j._soundById(p);if(s)if("number"===typeof n&&0<=n){var v=j.playing(p);v&&j.pause(p,!0);s._seek=n;s._ended=!1;j._clearTimer(p);!j._webAudio&&(s._node&&!isNaN(s._node.duration))&&(s._node.currentTime=n);var A=function(){j._emit("seek",p);v&&j.play(p,!0)};if(v&&
!j._webAudio){var H=function(){j._playLock?setTimeout(H,0):A()};setTimeout(H,0)}else A()}else return j._webAudio?(n=j.playing(p)?l.ctx.currentTime-s._playStart:0,s._seek+((s._rateSeek?s._rateSeek-s._seek:0)+n*Math.abs(s._rate))):s._node.currentTime;return j},playing:function(j){if("number"===typeof j)return(j=this._soundById(j))?!j._paused:!1;for(j=0;j<this._sounds.length;j++)if(!this._sounds[j]._paused)return!0;return!1},duration:function(j){var l=this._duration;(j=this._soundById(j))&&(l=this._sprite[j._sprite][1]/
1E3);return l},state:function(){return this._state},unload:function(){for(var j=this._sounds,m=0;m<j.length;m++)j[m]._paused||this.stop(j[m]._id),this._webAudio||(this._clearSound(j[m]._node),j[m]._node.removeEventListener("error",j[m]._errorFn,!1),j[m]._node.removeEventListener(l._canPlayEvent,j[m]._loadFn,!1),l._releaseHtml5Audio(j[m]._node)),delete j[m]._node,this._clearTimer(j[m]._id);m=l._howls.indexOf(this);0<=m&&l._howls.splice(m,1);j=!0;for(m=0;m<l._howls.length;m++)if(l._howls[m]._src===
this._src||0<=this._src.indexOf(l._howls[m]._src)){j=!1;break}p&&j&&delete p[this._src];l.noAudio=!1;this._state="unloaded";this._sounds=[];return null},on:function(j,l,m,n){j=this["_on"+j];"function"===typeof l&&j.push(n?{id:m,fn:l,once:n}:{id:m,fn:l});return this},off:function(j,l,m){var n=this["_on"+j],p=0;"number"===typeof l&&(m=l,l=null);if(l||m)for(p=0;p<n.length;p++){if(j=m===n[p].id,l===n[p].fn&&j||!l&&j){n.splice(p,1);break}}else if(j)this["_on"+j]=[];else{l=Object.keys(this);for(p=0;p<l.length;p++)0===
l[p].indexOf("_on")&&Array.isArray(this[l[p]])&&(this[l[p]]=[])}return this},once:function(j,l,m){this.on(j,l,m,1);return this},_emit:function(j,l,m){for(var n=this["_on"+j],p=n.length-1;0<=p;p--)if(!n[p].id||n[p].id===l||"load"===j)setTimeout(function(j){j.call(this,l,m)}.bind(this,n[p].fn),0),n[p].once&&this.off(j,n[p].fn,n[p].id);this._loadQueue(j);return this},_loadQueue:function(j){if(0<this._queue.length){var l=this._queue[0];l.event===j&&(this._queue.shift(),this._loadQueue());j||l.action()}return this},
_ended:function(j){var m=j._sprite;if(!this._webAudio&&j._node&&!j._node.paused&&!j._node.ended&&j._node.currentTime<j._stop)return setTimeout(this._ended.bind(this,j),100),this;m=!(!j._loop&&!this._sprite[m][2]);this._emit("end",j._id);!this._webAudio&&m&&this.stop(j._id,!0).play(j._id);if(this._webAudio&&m){this._emit("play",j._id);j._seek=j._start||0;j._rateSeek=0;j._playStart=l.ctx.currentTime;var n=1E3*(j._stop-j._start)/Math.abs(j._rate);this._endTimers[j._id]=setTimeout(this._ended.bind(this,
j),n)}this._webAudio&&!m&&(j._paused=!0,j._ended=!0,j._seek=j._start||0,j._rateSeek=0,this._clearTimer(j._id),this._cleanBuffer(j._node),l._autoSuspend());!this._webAudio&&!m&&this.stop(j._id,!0);return this},_clearTimer:function(j){if(this._endTimers[j]){if("function"!==typeof this._endTimers[j])clearTimeout(this._endTimers[j]);else{var l=this._soundById(j);l&&l._node&&l._node.removeEventListener("ended",this._endTimers[j],!1)}delete this._endTimers[j]}return this},_soundById:function(j){for(var l=
0;l<this._sounds.length;l++)if(j===this._sounds[l]._id)return this._sounds[l];return null},_inactiveSound:function(){this._drain();for(var j=0;j<this._sounds.length;j++)if(this._sounds[j]._ended)return this._sounds[j].reset();return new n(this)},_drain:function(){var j=this._pool,l=0,m=0;if(!(this._sounds.length<j)){for(m=0;m<this._sounds.length;m++)this._sounds[m]._ended&&l++;for(m=this._sounds.length-1;0<=m&&!(l<=j);m--)this._sounds[m]._ended&&(this._webAudio&&this._sounds[m]._node&&this._sounds[m]._node.disconnect(0),
this._sounds.splice(m,1),l--)}},_getSoundIds:function(j){if("undefined"===typeof j){j=[];for(var l=0;l<this._sounds.length;l++)j.push(this._sounds[l]._id);return j}return[j]},_refreshBuffer:function(j){j._node.bufferSource=l.ctx.createBufferSource();j._node.bufferSource.buffer=p[this._src];j._panner?j._node.bufferSource.connect(j._panner):j._node.bufferSource.connect(j._node);if(j._node.bufferSource.loop=j._loop)j._node.bufferSource.loopStart=j._start||0,j._node.bufferSource.loopEnd=j._stop||0;j._node.bufferSource.playbackRate.setValueAtTime(j._rate,
l.ctx.currentTime);return this},_cleanBuffer:function(j){var m=l._navigator&&0<=l._navigator.vendor.indexOf("Apple");if(l._scratchBuffer&&j.bufferSource&&(j.bufferSource.onended=null,j.bufferSource.disconnect(0),m))try{j.bufferSource.buffer=l._scratchBuffer}catch(n){}j.bufferSource=null;return this},_clearSound:function(j){/MSIE |Trident\//.test(l._navigator&&l._navigator.userAgent)||(j.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var n=function(j){this._parent=
j;this.init()};n.prototype={init:function(){var j=this._parent;this._muted=j._muted;this._loop=j._loop;this._volume=j._volume;this._rate=j._rate;this._seek=0;this._ended=this._paused=!0;this._sprite="__default";this._id=++l._counter;j._sounds.push(this);this.create();return this},create:function(){var j=this._parent,m=l._muted||this._muted||this._parent._muted?0:this._volume;j._webAudio?(this._node="undefined"===typeof l.ctx.createGain?l.ctx.createGainNode():l.ctx.createGain(),this._node.gain.setValueAtTime(m,
l.ctx.currentTime),this._node.paused=!0,this._node.connect(l.masterGain)):l.noAudio||(this._node=l._obtainHtml5Audio(),this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(l._canPlayEvent,this._loadFn,!1),this._node.src=j._src,this._node.preload=!0===j._preload?"auto":j._preload,this._node.volume=m*l.volume(),this._node.load());return this},reset:function(){var j=this._parent;this._muted=
j._muted;this._loop=j._loop;this._volume=j._volume;this._rate=j._rate;this._rateSeek=this._seek=0;this._ended=this._paused=!0;this._sprite="__default";this._id=++l._counter;return this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0);this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var j=this._parent;j._duration=Math.ceil(10*this._node.duration)/10;0===Object.keys(j._sprite).length&&(j._sprite={__default:[0,
1E3*j._duration]});"loaded"!==j._state&&(j._state="loaded",j._emit("load"),j._loadQueue());this._node.removeEventListener(l._canPlayEvent,this._loadFn,!1)}};var p={},s=function(j,m){var n=function(){m._emit("loaderror",null,"Decoding audio data failed.")},s=function(j){j&&0<m._sounds.length?(p[m._src]=j,A(m,j)):n()};"undefined"!==typeof Promise&&1===l.ctx.decodeAudioData.length?l.ctx.decodeAudioData(j).then(s).catch(n):l.ctx.decodeAudioData(j,s,n)},A=function(j,l){l&&!j._duration&&(j._duration=l.duration);
0===Object.keys(j._sprite).length&&(j._sprite={__default:[0,1E3*j._duration]});"loaded"!==j._state&&(j._state="loaded",j._emit("load"),j._loadQueue())},v=function(){if(l.usingWebAudio){try{"undefined"!==typeof AudioContext?l.ctx=new AudioContext:"undefined"!==typeof webkitAudioContext?l.ctx=new webkitAudioContext:l.usingWebAudio=!1}catch(j){l.usingWebAudio=!1}l.ctx||(l.usingWebAudio=!1);var m=/iP(hone|od|ad)/.test(l._navigator&&l._navigator.platform),n=l._navigator&&l._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),
n=n?parseInt(n[1],10):null;m&&(n&&9>n)&&(m=/safari/.test(l._navigator&&l._navigator.userAgent.toLowerCase()),l._navigator&&!m&&(l.usingWebAudio=!1));l.usingWebAudio&&(l.masterGain="undefined"===typeof l.ctx.createGain?l.ctx.createGainNode():l.ctx.createGain(),l.masterGain.gain.setValueAtTime(l._muted?0:l._volume,l.ctx.currentTime),l.masterGain.connect(l.ctx.destination));l._setup()}};"function"===typeof define&&define.amd&&define([],function(){return{Howler:l,Howl:m}});"undefined"!==typeof exports&&
(exports.Howler=l,exports.Howl=m);"undefined"!==typeof global?(global.HowlerGlobal=j,global.Howler=l,global.Howl=m,global.Sound=n):"undefined"!==typeof window&&(window.HowlerGlobal=j,window.Howler=l,window.Howl=m,window.Sound=n)})();
(function(){HowlerGlobal.prototype._pos=[0,0,0];HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0];HowlerGlobal.prototype.stereo=function(j){if(!this.ctx||!this.ctx.listener)return this;for(var l=this._howls.length-1;0<=l;l--)this._howls[l].stereo(j);return this};HowlerGlobal.prototype.pos=function(j,l,m){if(!this.ctx||!this.ctx.listener)return this;l="number"!==typeof l?this._pos[1]:l;m="number"!==typeof m?this._pos[2]:m;if("number"===typeof j)this._pos=[j,l,m],"undefined"!==typeof this.ctx.listener.positionX?
(this.ctx.listener.positionX.setTargetAtTime(this._pos[0],Howler.ctx.currentTime,0.1),this.ctx.listener.positionY.setTargetAtTime(this._pos[1],Howler.ctx.currentTime,0.1),this.ctx.listener.positionZ.setTargetAtTime(this._pos[2],Howler.ctx.currentTime,0.1)):this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]);else return this._pos;return this};HowlerGlobal.prototype.orientation=function(j,l,m,n,r,u){if(!this.ctx||!this.ctx.listener)return this;var t=this._orientation;l="number"!==
typeof l?t[1]:l;m="number"!==typeof m?t[2]:m;n="number"!==typeof n?t[3]:n;r="number"!==typeof r?t[4]:r;u="number"!==typeof u?t[5]:u;if("number"===typeof j)this._orientation=[j,l,m,n,r,u],"undefined"!==typeof this.ctx.listener.forwardX?(this.ctx.listener.forwardX.setTargetAtTime(j,Howler.ctx.currentTime,0.1),this.ctx.listener.forwardY.setTargetAtTime(l,Howler.ctx.currentTime,0.1),this.ctx.listener.forwardZ.setTargetAtTime(m,Howler.ctx.currentTime,0.1),this.ctx.listener.upX.setTargetAtTime(n,Howler.ctx.currentTime,
0.1),this.ctx.listener.upY.setTargetAtTime(r,Howler.ctx.currentTime,0.1),this.ctx.listener.upZ.setTargetAtTime(u,Howler.ctx.currentTime,0.1)):this.ctx.listener.setOrientation(j,l,m,n,r,u);else return t;return this};var j=Howl.prototype.init;Howl.prototype.init=function(l){this._orientation=l.orientation||[1,0,0];this._stereo=l.stereo||null;this._pos=l.pos||null;this._pannerAttr={coneInnerAngle:"undefined"!==typeof l.coneInnerAngle?l.coneInnerAngle:360,coneOuterAngle:"undefined"!==typeof l.coneOuterAngle?
l.coneOuterAngle:360,coneOuterGain:"undefined"!==typeof l.coneOuterGain?l.coneOuterGain:0,distanceModel:"undefined"!==typeof l.distanceModel?l.distanceModel:"inverse",maxDistance:"undefined"!==typeof l.maxDistance?l.maxDistance:1E4,panningModel:"undefined"!==typeof l.panningModel?l.panningModel:"HRTF",refDistance:"undefined"!==typeof l.refDistance?l.refDistance:1,rolloffFactor:"undefined"!==typeof l.rolloffFactor?l.rolloffFactor:1};this._onstereo=l.onstereo?[{fn:l.onstereo}]:[];this._onpos=l.onpos?
[{fn:l.onpos}]:[];this._onorientation=l.onorientation?[{fn:l.onorientation}]:[];return j.call(this,l)};Howl.prototype.stereo=function(j,l){var m=this;if(!m._webAudio)return m;if("loaded"!==m._state)return m._queue.push({event:"stereo",action:function(){m.stereo(j,l)}}),m;var v="undefined"===typeof Howler.ctx.createStereoPanner?"spatial":"stereo";if("undefined"===typeof l)if("number"===typeof j)m._stereo=j,m._pos=[j,0,0];else return m._stereo;for(var r=m._getSoundIds(l),u=0;u<r.length;u++){var t=m._soundById(r[u]);
if(t)if("number"===typeof j)t._stereo=j,t._pos=[j,0,0],t._node&&(t._pannerAttr.panningModel="equalpower",(!t._panner||!t._panner.pan)&&n(t,v),"spatial"===v?"undefined"!==typeof t._panner.positionX?(t._panner.positionX.setValueAtTime(j,Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):t._panner.setPosition(j,0,0):t._panner.pan.setValueAtTime(j,Howler.ctx.currentTime)),m._emit("stereo",t._id);else return t._stereo}return m};
Howl.prototype.pos=function(j,l,m,v){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"pos",action:function(){r.pos(j,l,m,v)}}),r;l="number"!==typeof l?0:l;m="number"!==typeof m?-0.5:m;if("undefined"===typeof v)if("number"===typeof j)r._pos=[j,l,m];else return r._pos;for(var u=r._getSoundIds(v),t=0;t<u.length;t++){var x=r._soundById(u[t]);if(x)if("number"===typeof j)x._pos=[j,l,m],x._node&&((!x._panner||x._panner.pan)&&n(x,"spatial"),"undefined"!==typeof x._panner.positionX?
(x._panner.positionX.setValueAtTime(j,Howler.ctx.currentTime),x._panner.positionY.setValueAtTime(l,Howler.ctx.currentTime),x._panner.positionZ.setValueAtTime(m,Howler.ctx.currentTime)):x._panner.setPosition(j,l,m)),r._emit("pos",x._id);else return x._pos}return r};Howl.prototype.orientation=function(j,l,m,v){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"orientation",action:function(){r.orientation(j,l,m,v)}}),r;l="number"!==typeof l?r._orientation[1]:l;m=
"number"!==typeof m?r._orientation[2]:m;if("undefined"===typeof v)if("number"===typeof j)r._orientation=[j,l,m];else return r._orientation;for(var u=r._getSoundIds(v),t=0;t<u.length;t++){var x=r._soundById(u[t]);if(x)if("number"===typeof j)x._orientation=[j,l,m],x._node&&(x._panner||(x._pos||(x._pos=r._pos||[0,0,-0.5]),n(x,"spatial")),"undefined"!==typeof x._panner.orientationX?(x._panner.orientationX.setValueAtTime(j,Howler.ctx.currentTime),x._panner.orientationY.setValueAtTime(l,Howler.ctx.currentTime),
x._panner.orientationZ.setValueAtTime(m,Howler.ctx.currentTime)):x._panner.setOrientation(j,l,m)),r._emit("orientation",x._id);else return x._orientation}return r};Howl.prototype.pannerAttr=function(){var j=arguments,l,m;if(!this._webAudio)return this;if(0===j.length)return this._pannerAttr;if(1===j.length)if("object"===typeof j[0])l=j[0],"undefined"===typeof m&&(l.pannerAttr||(l.pannerAttr={coneInnerAngle:l.coneInnerAngle,coneOuterAngle:l.coneOuterAngle,coneOuterGain:l.coneOuterGain,distanceModel:l.distanceModel,
maxDistance:l.maxDistance,refDistance:l.refDistance,rolloffFactor:l.rolloffFactor,panningModel:l.panningModel}),this._pannerAttr={coneInnerAngle:"undefined"!==typeof l.pannerAttr.coneInnerAngle?l.pannerAttr.coneInnerAngle:this._coneInnerAngle,coneOuterAngle:"undefined"!==typeof l.pannerAttr.coneOuterAngle?l.pannerAttr.coneOuterAngle:this._coneOuterAngle,coneOuterGain:"undefined"!==typeof l.pannerAttr.coneOuterGain?l.pannerAttr.coneOuterGain:this._coneOuterGain,distanceModel:"undefined"!==typeof l.pannerAttr.distanceModel?
l.pannerAttr.distanceModel:this._distanceModel,maxDistance:"undefined"!==typeof l.pannerAttr.maxDistance?l.pannerAttr.maxDistance:this._maxDistance,refDistance:"undefined"!==typeof l.pannerAttr.refDistance?l.pannerAttr.refDistance:this._refDistance,rolloffFactor:"undefined"!==typeof l.pannerAttr.rolloffFactor?l.pannerAttr.rolloffFactor:this._rolloffFactor,panningModel:"undefined"!==typeof l.pannerAttr.panningModel?l.pannerAttr.panningModel:this._panningModel});else return(j=this._soundById(parseInt(j[0],
10)))?j._pannerAttr:this._pannerAttr;else 2===j.length&&(l=j[0],m=parseInt(j[1],10));m=this._getSoundIds(m);for(var v=0;v<m.length;v++)if(j=this._soundById(m[v])){var r=j._pannerAttr,r={coneInnerAngle:"undefined"!==typeof l.coneInnerAngle?l.coneInnerAngle:r.coneInnerAngle,coneOuterAngle:"undefined"!==typeof l.coneOuterAngle?l.coneOuterAngle:r.coneOuterAngle,coneOuterGain:"undefined"!==typeof l.coneOuterGain?l.coneOuterGain:r.coneOuterGain,distanceModel:"undefined"!==typeof l.distanceModel?l.distanceModel:
r.distanceModel,maxDistance:"undefined"!==typeof l.maxDistance?l.maxDistance:r.maxDistance,refDistance:"undefined"!==typeof l.refDistance?l.refDistance:r.refDistance,rolloffFactor:"undefined"!==typeof l.rolloffFactor?l.rolloffFactor:r.rolloffFactor,panningModel:"undefined"!==typeof l.panningModel?l.panningModel:r.panningModel},u=j._panner;u?(u.coneInnerAngle=r.coneInnerAngle,u.coneOuterAngle=r.coneOuterAngle,u.coneOuterGain=r.coneOuterGain,u.distanceModel=r.distanceModel,u.maxDistance=r.maxDistance,
u.refDistance=r.refDistance,u.rolloffFactor=r.rolloffFactor,u.panningModel=r.panningModel):(j._pos||(j._pos=this._pos||[0,0,-0.5]),n(j,"spatial"))}return this};var l=Sound.prototype.init;Sound.prototype.init=function(){var j=this._parent;this._orientation=j._orientation;this._stereo=j._stereo;this._pos=j._pos;this._pannerAttr=j._pannerAttr;l.call(this);this._stereo?j.stereo(this._stereo):this._pos&&j.pos(this._pos[0],this._pos[1],this._pos[2],this._id)};var m=Sound.prototype.reset;Sound.prototype.reset=
function(){var j=this._parent;this._orientation=j._orientation;this._stereo=j._stereo;this._pos=j._pos;this._pannerAttr=j._pannerAttr;this._stereo?j.stereo(this._stereo):this._pos?j.pos(this._pos[0],this._pos[1],this._pos[2],this._id):this._panner&&(this._panner.disconnect(0),this._panner=void 0,j._refreshBuffer(this));return m.call(this)};var n=function(j,l){"spatial"===(l||"spatial")?(j._panner=Howler.ctx.createPanner(),j._panner.coneInnerAngle=j._pannerAttr.coneInnerAngle,j._panner.coneOuterAngle=
j._pannerAttr.coneOuterAngle,j._panner.coneOuterGain=j._pannerAttr.coneOuterGain,j._panner.distanceModel=j._pannerAttr.distanceModel,j._panner.maxDistance=j._pannerAttr.maxDistance,j._panner.refDistance=j._pannerAttr.refDistance,j._panner.rolloffFactor=j._pannerAttr.rolloffFactor,j._panner.panningModel=j._pannerAttr.panningModel,"undefined"!==typeof j._panner.positionX?(j._panner.positionX.setValueAtTime(j._pos[0],Howler.ctx.currentTime),j._panner.positionY.setValueAtTime(j._pos[1],Howler.ctx.currentTime),
j._panner.positionZ.setValueAtTime(j._pos[2],Howler.ctx.currentTime)):j._panner.setPosition(j._pos[0],j._pos[1],j._pos[2]),"undefined"!==typeof j._panner.orientationX?(j._panner.orientationX.setValueAtTime(j._orientation[0],Howler.ctx.currentTime),j._panner.orientationY.setValueAtTime(j._orientation[1],Howler.ctx.currentTime),j._panner.orientationZ.setValueAtTime(j._orientation[2],Howler.ctx.currentTime)):j._panner.setOrientation(j._orientation[0],j._orientation[1],j._orientation[2])):(j._panner=
Howler.ctx.createStereoPanner(),j._panner.pan.setValueAtTime(j._stereo,Howler.ctx.currentTime));j._panner.connect(j._node);j._paused||j._parent.pause(j._id,!0).play(j._id,!0)}})();(function(j,l,m,n,p,s,A){j.GoogleAnalyticsObject=p;j[p]=j[p]||function(){(j[p].q=j[p].q||[]).push(arguments)};j[p].l=1*new Date;s=l.createElement(m);A=l.getElementsByTagName(m)[0];s.async=1;s.src=n;A.parentNode.insertBefore(s,A)})(window,document,"script","//www.google-analytics.com/analytics.js","ga");ga("create","UA-73655456-25",{name:"marketjs"});ga("marketjs.send","pageview");(function(j){Number.prototype.map=function(j,l,m,n){return m+(n-m)*((this-j)/(l-j))};Number.prototype.limit=function(j,l){return Math.min(l,Math.max(j,this))};Number.prototype.round=function(j){j=Math.pow(10,j||0);return Math.round(this*j)/j};Number.prototype.floor=function(){return Math.floor(this)};Number.prototype.ceil=function(){return Math.ceil(this)};Number.prototype.toInt=function(){return this|0};Number.prototype.toRad=function(){return this/180*Math.PI};Number.prototype.toDeg=function(){return 180*
this/Math.PI};Array.prototype.erase=function(j){for(var l=this.length;l--;)this[l]===j&&this.splice(l,1);return this};Array.prototype.random=function(){return this[Math.floor(Math.random()*this.length)]};Function.prototype.bind=Function.prototype.bind||function(j){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var l=Array.prototype.slice.call(arguments,1),m=this,n=function(){},p=function(){return m.apply(this instanceof n&&j?
this:j,l.concat(Array.prototype.slice.call(arguments)))};n.prototype=this.prototype;p.prototype=new n;return p};j.ig={game:null,debug:null,version:"1.23",global:j,modules:{},resources:[],ready:!1,baked:!1,nocache:"",ua:{},prefix:j.ImpactPrefix||"",lib:"lib/",_current:null,_loadQueue:[],_waitForOnload:0,$:function(j){return"#"==j.charAt(0)?document.getElementById(j.substr(1)):document.getElementsByTagName(j)},$new:function(j){return document.createElement(j)},copy:function(j){if(!j||"object"!=typeof j||
j instanceof HTMLElement||j instanceof ig.Class)return j;if(j instanceof Array)for(var l=[],m=0,n=j.length;m<n;m++)l[m]=ig.copy(j[m]);else for(m in l={},j)l[m]=ig.copy(j[m]);return l},merge:function(j,l){for(var m in l){var n=l[m];if("object"!=typeof n||n instanceof HTMLElement||n instanceof ig.Class||null===n)j[m]=n;else{if(!j[m]||"object"!=typeof j[m])j[m]=n instanceof Array?[]:{};ig.merge(j[m],n)}}return j},ksort:function(j){if(!j||"object"!=typeof j)return[];var l=[],m=[],n;for(n in j)l.push(n);
l.sort();for(n=0;n<l.length;n++)m.push(j[l[n]]);return m},setVendorAttribute:function(j,l,m){var n=l.charAt(0).toUpperCase()+l.substr(1);j[l]="undefined"!==typeof j.imageSmoothingEnabled?j["ms"+n]=j["moz"+n]=j["o"+n]=m:j["ms"+n]=j["moz"+n]=j["webkit"+n]=j["o"+n]=m},getVendorAttribute:function(j,l){var m=l.charAt(0).toUpperCase()+l.substr(1);return"undefined"!==typeof j.imageSmoothingEnabled?j[l]||j["ms"+m]||j["moz"+m]||j["o"+m]:j[l]||j["ms"+m]||j["moz"+m]||j["webkit"+m]||j["o"+m]},normalizeVendorAttribute:function(j,
l){var m=ig.getVendorAttribute(j,l);!j[l]&&m&&(j[l]=m)},getImagePixels:function(j,l,m,n,p){var s=ig.$new("canvas");s.width=j.width;s.height=j.height;var z=s.getContext("2d");ig.System.SCALE.CRISP(s,z);var A=ig.getVendorAttribute(z,"backingStorePixelRatio")||1;ig.normalizeVendorAttribute(z,"getImageDataHD");var H=j.width/A,M=j.height/A;s.width=Math.ceil(H);s.height=Math.ceil(M);z.drawImage(j,0,0,H,M);return 1===A?z.getImageData(l,m,n,p):z.getImageDataHD(l,m,n,p)},module:function(j){if(ig._current)throw"Module '"+
ig._current.name+"' defines nothing";if(ig.modules[j]&&ig.modules[j].body)throw"Module '"+j+"' is already defined";ig._current={name:j,requires:[],loaded:!1,body:null};ig.modules[j]=ig._current;ig._loadQueue.push(ig._current);return ig},requires:function(){ig._current.requires=Array.prototype.slice.call(arguments);return ig},defines:function(j){ig._current.body=j;ig._current=null;ig._initDOMReady()},addResource:function(j){ig.resources.push(j)},setNocache:function(j){ig.nocache=j?"?"+Date.now():""},
log:function(){},assert:function(){},show:function(){},mark:function(){},_loadScript:function(j,l){ig.modules[j]={name:j,requires:[],loaded:!1,body:null};ig._waitForOnload++;var m=ig.prefix+ig.lib+j.replace(/\./g,"/")+".js"+ig.nocache,n=ig.$new("script");n.type="text/javascript";n.src=m;n.onload=function(){ig._waitForOnload--;ig._execModules()};n.onerror=function(){throw"Failed to load module "+j+" at "+m+" required from "+l;};ig.$("head")[0].appendChild(n)},_execModules:function(){for(var j=!1,l=
0;l<ig._loadQueue.length;l++){for(var m=ig._loadQueue[l],n=!0,p=0;p<m.requires.length;p++){var s=m.requires[p];ig.modules[s]?ig.modules[s].loaded||(n=!1):(n=!1,ig._loadScript(s,m.name))}n&&m.body&&(ig._loadQueue.splice(l,1),m.loaded=!0,m.body(),j=!0,l--)}if(j)ig._execModules();else if(!ig.baked&&0==ig._waitForOnload&&0!=ig._loadQueue.length){j=[];for(l=0;l<ig._loadQueue.length;l++){n=[];s=ig._loadQueue[l].requires;for(p=0;p<s.length;p++)m=ig.modules[s[p]],(!m||!m.loaded)&&n.push(s[p]);j.push(ig._loadQueue[l].name+
" (requires: "+n.join(", ")+")")}throw"Unresolved (or circular?) dependencies. Most likely there's a name/path mismatch for one of the listed modules or a previous syntax error prevents a module from loading:\n"+j.join("\n");}},_DOMReady:function(){if(!ig.modules["dom.ready"].loaded){if(!document.body)return setTimeout(ig._DOMReady,13);ig.modules["dom.ready"].loaded=!0;ig._waitForOnload--;ig._execModules()}return 0},_boot:function(){document.location.href.match(/\?nocache/)&&ig.setNocache(!0);ig.ua.pixelRatio=
j.devicePixelRatio||1;ig.ua.viewport={width:j.innerWidth,height:j.innerHeight};ig.ua.screen={width:j.screen.availWidth*ig.ua.pixelRatio,height:j.screen.availHeight*ig.ua.pixelRatio};ig.ua.iPhone=/iPhone/i.test(navigator.userAgent);ig.ua.iPhone4=ig.ua.iPhone&&2==ig.ua.pixelRatio;ig.ua.iPad=/iPad/i.test(navigator.userAgent);ig.ua.android=/android/i.test(navigator.userAgent);ig.ua.winPhone=/Windows Phone/i.test(navigator.userAgent);ig.ua.is_uiwebview=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent);
ig.ua.is_safari_or_uiwebview=/(iPhone|iPod|iPad).*AppleWebKit/i.test(navigator.userAgent);ig.ua.iOS=ig.ua.iPhone||ig.ua.iPad;ig.ua.iOS6_tag=/OS 6_/i.test(navigator.userAgent);ig.ua.iOS6=(ig.ua.iPhone||ig.ua.iPad)&&ig.ua.iOS6_tag;ig.ua.iOSgt5=ig.ua.iOS&&5<parseInt(navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/)[1]);ig.ua.HTCONE=/HTC_One/i.test(navigator.userAgent);ig.ua.winPhone=/Windows Phone/i.test(navigator.userAgent);ig.ua.Kindle=/Silk/i.test(navigator.userAgent);ig.ua.touchDevice="ontouchstart"in
j||j.navigator.msMaxTouchPoints;ig.ua.mobile=ig.ua.iOS||ig.ua.android||ig.ua.iOS6||ig.ua.winPhone||ig.ua.Kindle||/mobile/i.test(navigator.userAgent)},_initDOMReady:function(){ig.modules["dom.ready"]?ig._execModules():(ig._boot(),ig.modules["dom.ready"]={requires:[],loaded:!1,body:null},ig._waitForOnload++,"complete"===document.readyState?ig._DOMReady():(document.addEventListener("DOMContentLoaded",ig._DOMReady,!1),j.addEventListener("load",ig._DOMReady,!1)))}};ig.normalizeVendorAttribute(j,"requestAnimationFrame");
if(j.requestAnimationFrame){var l=1,m={};j.ig.setAnimation=function(n,p){var s=l++;m[s]=!0;var t=function(){m[s]&&(j.requestAnimationFrame(t,p),n())};j.requestAnimationFrame(t,p);return s};j.ig.clearAnimation=function(j){delete m[j]}}else j.ig.setAnimation=function(l){return j.setInterval(l,1E3/60)},j.ig.clearAnimation=function(l){j.clearInterval(l)};var n=!1,p=/xyz/.test(function(){xyz})?/\bparent\b/:/.*/,s=0;j.ig.Class=function(){};var A=function(j){var l=this.prototype,m={},n;for(n in j)"function"==
typeof j[n]&&"function"==typeof l[n]&&p.test(j[n])?(m[n]=l[n],l[n]=function(j,l){return function(){var n=this.parent;this.parent=m[j];var p=l.apply(this,arguments);this.parent=n;return p}}(n,j[n])):l[n]=j[n]};j.ig.Class.extend=function(l){function m(){if(!n){if(this.staticInstantiate){var j=this.staticInstantiate.apply(this,arguments);if(j)return j}for(var l in this)"object"==typeof this[l]&&(this[l]=ig.copy(this[l]));this.init&&this.init.apply(this,arguments)}return this}var u=this.prototype;n=!0;
var t=new this;n=!1;for(var x in l)t[x]="function"==typeof l[x]&&"function"==typeof u[x]&&p.test(l[x])?function(j,l){return function(){var m=this.parent;this.parent=u[j];var n=l.apply(this,arguments);this.parent=m;return n}}(x,l[x]):l[x];m.prototype=t;m.prototype.constructor=m;m.extend=j.ig.Class.extend;m.inject=A;m.classId=t.classId=++s;return m};j.ImpactMixin&&ig.merge(ig,j.ImpactMixin)})(window);ig.baked=!0;
ig.module("impact.image").defines(function(){ig.Image=ig.Class.extend({data:null,width:0,height:0,loaded:!1,failed:!1,loadCallback:null,path:"",staticInstantiate:function(j){return ig.Image.cache[j]||null},init:function(j){this.path=j;this.load()},load:function(j){this.loaded?j&&j(this.path,!0):(!this.loaded&&ig.ready?(this.loadCallback=j||null,this.data=new Image,this.data.onload=this.onload.bind(this),this.data.onerror=this.onerror.bind(this),this.data.src=ig.prefix+this.path+ig.nocache):ig.addResource(this),
ig.Image.cache[this.path]=this)},reload:function(){this.loaded=!1;this.data=new Image;this.data.onload=this.onload.bind(this);this.data.src=this.path+"?"+Date.now()},onload:function(){this.width=this.data.width;this.height=this.data.height;this.loaded=!0;1!=ig.system.scale&&this.resize(ig.system.scale);this.loadCallback&&this.loadCallback(this.path,!0)},onerror:function(){this.failed=!0;this.loadCallback&&this.loadCallback(this.path,!1)},resize:function(j){var l=ig.getImagePixels(this.data,0,0,this.width,
this.height),m=this.width*j,n=this.height*j,p=ig.$new("canvas");p.width=m;p.height=n;for(var s=p.getContext("2d"),A=s.getImageData(0,0,m,n),v=0;v<n;v++)for(var r=0;r<m;r++){var u=4*(Math.floor(v/j)*this.width+Math.floor(r/j)),t=4*(v*m+r);A.data[t]=l.data[u];A.data[t+1]=l.data[u+1];A.data[t+2]=l.data[u+2];A.data[t+3]=l.data[u+3]}s.putImageData(A,0,0);this.data=p},draw:function(j,l,m,n,p,s){if(this.loaded){var A=ig.system.scale;p=(p?p:this.width)*A;s=(s?s:this.height)*A;ig.system.context.drawImage(this.data,
m?m*A:0,n?n*A:0,p,s,ig.system.getDrawPos(j),ig.system.getDrawPos(l),p,s);ig.Image.drawCount++}},drawTile:function(j,l,m,n,p,s,A){p=p?p:n;if(this.loaded&&!(n>this.width||p>this.height)){var v=ig.system.scale,r=Math.floor(n*v),u=Math.floor(p*v),t=s?-1:1,x=A?-1:1;if(s||A)ig.system.context.save(),ig.system.context.scale(t,x);ig.system.context.drawImage(this.data,Math.floor(m*n)%this.width*v,Math.floor(m*n/this.width)*p*v,r,u,ig.system.getDrawPos(j)*t-(s?r:0),ig.system.getDrawPos(l)*x-(A?u:0),r,u);(s||
A)&&ig.system.context.restore();ig.Image.drawCount++}}});ig.Image.drawCount=0;ig.Image.cache={};ig.Image.reloadCache=function(){for(var j in ig.Image.cache)ig.Image.cache[j].reload()}});ig.baked=!0;
ig.module("impact.font").requires("impact.image").defines(function(){ig.Font=ig.Image.extend({widthMap:[],indices:[],firstChar:32,alpha:1,letterSpacing:1,lineSpacing:0,onload:function(j){this._loadMetrics(this.data);this.parent(j)},widthForString:function(j){if(-1!==j.indexOf("\n")){j=j.split("\n");for(var l=0,m=0;m<j.length;m++)l=Math.max(l,this._widthForLine(j[m]));return l}return this._widthForLine(j)},_widthForLine:function(j){for(var l=0,m=0;m<j.length;m++)l+=this.widthMap[j.charCodeAt(m)-this.firstChar]+
this.letterSpacing;return l},heightForString:function(j){return j.split("\n").length*(this.height+this.lineSpacing)},draw:function(j,l,m,n){"string"!=typeof j&&(j=j.toString());if(-1!==j.indexOf("\n")){j=j.split("\n");for(var p=this.height+this.lineSpacing,s=0;s<j.length;s++)this.draw(j[s],l,m+s*p,n)}else{if(n==ig.Font.ALIGN.RIGHT||n==ig.Font.ALIGN.CENTER)s=this._widthForLine(j),l-=n==ig.Font.ALIGN.CENTER?s/2:s;1!==this.alpha&&(ig.system.context.globalAlpha=this.alpha);for(s=0;s<j.length;s++)n=j.charCodeAt(s),
l+=this._drawChar(n-this.firstChar,l,m);1!==this.alpha&&(ig.system.context.globalAlpha=1);ig.Image.drawCount+=j.length}},_drawChar:function(j,l,m){if(!this.loaded||0>j||j>=this.indices.length)return 0;var n=ig.system.scale,p=this.widthMap[j]*n,s=(this.height-2)*n;ig.system.context.drawImage(this.data,this.indices[j]*n,0,p,s,ig.system.getDrawPos(l),ig.system.getDrawPos(m),p,s);return this.widthMap[j]+this.letterSpacing},_loadMetrics:function(j){this.height=j.height-1;this.widthMap=[];this.indices=
[];for(var l=ig.getImagePixels(j,0,j.height-1,j.width,1),m=0,n=0,p=0;p<j.width;p++){var s=4*p+3;127<l.data[s]?n++:128>l.data[s]&&n&&(this.widthMap.push(n),this.indices.push(p-n),m++,n=0)}this.widthMap.push(n);this.indices.push(p-n)}});ig.Font.ALIGN={LEFT:0,RIGHT:1,CENTER:2}});ig.baked=!0;
ig.module("impact.sound").defines(function(){ig.SoundManager=ig.Class.extend({clips:{},volume:1,format:null,init:function(){if(!ig.Sound.enabled||!window.Audio)ig.Sound.enabled=!1;else{for(var j=new Audio,l=0;l<ig.Sound.use.length;l++){var m=ig.Sound.use[l];if(j.canPlayType(m.mime)){this.format=m;break}}this.format||(ig.Sound.enabled=!1)}},load:function(j,l,m){var n=ig.prefix+j.replace(/[^\.]+$/,this.format.ext)+ig.nocache;if(this.clips[j]){if(l&&this.clips[j].length<ig.Sound.channels)for(l=this.clips[j].length;l<
ig.Sound.channels;l++){var p=new Audio(n);p.load();this.clips[j].push(p)}return this.clips[j][0]}var s=new Audio(n);m&&(s.addEventListener("canplaythrough",function v(l){s.removeEventListener("canplaythrough",v,!1);m(j,!0,l)},!1),s.addEventListener("error",function(l){m(j,!1,l)},!1));s.preload="auto";s.load();this.clips[j]=[s];if(l)for(l=1;l<ig.Sound.channels;l++)p=new Audio(n),p.load(),this.clips[j].push(p);return s},get:function(j){j=this.clips[j];for(var l=0,m;m=j[l++];)if(m.paused||m.ended)return m.ended&&
(m.currentTime=0),m;j[0].pause();j[0].currentTime=0;return j[0]}});ig.Music=ig.Class.extend({tracks:[],namedTracks:{},currentTrack:null,currentIndex:0,random:!1,_volume:1,_loop:!1,_fadeInterval:0,_fadeTimer:null,_endedCallbackBound:null,init:function(){this._endedCallbackBound=this._endedCallback.bind(this);Object.defineProperty?(Object.defineProperty(this,"volume",{get:this.getVolume.bind(this),set:this.setVolume.bind(this)}),Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)})):
this.__defineGetter__&&(this.__defineGetter__("volume",this.getVolume.bind(this)),this.__defineSetter__("volume",this.setVolume.bind(this)),this.__defineGetter__("loop",this.getLooping.bind(this)),this.__defineSetter__("loop",this.setLooping.bind(this)))},add:function(j,l){if(ig.Sound.enabled){var m=ig.soundManager.load(j instanceof ig.Sound?j.path:j,!1);m.loop=this._loop;m.volume=this._volume;m.addEventListener("ended",this._endedCallbackBound,!1);this.tracks.push(m);l&&(this.namedTracks[l]=m);this.currentTrack||
(this.currentTrack=m)}},next:function(){this.tracks.length&&(this.stop(),this.currentIndex=this.random?Math.floor(Math.random()*this.tracks.length):(this.currentIndex+1)%this.tracks.length,this.currentTrack=this.tracks[this.currentIndex],this.play())},pause:function(){this.currentTrack&&this.currentTrack.pause()},stop:function(){this.currentTrack&&(this.currentTrack.pause(),this.currentTrack.currentTime=0)},play:function(j){if(j&&this.namedTracks[j])j=this.namedTracks[j],j!=this.currentTrack&&(this.stop(),
this.currentTrack=j);else if(!this.currentTrack)return;this.currentTrack.play()},getLooping:function(){return this._loop},setLooping:function(j){this._loop=j;for(var l in this.tracks)this.tracks[l].loop=j},getVolume:function(){return this._volume},setVolume:function(j){this._volume=j.limit(0,1);for(var l in this.tracks)this.tracks[l].volume=this._volume},fadeOut:function(j){this.currentTrack&&(clearInterval(this._fadeInterval),this.fadeTimer=new ig.Timer(j),this._fadeInterval=setInterval(this._fadeStep.bind(this),
50))},_fadeStep:function(){var j=this.fadeTimer.delta().map(-this.fadeTimer.target,0,1,0).limit(0,1)*this._volume;0.01>=j?(this.stop(),this.currentTrack.volume=this._volume,clearInterval(this._fadeInterval)):this.currentTrack.volume=j},_endedCallback:function(){this._loop?this.play():this.next()}});ig.Sound=ig.Class.extend({path:"",volume:1,currentClip:null,multiChannel:!0,init:function(j,l){this.path=j;this.multiChannel=!1!==l;this.load()},load:function(j){ig.Sound.enabled?ig.ready?ig.soundManager.load(this.path,
this.multiChannel,j):ig.addResource(this):j&&j(this.path,!0)},play:function(){ig.Sound.enabled&&(this.currentClip=ig.soundManager.get(this.path),this.currentClip.volume=ig.soundManager.volume*this.volume,this.currentClip.play())},stop:function(){this.currentClip&&(this.currentClip.pause(),this.currentClip.currentTime=0)}});ig.Sound.FORMAT={MP3:{ext:"mp3",mime:"audio/mpeg"},M4A:{ext:"m4a",mime:"audio/mp4; codecs=mp4a"},OGG:{ext:"ogg",mime:"audio/ogg; codecs=vorbis"},WEBM:{ext:"webm",mime:"audio/webm; codecs=vorbis"},
CAF:{ext:"caf",mime:"audio/x-caf"}};ig.Sound.use=[ig.Sound.FORMAT.OGG,ig.Sound.FORMAT.MP3];ig.Sound.channels=4;ig.Sound.enabled=!0});ig.baked=!0;
ig.module("impact.loader").requires("impact.image","impact.font","impact.sound").defines(function(){ig.Loader=ig.Class.extend({resources:[],gameClass:null,status:0,done:!1,_unloaded:[],_drawStatus:0,_intervalId:0,_loadCallbackBound:null,init:function(j,l){this.gameClass=j;this.resources=l;this._loadCallbackBound=this._loadCallback.bind(this);for(var m=0;m<this.resources.length;m++)this._unloaded.push(this.resources[m].path)},load:function(){ig.system.clear("#000");if(this.resources.length){for(var j=
0;j<this.resources.length;j++)this.loadResource(this.resources[j]);this._intervalId=setInterval(this.draw.bind(this),16)}else this.end()},loadResource:function(j){j.load(this._loadCallbackBound)},end:function(){this.done||(this.done=!0,clearInterval(this._intervalId))},draw:function(){},_loadCallback:function(j,l){if(l)this._unloaded.erase(j);else throw"Failed to load resource: "+j;this.status=1-this._unloaded.length/this.resources.length;0==this._unloaded.length&&setTimeout(this.end.bind(this),250)}})});
ig.baked=!0;
ig.module("impact.timer").defines(function(){ig.Timer=ig.Class.extend({target:0,base:0,last:0,pausedAt:0,init:function(j){this.last=this.base=ig.Timer.time;this.target=j||0},set:function(j){this.target=j||0;this.base=ig.Timer.time;this.pausedAt=0},reset:function(){this.base=ig.Timer.time;this.pausedAt=0},tick:function(){var j=ig.Timer.time-this.last;this.last=ig.Timer.time;return this.pausedAt?0:j},delta:function(){return(this.pausedAt||ig.Timer.time)-this.base-this.target},pause:function(){this.pausedAt||(this.pausedAt=
ig.Timer.time)},unpause:function(){this.pausedAt&&(this.base+=ig.Timer.time-this.pausedAt,this.pausedAt=0)}});ig.Timer._last=0;ig.Timer.time=Number.MIN_VALUE;ig.Timer.timeScale=1;ig.Timer.maxStep=0.05;ig.Timer.step=function(){var j=Date.now();ig.Timer.time+=Math.min((j-ig.Timer._last)/1E3,ig.Timer.maxStep)*ig.Timer.timeScale;ig.Timer._last=j}});ig.baked=!0;
ig.module("impact.system").requires("impact.timer","impact.image").defines(function(){ig.System=ig.Class.extend({fps:30,width:320,height:240,realWidth:320,realHeight:240,scale:1,tick:0,animationId:0,newGameClass:null,running:!1,delegate:null,clock:null,canvas:null,context:null,init:function(j,l,m,n,p){this.fps=l;this.clock=new ig.Timer;this.canvas=ig.$(j);this.resize(m,n,p);this.context=this.canvas.getContext("2d");this.getDrawPos=ig.System.drawMode;1!=this.scale&&(ig.System.scaleMode=ig.System.SCALE.CRISP);
ig.System.scaleMode(this.canvas,this.context)},resize:function(j,l,m){this.width=j;this.height=l;this.scale=m||this.scale;this.realWidth=this.width*this.scale;this.realHeight=this.height*this.scale;this.canvas.width=this.realWidth;this.canvas.height=this.realHeight},setGame:function(j){this.running?this.newGameClass=j:this.setGameNow(j)},setGameNow:function(j){ig.game=new j;ig.system.setDelegate(ig.game)},setDelegate:function(j){if("function"==typeof j.run)this.delegate=j,this.startRunLoop();else throw"System.setDelegate: No run() function in object";
},stopRunLoop:function(){ig.clearAnimation(this.animationId);this.running=!1},startRunLoop:function(){this.stopRunLoop();this.animationId=ig.setAnimation(this.run.bind(this),this.canvas);this.running=!0},clear:function(j){this.context.fillStyle=j;this.context.fillRect(0,0,this.realWidth,this.realHeight)},run:function(){ig.Timer.step();this.tick=this.clock.tick();this.delegate.run();ig.input.clearPressed();this.newGameClass&&(this.setGameNow(this.newGameClass),this.newGameClass=null)},getDrawPos:null});
ig.System.DRAW={AUTHENTIC:function(j){return Math.round(j)*this.scale},SMOOTH:function(j){return Math.round(j*this.scale)},SUBPIXEL:function(j){return j*this.scale}};ig.System.drawMode=ig.System.DRAW.SMOOTH;ig.System.SCALE={CRISP:function(j,l){ig.setVendorAttribute(l,"imageSmoothingEnabled",!1);j.style.imageRendering="-moz-crisp-edges";j.style.imageRendering="-o-crisp-edges";j.style.imageRendering="-webkit-optimize-contrast";j.style.imageRendering="crisp-edges";j.style.msInterpolationMode="nearest-neighbor"},
SMOOTH:function(j,l){ig.setVendorAttribute(l,"imageSmoothingEnabled",!0);j.style.imageRendering="";j.style.msInterpolationMode=""}};ig.System.scaleMode=ig.System.SCALE.SMOOTH});ig.baked=!0;
ig.module("impact.input").defines(function(){ig.KEY={MOUSE1:-1,MOUSE2:-3,MWHEEL_UP:-4,MWHEEL_DOWN:-5,BACKSPACE:8,TAB:9,ENTER:13,PAUSE:19,CAPS:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,_0:48,_1:49,_2:50,_3:51,_4:52,_5:53,_6:54,_7:55,_8:56,_9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,
NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,MULTIPLY:106,ADD:107,SUBSTRACT:109,DECIMAL:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SHIFT:16,CTRL:17,ALT:18,PLUS:187,COMMA:188,MINUS:189,PERIOD:190};ig.Input=ig.Class.extend({bindings:{},actions:{},presses:{},locks:{},delayedKeyup:{},isUsingMouse:!1,isUsingKeyboard:!1,isUsingAccelerometer:!1,mouse:{x:0,y:0},accel:{x:0,y:0,z:0},initMouse:function(){if(!this.isUsingMouse){this.isUsingMouse=
!0;var j=this.mousewheel.bind(this);ig.system.canvas.addEventListener("mousewheel",j,!1);ig.system.canvas.addEventListener("DOMMouseScroll",j,!1);ig.system.canvas.addEventListener("contextmenu",this.contextmenu.bind(this),!1);ig.system.canvas.addEventListener("mousedown",this.keydown.bind(this),!1);ig.system.canvas.addEventListener("mouseup",this.keyup.bind(this),!1);ig.system.canvas.addEventListener("mousemove",this.mousemove.bind(this),!1);ig.ua.touchDevice&&(ig.system.canvas.addEventListener("touchstart",
this.keydown.bind(this),!1),ig.system.canvas.addEventListener("touchend",this.keyup.bind(this),!1),ig.system.canvas.addEventListener("touchmove",this.mousemove.bind(this),!1),ig.system.canvas.addEventListener("MSPointerDown",this.keydown.bind(this),!1),ig.system.canvas.addEventListener("MSPointerUp",this.keyup.bind(this),!1),ig.system.canvas.addEventListener("MSPointerMove",this.mousemove.bind(this),!1),ig.system.canvas.style.msTouchAction="none")}},initKeyboard:function(){this.isUsingKeyboard||(this.isUsingKeyboard=
!0,window.addEventListener("keydown",this.keydown.bind(this),!1),window.addEventListener("keyup",this.keyup.bind(this),!1))},initAccelerometer:function(){this.isUsingAccelerometer||window.addEventListener("devicemotion",this.devicemotion.bind(this),!1)},mousewheel:function(j){var l=this.bindings[0<(j.wheelDelta?j.wheelDelta:-1*j.detail)?ig.KEY.MWHEEL_UP:ig.KEY.MWHEEL_DOWN];l&&(this.actions[l]=!0,this.presses[l]=!0,this.delayedKeyup[l]=!0,j.stopPropagation(),j.preventDefault())},mousemove:function(j){var l=
parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth;ig.ua.mobile&&(l=ig.system.realWidth);var l=ig.system.scale*(l/ig.system.realWidth),m={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(m=ig.system.canvas.getBoundingClientRect());j=j.touches?j.touches[0]:j;this.mouse.x=(j.clientX-m.left)/l;this.mouse.y=(j.clientY-m.top)/l;try{ig.soundHandler.unlockWebAudio()}catch(n){}},contextmenu:function(j){this.bindings[ig.KEY.MOUSE2]&&(j.stopPropagation(),j.preventDefault())},keydown:function(j){var l=
j.target.tagName;if(!("INPUT"==l||"TEXTAREA"==l))if(l="keydown"==j.type?j.keyCode:2==j.button?ig.KEY.MOUSE2:ig.KEY.MOUSE1,("touchstart"==j.type||"mousedown"==j.type)&&this.mousemove(j),l=this.bindings[l])this.actions[l]=!0,this.locks[l]||(this.presses[l]=!0,this.locks[l]=!0),j.stopPropagation(),j.preventDefault()},keyup:function(j){var l=j.target.tagName;if(!("INPUT"==l||"TEXTAREA"==l))if(l=this.bindings["keyup"==j.type?j.keyCode:2==j.button?ig.KEY.MOUSE2:ig.KEY.MOUSE1]){this.delayedKeyup[l]=!0;j.stopPropagation();
j.preventDefault();try{ig.soundHandler.unlockWebAudio()}catch(m){}}},devicemotion:function(j){this.accel=j.accelerationIncludingGravity},bind:function(j,l){0>j?this.initMouse():0<j&&this.initKeyboard();this.bindings[j]=l},bindTouch:function(j,l){var m=ig.$(j),n=this;m.addEventListener("touchstart",function(j){n.touchStart(j,l)},!1);m.addEventListener("touchend",function(j){n.touchEnd(j,l)},!1);m.addEventListener("MSPointerDown",function(j){n.touchStart(j,l)},!1);m.addEventListener("MSPointerUp",function(j){n.touchEnd(j,
l)},!1)},unbind:function(j){this.delayedKeyup[this.bindings[j]]=!0;this.bindings[j]=null},unbindAll:function(){this.bindings={};this.actions={};this.presses={};this.locks={};this.delayedKeyup={}},state:function(j){return this.actions[j]},pressed:function(j){return this.presses[j]},released:function(j){return!!this.delayedKeyup[j]},clearPressed:function(){for(var j in this.delayedKeyup)this.actions[j]=!1,this.locks[j]=!1;this.delayedKeyup={};this.presses={}},touchStart:function(j,l){this.actions[l]=
!0;this.presses[l]=!0;j.stopPropagation();j.preventDefault();return!1},touchEnd:function(j,l){this.delayedKeyup[l]=!0;j.stopPropagation();j.preventDefault();return!1}})});ig.baked=!0;ig.module("impact.impact").requires("dom.ready","impact.loader","impact.system","impact.input","impact.sound").defines(function(){ig.main=function(j,l,m,n,p,s,A){ig.system=new ig.System(j,m,n,p,s||1);ig.input=new ig.Input;ig.soundManager=new ig.SoundManager;ig.music=new ig.Music;ig.ready=!0;(new (A||ig.Loader)(l,ig.resources)).load()}});
ig.baked=!0;
ig.module("impact.animation").requires("impact.timer","impact.image").defines(function(){ig.AnimationSheet=ig.Class.extend({width:8,height:8,image:null,init:function(j,l,m){this.width=l;this.height=m;this.image=new ig.Image(j)}});ig.Animation=ig.Class.extend({sheet:null,timer:null,sequence:[],flip:{x:!1,y:!1},pivot:{x:0,y:0},frame:0,tile:0,loopCount:0,alpha:1,angle:0,init:function(j,l,m,n){this.sheet=j;this.pivot={x:j.width/2,y:j.height/2};this.timer=new ig.Timer;this.frameTime=l;this.sequence=m;
this.stop=!!n;this.tile=this.sequence[0]},rewind:function(){this.timer.set();this.frame=this.loopCount=0;this.tile=this.sequence[0];return this},gotoFrame:function(j){this.timer.set(this.frameTime*-j-1E-4);this.update()},gotoRandomFrame:function(){this.gotoFrame(Math.floor(Math.random()*this.sequence.length))},update:function(){var j=Math.floor(this.timer.delta()/this.frameTime);this.loopCount=Math.floor(j/this.sequence.length);this.frame=this.stop&&0<this.loopCount?this.sequence.length-1:j%this.sequence.length;
this.tile=this.sequence[this.frame]},draw:function(j,l){var m=Math.max(this.sheet.width,this.sheet.height);j>ig.system.width||(l>ig.system.height||0>j+m||0>l+m)||(1!=this.alpha&&(ig.system.context.globalAlpha=this.alpha),0==this.angle?this.sheet.image.drawTile(j,l,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y):(ig.system.context.save(),ig.system.context.translate(ig.system.getDrawPos(j+this.pivot.x),ig.system.getDrawPos(l+this.pivot.y)),ig.system.context.rotate(this.angle),
this.sheet.image.drawTile(-this.pivot.x,-this.pivot.y,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y),ig.system.context.restore()),1!=this.alpha&&(ig.system.context.globalAlpha=1))}})});ig.baked=!0;
ig.module("impact.entity").requires("impact.animation","impact.impact").defines(function(){ig.Entity=ig.Class.extend({id:0,settings:{},size:{x:16,y:16},offset:{x:0,y:0},pos:{x:0,y:0},last:{x:0,y:0},vel:{x:0,y:0},accel:{x:0,y:0},friction:{x:0,y:0},maxVel:{x:100,y:100},zIndex:0,gravityFactor:1,standing:!1,bounciness:0,minBounceVelocity:40,anims:{},animSheet:null,currentAnim:null,health:10,type:0,checkAgainst:0,collides:0,_killed:!1,slopeStanding:{min:(44).toRad(),max:(136).toRad()},init:function(j,
l,m){this.id=++ig.Entity._lastId;this.pos.x=this.last.x=j;this.pos.y=this.last.y=l;ig.merge(this,m)},reset:function(j,l,m){var n=this.constructor.prototype;this.pos.x=j;this.pos.y=l;this.last.x=j;this.last.y=l;this.vel.x=n.vel.x;this.vel.y=n.vel.y;this.accel.x=n.accel.x;this.accel.y=n.accel.y;this.health=n.health;this._killed=n._killed;this.standing=n.standing;this.type=n.type;this.checkAgainst=n.checkAgainst;this.collides=n.collides;ig.merge(this,m)},addAnim:function(j,l,m,n){if(!this.animSheet)throw"No animSheet to add the animation "+
j+" to.";l=new ig.Animation(this.animSheet,l,m,n);this.anims[j]=l;this.currentAnim||(this.currentAnim=l);return l},update:function(){this.last.x=this.pos.x;this.last.y=this.pos.y;this.vel.y+=ig.game.gravity*ig.system.tick*this.gravityFactor;this.vel.x=this.getNewVelocity(this.vel.x,this.accel.x,this.friction.x,this.maxVel.x);this.vel.y=this.getNewVelocity(this.vel.y,this.accel.y,this.friction.y,this.maxVel.y);var j=ig.game.collisionMap.trace(this.pos.x,this.pos.y,this.vel.x*ig.system.tick,this.vel.y*
ig.system.tick,this.size.x,this.size.y);this.handleMovementTrace(j);this.currentAnim&&this.currentAnim.update()},getNewVelocity:function(j,l,m,n){return l?(j+l*ig.system.tick).limit(-n,n):m?(l=m*ig.system.tick,0<j-l?j-l:0>j+l?j+l:0):j.limit(-n,n)},handleMovementTrace:function(j){this.standing=!1;j.collision.y&&(0<this.bounciness&&Math.abs(this.vel.y)>this.minBounceVelocity?this.vel.y*=-this.bounciness:(0<this.vel.y&&(this.standing=!0),this.vel.y=0));j.collision.x&&(this.vel.x=0<this.bounciness&&Math.abs(this.vel.x)>
this.minBounceVelocity?this.vel.x*-this.bounciness:0);if(j.collision.slope){var l=j.collision.slope;if(0<this.bounciness){var m=this.vel.x*l.nx+this.vel.y*l.ny;this.vel.x=(this.vel.x-2*l.nx*m)*this.bounciness;this.vel.y=(this.vel.y-2*l.ny*m)*this.bounciness}else m=(this.vel.x*l.x+this.vel.y*l.y)/(l.x*l.x+l.y*l.y),this.vel.x=l.x*m,this.vel.y=l.y*m,l=Math.atan2(l.x,l.y),l>this.slopeStanding.min&&l<this.slopeStanding.max&&(this.standing=!0)}this.pos=j.pos},draw:function(){this.currentAnim&&this.currentAnim.draw(this.pos.x-
this.offset.x-ig.game._rscreen.x,this.pos.y-this.offset.y-ig.game._rscreen.y)},kill:function(){ig.game.removeEntity(this)},receiveDamage:function(j){this.health-=j;0>=this.health&&this.kill()},touches:function(j){return!(this.pos.x>=j.pos.x+j.size.x||this.pos.x+this.size.x<=j.pos.x||this.pos.y>=j.pos.y+j.size.y||this.pos.y+this.size.y<=j.pos.y)},distanceTo:function(j){var l=this.pos.x+this.size.x/2-(j.pos.x+j.size.x/2);j=this.pos.y+this.size.y/2-(j.pos.y+j.size.y/2);return Math.sqrt(l*l+j*j)},angleTo:function(j){return Math.atan2(j.pos.y+
j.size.y/2-(this.pos.y+this.size.y/2),j.pos.x+j.size.x/2-(this.pos.x+this.size.x/2))},check:function(){},collideWith:function(){},ready:function(){},erase:function(){}});ig.Entity._lastId=0;ig.Entity.COLLIDES={NEVER:0,LITE:1,PASSIVE:2,ACTIVE:4,FIXED:8};ig.Entity.TYPE={NONE:0,A:1,B:2,BOTH:3};ig.Entity.checkPair=function(j,l){j.checkAgainst&l.type&&j.check(l);l.checkAgainst&j.type&&l.check(j);j.collides&&(l.collides&&j.collides+l.collides>ig.Entity.COLLIDES.ACTIVE)&&ig.Entity.solveCollision(j,l)};ig.Entity.solveCollision=
function(j,l){var m=null;if(j.collides==ig.Entity.COLLIDES.LITE||l.collides==ig.Entity.COLLIDES.FIXED)m=j;else if(l.collides==ig.Entity.COLLIDES.LITE||j.collides==ig.Entity.COLLIDES.FIXED)m=l;j.last.x+j.size.x>l.last.x&&j.last.x<l.last.x+l.size.x?(j.last.y<l.last.y?ig.Entity.seperateOnYAxis(j,l,m):ig.Entity.seperateOnYAxis(l,j,m),j.collideWith(l,"y"),l.collideWith(j,"y")):j.last.y+j.size.y>l.last.y&&j.last.y<l.last.y+l.size.y&&(j.last.x<l.last.x?ig.Entity.seperateOnXAxis(j,l,m):ig.Entity.seperateOnXAxis(l,
j,m),j.collideWith(l,"x"),l.collideWith(j,"x"))};ig.Entity.seperateOnXAxis=function(j,l,m){var n=j.pos.x+j.size.x-l.pos.x;m?(m.vel.x=-m.vel.x*m.bounciness+(j===m?l:j).vel.x,l=ig.game.collisionMap.trace(m.pos.x,m.pos.y,m==j?-n:n,0,m.size.x,m.size.y),m.pos.x=l.pos.x):(m=(j.vel.x-l.vel.x)/2,j.vel.x=-m,l.vel.x=m,m=ig.game.collisionMap.trace(j.pos.x,j.pos.y,-n/2,0,j.size.x,j.size.y),j.pos.x=Math.floor(m.pos.x),j=ig.game.collisionMap.trace(l.pos.x,l.pos.y,n/2,0,l.size.x,l.size.y),l.pos.x=Math.ceil(j.pos.x))};
ig.Entity.seperateOnYAxis=function(j,l,m){var n=j.pos.y+j.size.y-l.pos.y;if(m){l=j===m?l:j;m.vel.y=-m.vel.y*m.bounciness+l.vel.y;var p=0;m==j&&Math.abs(m.vel.y-l.vel.y)<m.minBounceVelocity&&(m.standing=!0,p=l.vel.x*ig.system.tick);j=ig.game.collisionMap.trace(m.pos.x,m.pos.y,p,m==j?-n:n,m.size.x,m.size.y);m.pos.y=j.pos.y;m.pos.x=j.pos.x}else ig.game.gravity&&(l.standing||0<j.vel.y)?(m=ig.game.collisionMap.trace(j.pos.x,j.pos.y,0,-(j.pos.y+j.size.y-l.pos.y),j.size.x,j.size.y),j.pos.y=m.pos.y,0<j.bounciness&&
j.vel.y>j.minBounceVelocity?j.vel.y*=-j.bounciness:(j.standing=!0,j.vel.y=0)):(m=(j.vel.y-l.vel.y)/2,j.vel.y=-m,l.vel.y=m,p=l.vel.x*ig.system.tick,m=ig.game.collisionMap.trace(j.pos.x,j.pos.y,p,-n/2,j.size.x,j.size.y),j.pos.y=m.pos.y,j=ig.game.collisionMap.trace(l.pos.x,l.pos.y,0,n/2,l.size.x,l.size.y),l.pos.y=j.pos.y)}});ig.baked=!0;
ig.module("impact.map").defines(function(){ig.Map=ig.Class.extend({tilesize:8,width:1,height:1,data:[[]],name:null,init:function(j,l){this.tilesize=j;this.data=l;this.height=l.length;this.width=l[0].length;this.pxWidth=this.width*this.tilesize;this.pxHeight=this.height*this.tilesize},getTile:function(j,l){var m=Math.floor(j/this.tilesize),n=Math.floor(l/this.tilesize);return 0<=m&&m<this.width&&0<=n&&n<this.height?this.data[n][m]:0},setTile:function(j,l,m){j=Math.floor(j/this.tilesize);l=Math.floor(l/
this.tilesize);0<=j&&j<this.width&&(0<=l&&l<this.height)&&(this.data[l][j]=m)}})});ig.baked=!0;
ig.module("impact.collision-map").requires("impact.map").defines(function(){ig.CollisionMap=ig.Map.extend({lastSlope:1,tiledef:null,init:function(j,l,p){this.parent(j,l);this.tiledef=p||ig.CollisionMap.defaultTileDef;for(var s in this.tiledef)s|0>this.lastSlope&&(this.lastSlope=s|0)},trace:function(j,l,p,s,A,v){var r={collision:{x:!1,y:!1,slope:!1},pos:{x:j,y:l},tile:{x:0,y:0}},u=Math.ceil(Math.max(Math.abs(p),Math.abs(s))/this.tilesize);if(1<u)for(var t=p/u,x=s/u,y=0;y<u&&(t||x)&&!(this._traceStep(r,
j,l,t,x,A,v,p,s,y),j=r.pos.x,l=r.pos.y,r.collision.x&&(p=t=0),r.collision.y&&(s=x=0),r.collision.slope);y++);else this._traceStep(r,j,l,p,s,A,v,p,s,0);return r},_traceStep:function(j,l,p,s,A,v,r,u,t,x){j.pos.x+=s;j.pos.y+=A;var y=0;if(s){var z=0<s?v:0,F=0>s?this.tilesize:0,y=Math.max(Math.floor(p/this.tilesize),0),H=Math.min(Math.ceil((p+r)/this.tilesize),this.height);s=Math.floor((j.pos.x+z)/this.tilesize);var M=Math.floor((l+z)/this.tilesize);if(0<x||s==M||0>M||M>=this.width)M=-1;if(0<=s&&s<this.width)for(var J=
y;J<H&&!(-1!=M&&(y=this.data[J][M],1<y&&y<=this.lastSlope&&this._checkTileDef(j,y,l,p,u,t,v,r,M,J)));J++)if(y=this.data[J][s],1==y||y>this.lastSlope||1<y&&this._checkTileDef(j,y,l,p,u,t,v,r,s,J)){if(1<y&&y<=this.lastSlope&&j.collision.slope)break;j.collision.x=!0;j.tile.x=y;l=j.pos.x=s*this.tilesize-z+F;u=0;break}}if(A){z=0<A?r:0;A=0>A?this.tilesize:0;y=Math.max(Math.floor(j.pos.x/this.tilesize),0);F=Math.min(Math.ceil((j.pos.x+v)/this.tilesize),this.width);J=Math.floor((j.pos.y+z)/this.tilesize);
H=Math.floor((p+z)/this.tilesize);if(0<x||J==H||0>H||H>=this.height)H=-1;if(0<=J&&J<this.height)for(s=y;s<F&&!(-1!=H&&(y=this.data[H][s],1<y&&y<=this.lastSlope&&this._checkTileDef(j,y,l,p,u,t,v,r,s,H)));s++)if(y=this.data[J][s],1==y||y>this.lastSlope||1<y&&this._checkTileDef(j,y,l,p,u,t,v,r,s,J)){if(1<y&&y<=this.lastSlope&&j.collision.slope)break;j.collision.y=!0;j.tile.y=y;j.pos.y=J*this.tilesize-z+A;break}}},_checkTileDef:function(j,l,p,s,A,v,r,u,t,x){var y=this.tiledef[l];if(!y)return!1;l=(y[2]-
y[0])*this.tilesize;var z=(y[3]-y[1])*this.tilesize,F=y[4];r=p+A+(0>z?r:0)-(t+y[0])*this.tilesize;u=s+v+(0<l?u:0)-(x+y[1])*this.tilesize;if(0<l*u-z*r){if(0>A*-z+v*l)return F;t=Math.sqrt(l*l+z*z);x=z/t;t=-l/t;var H=r*x+u*t,y=x*H,H=t*H;if(y*y+H*H>=A*A+v*v)return F||0.5>l*(u-v)-z*(r-A);j.pos.x=p+A-y;j.pos.y=s+v-H;j.collision.slope={x:l,y:z,nx:x,ny:t};return!0}return!1}});var j=1/3,l=2/3;ig.CollisionMap.defaultTileDef={5:[0,1,1,l,!0],6:[0,l,1,j,!0],7:[0,j,1,0,!0],3:[0,1,1,0.5,!0],4:[0,0.5,1,0,!0],2:[0,
1,1,0,!0],10:[0.5,1,1,0,!0],21:[0,1,0.5,0,!0],32:[l,1,1,0,!0],43:[j,1,l,0,!0],54:[0,1,j,0,!0],27:[0,0,1,j,!0],28:[0,j,1,l,!0],29:[0,l,1,1,!0],25:[0,0,1,0.5,!0],26:[0,0.5,1,1,!0],24:[0,0,1,1,!0],11:[0,0,0.5,1,!0],22:[0.5,0,1,1,!0],33:[0,0,j,1,!0],44:[j,0,l,1,!0],55:[l,0,1,1,!0],16:[1,j,0,0,!0],17:[1,l,0,j,!0],18:[1,1,0,l,!0],14:[1,0.5,0,0,!0],15:[1,1,0,0.5,!0],13:[1,1,0,0,!0],8:[0.5,1,0,0,!0],19:[1,1,0.5,0,!0],30:[j,1,0,0,!0],41:[l,1,j,0,!0],52:[1,1,l,0,!0],38:[1,l,0,1,!0],39:[1,j,0,l,!0],40:[1,0,
0,j,!0],36:[1,0.5,0,1,!0],37:[1,0,0,0.5,!0],35:[1,0,0,1,!0],9:[1,0,0.5,1,!0],20:[0.5,0,0,1,!0],31:[1,0,l,1,!0],42:[l,0,j,1,!0],53:[j,0,0,1,!0],12:[0,0,1,0,!1],23:[1,1,0,1,!1],34:[1,0,1,1,!1],45:[0,1,0,0,!1]};ig.CollisionMap.staticNoCollision={trace:function(j,l,p,s){return{collision:{x:!1,y:!1,slope:!1},pos:{x:j+p,y:l+s},tile:{x:0,y:0}}}}});ig.baked=!0;
ig.module("impact.background-map").requires("impact.map","impact.image").defines(function(){ig.BackgroundMap=ig.Map.extend({tiles:null,scroll:{x:0,y:0},distance:1,repeat:!1,tilesetName:"",foreground:!1,enabled:!0,preRender:!1,preRenderedChunks:null,chunkSize:512,debugChunks:!1,anims:{},init:function(j,l,m){this.parent(j,l);this.setTileset(m)},setTileset:function(j){this.tilesetName=j instanceof ig.Image?j.path:j;this.tiles=new ig.Image(this.tilesetName);this.preRenderedChunks=null},setScreenPos:function(j,
l){this.scroll.x=j/this.distance;this.scroll.y=l/this.distance},preRenderMapToChunks:function(){var j=this.width*this.tilesize*ig.system.scale,l=this.height*this.tilesize*ig.system.scale;this.chunkSize=Math.min(Math.max(j,l),this.chunkSize);var m=Math.ceil(j/this.chunkSize),n=Math.ceil(l/this.chunkSize);this.preRenderedChunks=[];for(var p=0;p<n;p++){this.preRenderedChunks[p]=[];for(var s=0;s<m;s++)this.preRenderedChunks[p][s]=this.preRenderChunk(s,p,s==m-1?j-s*this.chunkSize:this.chunkSize,p==n-1?
l-p*this.chunkSize:this.chunkSize)}},preRenderChunk:function(j,l,m,n){var p=m/this.tilesize/ig.system.scale+1,s=n/this.tilesize/ig.system.scale+1,A=j*this.chunkSize/ig.system.scale%this.tilesize,v=l*this.chunkSize/ig.system.scale%this.tilesize;j=Math.floor(j*this.chunkSize/this.tilesize/ig.system.scale);l=Math.floor(l*this.chunkSize/this.tilesize/ig.system.scale);var r=ig.$new("canvas");r.width=m;r.height=n;r.retinaResolutionEnabled=!1;n=r.getContext("2d");ig.System.scaleMode(r,n);m=ig.system.context;
ig.system.context=n;for(n=0;n<p;n++)for(var u=0;u<s;u++)if(n+j<this.width&&u+l<this.height){var t=this.data[u+l][n+j];t&&this.tiles.drawTile(n*this.tilesize-A,u*this.tilesize-v,t-1,this.tilesize)}ig.system.context=m;return r},draw:function(){this.tiles.loaded&&this.enabled&&(this.preRender?this.drawPreRendered():this.drawTiled())},drawPreRendered:function(){this.preRenderedChunks||this.preRenderMapToChunks();var j=ig.system.getDrawPos(this.scroll.x),l=ig.system.getDrawPos(this.scroll.y);if(this.repeat)var m=
this.width*this.tilesize*ig.system.scale,j=(j%m+m)%m,m=this.height*this.tilesize*ig.system.scale,l=(l%m+m)%m;var m=Math.max(Math.floor(j/this.chunkSize),0),n=Math.max(Math.floor(l/this.chunkSize),0),p=Math.ceil((j+ig.system.realWidth)/this.chunkSize),s=Math.ceil((l+ig.system.realHeight)/this.chunkSize),A=this.preRenderedChunks[0].length,v=this.preRenderedChunks.length;this.repeat||(p=Math.min(p,A),s=Math.min(s,v));for(var r=0;n<s;n++){for(var u=0,t=m;t<p;t++){var x=this.preRenderedChunks[n%v][t%A],
y=-j+t*this.chunkSize-u,z=-l+n*this.chunkSize-r;ig.system.context.drawImage(x,y,z);ig.Image.drawCount++;this.debugChunks&&(ig.system.context.strokeStyle="#f0f",ig.system.context.strokeRect(y,z,this.chunkSize,this.chunkSize));this.repeat&&(x.width<this.chunkSize&&y+x.width<ig.system.realWidth)&&(u+=this.chunkSize-x.width,p++)}this.repeat&&(x.height<this.chunkSize&&z+x.height<ig.system.realHeight)&&(r+=this.chunkSize-x.height,s++)}},drawTiled:function(){for(var j=0,l=null,m=(this.scroll.x/this.tilesize).toInt(),
n=(this.scroll.y/this.tilesize).toInt(),p=this.scroll.x%this.tilesize,s=this.scroll.y%this.tilesize,A=-p-this.tilesize,p=ig.system.width+this.tilesize-p,v=ig.system.height+this.tilesize-s,r=-1,s=-s-this.tilesize;s<v;r++,s+=this.tilesize){var u=r+n;if(u>=this.height||0>u){if(!this.repeat)continue;u=(u%this.height+this.height)%this.height}for(var t=-1,x=A;x<p;t++,x+=this.tilesize){j=t+m;if(j>=this.width||0>j){if(!this.repeat)continue;j=(j%this.width+this.width)%this.width}if(j=this.data[u][j])(l=this.anims[j-
1])?l.draw(x,s):this.tiles.drawTile(x,s,j-1,this.tilesize)}}}})});ig.baked=!0;
ig.module("impact.game").requires("impact.impact","impact.entity","impact.collision-map","impact.background-map").defines(function(){ig.Game=ig.Class.extend({clearColor:"#000000",gravity:0,screen:{x:0,y:0},_rscreen:{x:0,y:0},entities:[],namedEntities:{},collisionMap:ig.CollisionMap.staticNoCollision,backgroundMaps:[],backgroundAnims:{},autoSort:!1,sortBy:null,cellSize:64,_deferredKill:[],_levelToLoad:null,_doSortEntities:!1,staticInstantiate:function(){this.sortBy=this.sortBy||ig.Game.SORT.Z_INDEX;
ig.game=this;return null},loadLevel:function(j){this.screen={x:0,y:0};this.entities=[];this.namedEntities={};for(var l=0;l<j.entities.length;l++){var m=j.entities[l];this.spawnEntity(m.type,m.x,m.y,m.settings)}this.sortEntities();this.collisionMap=ig.CollisionMap.staticNoCollision;this.backgroundMaps=[];for(l=0;l<j.layer.length;l++)if(m=j.layer[l],"collision"==m.name)this.collisionMap=new ig.CollisionMap(m.tilesize,m.data);else{var n=new ig.BackgroundMap(m.tilesize,m.data,m.tilesetName);n.anims=this.backgroundAnims[m.tilesetName]||
{};n.repeat=m.repeat;n.distance=m.distance;n.foreground=!!m.foreground;n.preRender=!!m.preRender;n.name=m.name;this.backgroundMaps.push(n)}for(l=0;l<this.entities.length;l++)this.entities[l].ready()},loadLevelDeferred:function(j){this._levelToLoad=j},getMapByName:function(j){if("collision"==j)return this.collisionMap;for(var l=0;l<this.backgroundMaps.length;l++)if(this.backgroundMaps[l].name==j)return this.backgroundMaps[l];return null},getEntityByName:function(j){return this.namedEntities[j]},getEntitiesByType:function(j){j=
"string"===typeof j?ig.global[j]:j;for(var l=[],m=0;m<this.entities.length;m++){var n=this.entities[m];n instanceof j&&!n._killed&&l.push(n)}return l},spawnEntity:function(j,l,m,n){var p="string"===typeof j?ig.global[j]:j;if(!p)throw"Can't spawn entity of type "+j;j=new p(l,m,n||{});this.entities.push(j);j.name&&(this.namedEntities[j.name]=j);return j},sortEntities:function(){this.entities.sort(this.sortBy)},sortEntitiesDeferred:function(){this._doSortEntities=!0},removeEntity:function(j){j.name&&
delete this.namedEntities[j.name];j._killed=!0;j.type=ig.Entity.TYPE.NONE;j.checkAgainst=ig.Entity.TYPE.NONE;j.collides=ig.Entity.COLLIDES.NEVER;this._deferredKill.push(j)},run:function(){this.update();this.draw()},update:function(){this._levelToLoad&&(this.loadLevel(this._levelToLoad),this._levelToLoad=null);this.updateEntities();this.checkEntities();for(var j=0;j<this._deferredKill.length;j++)this._deferredKill[j].erase(),this.entities.erase(this._deferredKill[j]);this._deferredKill=[];if(this._doSortEntities||
this.autoSort)this.sortEntities(),this._doSortEntities=!1;for(var l in this.backgroundAnims){var j=this.backgroundAnims[l],m;for(m in j)j[m].update()}},updateEntities:function(){for(var j=0;j<this.entities.length;j++){var l=this.entities[j];l._killed||l.update()}},draw:function(){this.clearColor&&ig.system.clear(this.clearColor);this._rscreen.x=ig.system.getDrawPos(this.screen.x)/ig.system.scale;this._rscreen.y=ig.system.getDrawPos(this.screen.y)/ig.system.scale;var j;for(j=0;j<this.backgroundMaps.length;j++){var l=
this.backgroundMaps[j];if(l.foreground)break;l.setScreenPos(this.screen.x,this.screen.y);l.draw()}this.drawEntities();for(j;j<this.backgroundMaps.length;j++)l=this.backgroundMaps[j],l.setScreenPos(this.screen.x,this.screen.y),l.draw()},drawEntities:function(){for(var j=0;j<this.entities.length;j++)this.entities[j].draw()},checkEntities:function(){for(var j={},l=0;l<this.entities.length;l++){var m=this.entities[l];if(!(m.type==ig.Entity.TYPE.NONE&&m.checkAgainst==ig.Entity.TYPE.NONE&&m.collides==ig.Entity.COLLIDES.NEVER))for(var n=
{},p=Math.floor(m.pos.y/this.cellSize),s=Math.floor((m.pos.x+m.size.x)/this.cellSize)+1,A=Math.floor((m.pos.y+m.size.y)/this.cellSize)+1,v=Math.floor(m.pos.x/this.cellSize);v<s;v++)for(var r=p;r<A;r++)if(j[v])if(j[v][r]){for(var u=j[v][r],t=0;t<u.length;t++)m.touches(u[t])&&!n[u[t].id]&&(n[u[t].id]=!0,ig.Entity.checkPair(m,u[t]));u.push(m)}else j[v][r]=[m];else j[v]={},j[v][r]=[m]}}});ig.Game.SORT={Z_INDEX:function(j,l){return j.zIndex-l.zIndex},POS_X:function(j,l){return j.pos.x+j.size.x-(l.pos.x+
l.size.x)},POS_Y:function(j,l){return j.pos.y+j.size.y-(l.pos.y+l.size.y)}}});ig.baked=!0;
ig.module("plugins.patches.webkit-image-smoothing-patch").defines(function(){ig.System&&(ig.System.SCALE={CRISP:function(j,l){l.imageSmoothingEnabled=l.msImageSmoothingEnabled=l.mozImageSmoothingEnabled=l.oImageSmoothingEnabled=!1;j.style.imageRendering="-moz-crisp-edges";j.style.imageRendering="-o-crisp-edges";j.style.imageRendering="-webkit-optimize-contrast";j.style.imageRendering="crisp-edges";j.style.msInterpolationMode="nearest-neighbor"},SMOOTH:function(j,l){l.imageSmoothingEnabled=l.msImageSmoothingEnabled=
l.mozImageSmoothingEnabled=l.oImageSmoothingEnabled=!0;j.style.imageRendering="";j.style.msInterpolationMode=""}},ig.System.scaleMode=ig.System.SCALE.SMOOTH)});ig.baked=!0;
ig.module("plugins.patches.windowfocus-onMouseDown-patch").defines(function(){var j=!1;try{j=window.self!==window.top,!1===j&&(j=0<window.frames.length)}catch(l){j=!0}ig.Input.inject({keydown:function(l){var n=l.target.tagName;if(!("INPUT"==n||"TEXTAREA"==n))if(n="keydown"==l.type?l.keyCode:2==l.button?ig.KEY.MOUSE2:ig.KEY.MOUSE1,j&&0>n&&window.focus(),("touchstart"==l.type||"mousedown"==l.type)&&this.mousemove(l),n=this.bindings[n])this.actions[n]=!0,this.locks[n]||(this.presses[n]=!0,this.locks[n]=
!0),l.stopPropagation(),l.preventDefault()}})});ig.baked=!0;
ig.module("plugins.handlers.dom-handler").defines(function(){ig.DomHandler=ig.Class.extend({JQUERYAVAILABLE:!1,init:function(){this.JQUERYAVAILABLE=this._jqueryAvailable()},_jqueryAvailable:function(){return"undefined"!==typeof jQuery},addEvent:function(j,l,m,n){if(this.JQUERYAVAILABLE)j.on(l,m);else j.addEventListener(l,m,n)},create:function(j){return this.JQUERYAVAILABLE?$("<"+j+">"):ig.$new(j)},getElementByClass:function(j){return this.JQUERYAVAILABLE?$("."+j):document.getElementsByClassName(j)},
getElementById:function(j){return this.JQUERYAVAILABLE?0<$(j).length?$(j):null:ig.$(j)},appendChild:function(j,l){this.JQUERYAVAILABLE?j.append(l):j.appendChild(l)},appendToBody:function(j){this.JQUERYAVAILABLE?$("body").append(j):document.body.appendChild(j)},resize:function(j,l,m){if(this.JQUERYAVAILABLE)j.width(l.toFixed(2)),j.height(m.toFixed(2));else{var n=j.style.visibility;l="width:"+l.toFixed(2)+"px; height:"+m.toFixed(2)+"px;";this.attr(j,"style",l);j.style.visibility=n}},resizeOffsetLeft:function(j,
l,m,n){if(this.JQUERYAVAILABLE)j.width(l.toFixed(2)),j.height(m.toFixed(2)),j.css("left",n);else{var p=j.style.visibility;l="width:"+l.toFixed(2)+"px; height:"+m.toFixed(2)+"px; left: "+n.toFixed(2)+"px;";this.attr(j,"style",l);j.style.visibility=p}},css:function(j,l){if(this.JQUERYAVAILABLE)j.css(l);else{var m="",n;for(n in l)m+=n+":"+l[n]+";";this.attr(j,"style",m)}},getOffsets:function(j){return this.JQUERYAVAILABLE?(j=j.offset(),{left:j.left,top:j.top}):{left:j.offsetLeft,top:j.offsetTop}},attr:function(j,
l,m){if("undefined"===typeof m)return this.JQUERYAVAILABLE?j.attr(l):j.getAttribute(l);this.JQUERYAVAILABLE?j.attr(l,m):j.setAttribute(l,m)},show:function(j){this.JQUERYAVAILABLE?(j.show(),j.css("visibility","visible")):j&&(j.style?j.style.visibility="visible":j[0]&&(j[0].style.visibility="visible"))},hide:function(j){this.JQUERYAVAILABLE?(j.hide(),j.css("visibility","hidden")):j&&(j.style?j.style.visibility="hidden":j[0]&&(j[0].style.visibility="hidden"))},getQueryVariable:function(j){for(var l=
window.location.search.substring(1).split("&"),m=0;m<l.length;m++){var n=l[m].split("=");if(decodeURIComponent(n[0])==j)return decodeURIComponent(n[1])}},forcedDeviceDetection:function(){var j=this.getQueryVariable("device");if(j)switch(j){case "mobile":console.log("serving mobile version ...");ig.ua.mobile=!0;break;case "desktop":console.log("serving desktop version ...");ig.ua.mobile=!1;break;default:console.log("serving universal version ...")}else console.log("serving universal version ...")},
forcedDeviceRotation:function(){var j=this.getQueryVariable("force-rotate");if(j)switch(j){case "portrait":console.log("force rotate to portrait");window.orientation=0;break;case "landscape":console.log("force rotate to horizontal");window.orientation=90;break;default:alert("wrong command/type in param force-rotate. Defaulting value to portrait"),window.orientation=0}}})});ig.baked=!0;
ig.module("plugins.data.vector").defines(function(){Vector2=ig.Class.extend({x:null,y:null,valType:"number",init:function(j,l){typeof j===this.valType&&typeof l===this.valType&&(this.x=j,this.y=l)},row:function(j){typeof j===this.valType&&(this.y=j);return this.y},col:function(j){typeof j===this.valType&&(this.x=j);return this.x}})});ig.baked=!0;
ig.module("plugins.handlers.size-handler").requires("plugins.data.vector").defines(function(){ig.SizeHandler=ig.Class.extend({portraitMode:!0,desktop:{actualSize:new Vector2(window.innerWidth,window.innerHeight),actualResolution:new Vector2(480,640)},mobile:{actualSize:new Vector2(window.innerWidth,window.innerHeight),actualResolution:new Vector2(480,640)},windowSize:new Vector2(window.innerWidth,window.innerHeight),scaleRatioMultiplier:new Vector2(1,1),sizeRatio:new Vector2(1,1),scale:1,domHandler:null,
dynamicClickableEntityDivs:{},coreDivsToResize:["#canvas","#play","#orientate"],adsToResize:{MobileAdInGamePreroll:{"box-width":_SETTINGS.Ad.Mobile.Preroll.Width+2,"box-height":_SETTINGS.Ad.Mobile.Preroll.Height+20},MobileAdInGameEnd:{"box-width":_SETTINGS.Ad.Mobile.End.Width+2,"box-height":_SETTINGS.Ad.Mobile.End.Height+20},MobileAdInGamePreroll2:{"box-width":_SETTINGS.Ad.Mobile.Preroll.Width+2,"box-height":_SETTINGS.Ad.Mobile.Preroll.Height+20},MobileAdInGameEnd2:{"box-width":_SETTINGS.Ad.Mobile.End.Width+
2,"box-height":_SETTINGS.Ad.Mobile.End.Height+20},MobileAdInGamePreroll3:{"box-width":_SETTINGS.Ad.Mobile.Preroll.Width+2,"box-height":_SETTINGS.Ad.Mobile.Preroll.Height+20},MobileAdInGameEnd3:{"box-width":_SETTINGS.Ad.Mobile.End.Width+2,"box-height":_SETTINGS.Ad.Mobile.End.Height+20}},init:function(j){this.domHandler=j;if("undefined"===typeof j)throw"undefined Dom Handler for Size Handler";this.sizeCalcs();this.eventListenerSetup();this.samsungFix()},sizeCalcs:function(){this.windowSize=new Vector2(window.innerWidth,
window.innerHeight);if(ig.ua.mobile){this.mobile.actualSize=new Vector2(window.innerWidth,window.innerHeight);var j=new Vector2(this.mobile.actualResolution.x,this.mobile.actualResolution.y);this.scaleRatioMultiplier=new Vector2(this.mobile.actualSize.x/j.x,this.mobile.actualSize.y/j.y);var l=Math.min(this.scaleRatioMultiplier.x,this.scaleRatioMultiplier.y);this.mobile.actualSize.x=j.x*this.scaleRatioMultiplier.x;this.mobile.actualSize.y=j.y*this.scaleRatioMultiplier.y}else this.desktop.actualSize=
new Vector2(window.innerWidth,window.innerHeight),j=new Vector2(this.desktop.actualResolution.x,this.desktop.actualResolution.y),this.scaleRatioMultiplier=new Vector2(this.desktop.actualSize.x/j.x,this.desktop.actualSize.y/j.y),l=Math.min(this.scaleRatioMultiplier.x,this.scaleRatioMultiplier.y),this.desktop.actualSize.x=j.x*l,this.desktop.actualSize.y=j.y*l;this.sizeRatio.x=window.innerWidth/this.mobile.actualResolution.x;this.sizeRatio.y=window.innerHeight/this.mobile.actualResolution.y},resizeLayers:function(){for(var j=
0;j<this.coreDivsToResize.length;j++){var l=ig.domHandler.getElementById(this.coreDivsToResize[j]);ig.ua.mobile?ig.domHandler.resize(l,Math.floor(ig.sizeHandler.mobile.actualSize.x),Math.floor(ig.sizeHandler.mobile.actualSize.y)):ig.domHandler.resizeOffsetLeft(l,Math.floor(ig.sizeHandler.desktop.actualSize.x),Math.floor(ig.sizeHandler.desktop.actualSize.y),Math.floor(ig.sizeHandler.windowSize.x/2-ig.sizeHandler.desktop.actualSize.x/2))}for(var m in this.adsToResize){var j=ig.domHandler.getElementById("#"+
m),l=ig.domHandler.getElementById("#"+m+"-Box"),n=(window.innerWidth-this.adsToResize[m]["box-width"])/2+"px",p=(window.innerHeight-this.adsToResize[m]["box-height"])/2+"px";j&&ig.domHandler.css(j,{width:window.innerWidth,height:window.innerHeight});l&&ig.domHandler.css(l,{left:n,top:p})}for(m in this.dynamicClickableEntityDivs){l=Math.min(ig.sizeHandler.scaleRatioMultiplier.x,ig.sizeHandler.scaleRatioMultiplier.y);j=ig.domHandler.getElementById("#"+m);if(ig.ua.mobile)var s=this.dynamicClickableEntityDivs[m].entity_pos_x,
A=this.dynamicClickableEntityDivs[m].entity_pos_y,p=this.dynamicClickableEntityDivs[m].width,n=this.dynamicClickableEntityDivs[m].height,v=Math.floor(s*this.scaleRatioMultiplier.x)+"px",A=Math.floor(A*this.scaleRatioMultiplier.y)+"px",p=Math.floor(p*this.scaleRatioMultiplier.x)+"px",l=Math.floor(n*this.scaleRatioMultiplier.y)+"px";else var n=ig.domHandler.getElementById("#canvas"),n=ig.domHandler.getOffsets(n),v=n.left,r=n.top,s=this.dynamicClickableEntityDivs[m].entity_pos_x,A=this.dynamicClickableEntityDivs[m].entity_pos_y,
p=this.dynamicClickableEntityDivs[m].width,n=this.dynamicClickableEntityDivs[m].height,v=Math.floor(v+s*l)+"px",A=Math.floor(r+A*l)+"px",p=Math.floor(p*l)+"px",l=Math.floor(n*l)+"px";ig.domHandler.css(j,{"float":"left",position:"absolute",left:v,top:A,width:p,height:l,"z-index":3})}},resize:function(){this.sizeCalcs();this.resizeLayers()},reorient:function(){if(ig.ua.mobile){var j=this.portraitMode?window.innerHeight<window.innerWidth:window.innerHeight>window.innerWidth,l=this.domHandler.getElementById("#orientate"),
m=this.domHandler.getElementById("#game");j?(this.domHandler.show(l),this.domHandler.hide(m)):(this.domHandler.show(m),this.domHandler.hide(l))}ig.ua.mobile?(this.resize(),this.resizeAds()):this.resize()},resizeAds:function(){for(var j in this.adsToResize){var l=ig.domHandler.getElementById("#"+j),m=ig.domHandler.getElementById("#"+j+"-Box"),n=(window.innerWidth-this.adsToResize[j]["box-width"])/2+"px",p=(window.innerHeight-this.adsToResize[j]["box-height"])/2+"px";l&&ig.domHandler.css(l,{width:window.innerWidth,
height:window.innerHeight});m&&ig.domHandler.css(m,{left:n,top:p})}},samsungFix:function(){ig.ua.android&&(!(4.2>parseFloat(navigator.userAgent.slice(navigator.userAgent.indexOf("Android")+8,navigator.userAgent.indexOf("Android")+11)))&&!(0>navigator.userAgent.indexOf("GT"))&&!(0<navigator.userAgent.indexOf("Chrome"))&&!(0<navigator.userAgent.indexOf("Firefox")))&&(document.addEventListener("touchstart",function(j){j.preventDefault();return!1},!1),document.addEventListener("touchmove",function(j){j.preventDefault();
return!1},!1),document.addEventListener("touchend",function(j){j.preventDefault();return!1},!1))},eventListenerSetup:function(){window.addEventListener("resize",function(){this.reorient();window.scrollTo(0,1)}.bind(this),!1);window.addEventListener("orientationchange",function(){this.reorient();window.scrollTo(0,1)}.bind(this),!1);document.ontouchmove=function(j){window.scrollTo(0,1);j.preventDefault()}}})});ig.baked=!0;
ig.module("plugins.handlers.api-handler").defines(function(){ig.ApiHandler=ig.Class.extend({apiAvailable:{MJSPreroll:function(){ig.ua.mobile&&ig.domHandler.JQUERYAVAILABLE&&_SETTINGS&&_SETTINGS.Ad.Mobile.Preroll.Enabled&&MobileAdInGamePreroll.Initialize()},MJSHeader:function(){ig.ua.mobile&&ig.domHandler.JQUERYAVAILABLE&&_SETTINGS.Ad.Mobile.Header.Enabled&&MobileAdInGameHeader.Initialize()},MJSFooter:function(){ig.ua.mobile&&ig.domHandler.JQUERYAVAILABLE&&_SETTINGS.Ad.Mobile.Footer.Enabled&&MobileAdInGameFooter.Initialize()},
MJSEnd:function(){ig.ua.mobile&&ig.domHandler.JQUERYAVAILABLE&&_SETTINGS.Ad.Mobile.End.Enabled&&MobileAdInGameEnd.Initialize()}},run:function(j,l){if(this.apiAvailable[j])this.apiAvailable[j](l)}})});ig.baked=!0;
ig.module("plugins.audio.sound-player").defines(function(){SoundPlayer=ig.Class.extend({tagName:"SoundPlayer",stayMuteFlag:!1,debug:!1,init:function(){this.debug&&console.log(this.tagName)},play:function(j){this.debug&&console.log("play sound ",j)},stop:function(){this.debug&&console.log("stop sound ")},volume:function(){this.debug&&console.log("set volume")},mute:function(j){this.debug&&console.log("mute");"undefined"===typeof j?this.stayMuteFlag=!0:j&&(this.stayMuteFlag=!0)},unmute:function(j){this.debug&&
console.log("unmute");"undefined"===typeof j?this.stayMuteFlag=!1:j&&(this.stayMuteFlag=!1)}})});ig.baked=!0;
ig.module("plugins.audio.impact-music-player").requires("plugins.audio.sound-player").defines(function(){ImpactMusicPlayer=SoundPlayer.extend({tagName:"ImpactMusicPlayer",bgmPlaying:!1,soundList:{},init:function(j,l){this.parent(j,l);for(var m in j)this.soundList[m]=m,ig.music.add(j[m].path+".*",m);l&&l.loop&&(ig.music.loop=l.loop)},play:function(j){this.stayMuteFlag||(this.bgmPlaying=!0,"undefined"===typeof j?ig.music.play(j):ig.music.play())},stop:function(){this.bgmPlaying=!1;ig.music.pause()},
volume:function(j){console.log("impactmusic:",j);ig.music.volume=0>j?0:isNaN(j)?1:1<j?1:j},getVolume:function(){return ig.music.volume},mute:function(j){this.parent(j);this.bgmPlaying&&this.stop()},unmute:function(j){this.parent(j);this.play()}})});ig.baked=!0;
ig.module("plugins.audio.impact-sound-player").requires("plugins.audio.sound-player").defines(function(){ImpactSoundPlayer=SoundPlayer.extend({tagName:"ImpactSoundPlayer",soundList:{},init:function(j,l){this.parent(j,l);for(var m in j){var n=new ig.Sound(j[m].path+".*");this.soundList[m]=n}},play:function(j){this.stayMuteFlag||("object"===typeof j?(console.log(j+" exists"),j.play()):"string"===typeof j&&this.soundList[j].play())},stop:function(j){this.parent(j);j.stop()},volume:function(j){ig.soundManager.volume=
0>j?0:isNaN(j)?1:1<j?1:j},getVolume:function(){return ig.soundManager.volume},mute:function(j){this.parent(j);ig.Sound.enabled=!1},unmute:function(j){this.parent(j);ig.Sound.enabled=!0}})});ig.baked=!0;
ig.module("plugins.audio.howler-player").requires("plugins.audio.sound-player").defines(function(){HowlerPlayer=SoundPlayer.extend({tagName:"HowlerPlayer",soundList:{},init:function(j,l){this.parent(j,l);for(var m in j){var n=j[m].path,n=new Howl({src:[n+"."+ig.Sound.FORMAT.OGG.ext,n+"."+ig.Sound.FORMAT.MP3.ext]});this.soundList[m]=n}},play:function(j){this.stayMuteFlag||("object"===typeof j?j.play():"string"===typeof j&&this.soundList[j].play())},stop:function(j){this.parent(j);j.stop()},volume:function(j){for(var l in this.soundList){if(0>
j){this.soundList[l].volume(0);break}isNaN(j)?this.soundList[l].volume(1):1<j?this.soundList[l].volume(1):this.soundList[l].volume(j)}},getVolume:function(){for(var j in this.soundList)return this.soundList[j].volume()},mute:function(j){this.parent(j);Howler.mute(!0)},unmute:function(j){this.parent(j);Howler.mute(!1)}})});ig.baked=!0;
ig.module("plugins.audio.howler-music-player").requires("plugins.audio.sound-player").defines(function(){HowlerMusicPlayer=SoundPlayer.extend({tagName:"HowlerMusicPlayer",bgmPlaying:!1,soundList:{},init:function(j,l){this.parent(j,l);for(var m in j){var n=j[m].path,n=new Howl({src:[n+"."+ig.Sound.FORMAT.OGG.ext,n+"."+ig.Sound.FORMAT.MP3.ext],loop:!0,autoplay:!1,onend:function(){}.bind(this)});this.soundList[m]=n}},play:function(j){if(!this.stayMuteFlag&&!this.bgmPlaying)if("object"===typeof j)this.bgmPlaying=
!0,j.play();else if("string"===typeof j)this.bgmPlaying=!0,this.soundList[j].play();else for(var l in this.soundList){this.soundList[l].play();this.bgmPlaying=!0;break}},stop:function(j){this.parent(j);if(this.bgmPlaying){for(var l in this.soundList)this.soundList[l].stop();this.bgmPlaying=!1}},volume:function(j){for(var l in this.soundList){if(0>j){this.soundList[l].volume(0);break}isNaN(j)?this.soundList[l].volume(1):1<j?this.soundList[l].volume(1):this.soundList[l].volume(j)}},getVolume:function(){for(var j in this.soundList)return this.soundList[j].volume()},
mute:function(j){this.parent(j);Howler.mute()},unmute:function(j){this.parent(j);Howler.unmute()}})});ig.baked=!0;
ig.module("plugins.audio.jukebox-player").requires("plugins.audio.sound-player").defines(function(){JukeboxPlayer=SoundPlayer.extend({tagName:"JukeboxPlayer",bgmPlaying:!1,soundList:{},jukeboxPlayer:null,pausePosition:0,premuteVolume:0,minVolume:0.001,init:function(j,l){this.parent(j,l);for(var m in j){this.soundList[m]=m;var n=j[m].path;this.jukeboxPlayer=new jukebox.Player({resources:[n+"."+ig.Sound.FORMAT.OGG.ext,n+"."+ig.Sound.FORMAT.MP3.ext],autoplay:!1,spritemap:{music:{start:j[m].startMp3,
end:j[m].endMp3,loop:!0}}})}},play:function(){this.stayMuteFlag||(this.bgmPlaying=!0,this.pausePosition?(console.log("resume"),this.jukeboxPlayer.resume(this.pausePosition)):(console.log("play"),this.jukeboxPlayer.play(this.jukeboxPlayer.settings.spritemap.music.start,!0)),this.premuteVolume=this.getVolume())},stop:function(){this.bgmPlaying=!1;this.pausePosition=this.jukeboxPlayer.pause()},volume:function(j){console.log("jukebox:",j);0>=j?this.jukeboxPlayer.setVolume(this.minVolume):isNaN(j)?this.jukeboxPlayer.setVolume(1):
1<j?this.jukeboxPlayer.setVolume(1):this.jukeboxPlayer.setVolume(j)},getVolume:function(){return this.jukeboxPlayer.getVolume()},mute:function(j){this.parent(j);this.bgmPlaying&&(console.log("jukebox",this.premuteVolume),this.stayMuteFlag||(this.premuteVolume=this.getVolume()),this.jukeboxPlayer.pause(),this.jukeboxPlayer.setVolume(this.minVolume))},unmute:function(j){this.parent(j);this.stayMuteFlag||(console.log("jukebox",this.premuteVolume),this.jukeboxPlayer.setVolume(this.premuteVolume),this.jukeboxPlayer.resume())}})});
ig.baked=!0;
ig.module("plugins.audio.webaudio-music-player").requires("plugins.audio.sound-player").defines(function(){WebaudioMusicPlayer=SoundPlayer.extend({tagName:"WebaudioMusicPlayer",bgmPlaying:!1,isSupported:!1,muteFlag:!1,pausedTime:0,webaudio:null,useHTML5Audio:!1,audio:null,inactiveAudio:null,codecs:null,_volume:1,soundList:{},init:function(j){this.webaudio={compatibility:{},gainNode:null,buffer:null,source_loop:{},source_once:{}};try{this.AudioContext=window.AudioContext||window.webkitAudioContext,this.webaudio.context=
new this.AudioContext,this.isSupported=!0}catch(l){console.log("Web Audio API not supported in this browser."),this.webaudio=null,this.useHTML5Audio=!0}if(this.useHTML5Audio)if("undefined"!==typeof Audio)try{new Audio}catch(m){this.useHTML5Audio=!1}else this.useHTML5Audio=!1;this.useHTML5Audio&&(this.audio=new Audio,this.isSupported=!0,this.initHTML5Audio(j));if(!this.isSupported)return null;this.webaudio&&this.initWebAudio(j)},initWebAudio:function(j){ig.ua.iOS&&this.initIOSWebAudioUnlock();this.webaudio.gainNode=
this.webaudio.context.createGain();this.webaudio.gainNode.connect(this.webaudio.context.destination);this.webaudio.gainNode.gain.value=this._volume;var l="start",m="stop",n=this.webaudio.context.createBufferSource();"function"!==typeof n.start&&(l="noteOn");this.webaudio.compatibility.start=l;"function"!==typeof n.stop&&(m="noteOff");this.webaudio.compatibility.stop=m;for(var p in j){this.soundList[p]=p;l=j[p].path;j=l+"."+ig.Sound.FORMAT.MP3.ext;var s=l+"."+ig.Sound.FORMAT.OGG.ext;ig.ua.mobile?ig.ua.iOS&&
(s=j):(l=navigator.userAgent.toLowerCase(),-1!=l.indexOf("safari")&&-1>=l.indexOf("chrome")&&(s=j));var A=new XMLHttpRequest;A.open("GET",s,!0);A.responseType="arraybuffer";A.onload=function(){this.webaudio.context.decodeAudioData(A.response,function(j){this.webaudio.buffer=j;this.webaudio.source_loop={};this.bgmPlaying?this.play():this.stop()}.bind(this),function(){console.log('Error decoding audio "'+s+'".')})}.bind(this);A.send();break}},initIOSWebAudioUnlock:function(){if(this.webaudio){webaudio=
this.webaudio;var j=function(){var l=webaudio.context,m=l.createBuffer(1,1,22050),n=l.createBufferSource();n.buffer=m;n.connect(l.destination);"undefined"===typeof n.start?n.noteOn(0):n.start(0);setTimeout(function(){(n.playbackState===n.PLAYING_STATE||n.playbackState===n.FINISHED_STATE)&&window.removeEventListener("touchend",j,!1)},0)};window.addEventListener("touchend",j,!1)}},initHTML5Audio:function(j){if(this.useHTML5Audio&&this.audio){var l=this.audio;this.codecs={};this.codecs={mp3:!!l.canPlayType("audio/mpeg;").replace(/^no$/,
""),opus:!!l.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!l.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!l.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!l.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(l.canPlayType("audio/x-m4a;")||l.canPlayType("audio/m4a;")||l.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(l.canPlayType("audio/x-mp4;")||l.canPlayType("audio/mp4;")||l.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!l.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,
"")};this.is={ff:Boolean(null!=window.mozInnerScreenX&&/firefox/.test(navigator.userAgent.toLowerCase())),ie:Boolean(document.all&&!window.opera),opera:Boolean(window.opera),chrome:Boolean(window.chrome),safari:Boolean(!window.chrome&&/safari/.test(navigator.userAgent.toLowerCase())&&window.getComputedStyle&&!window.globalStorage&&!window.opera)};this.playDelay=-60;this.stopDelay=30;this.is.chrome&&(this.playDelay=-25);this.is.chrome&&(this.stopDelay=25);this.is.ff&&(this.playDelay=-25);this.is.ff&&
(this.stopDelay=85);this.is.opera&&(this.playDelay=5);this.is.opera&&(this.stopDelay=0);for(var m in j){this.soundList[m]=m;var n=j[m].path,l=n+"."+ig.Sound.FORMAT.OGG.ext,n=n+"."+ig.Sound.FORMAT.MP3.ext,p=null;this.codecs[ig.Sound.FORMAT.OGG.ext.toLowerCase()]?p=l:this.codecs[ig.Sound.FORMAT.MP3.ext.toLowerCase()]&&(p=n);if(p){ig.ua.mobile?ig.ua.iOS&&(p=n):(j=navigator.userAgent.toLowerCase(),-1!=j.indexOf("safari")&&-1>=j.indexOf("chrome")&&(p=n));this.audio.addEventListener("error",function(){this.audio.error&&
4===this.audio.error.code&&(this.isSupported=!1)},!1);this.audio.src=p;this.audio._pos=0;this.audio.preload="auto";this.audio.volume=this._volume;this.inactiveAudio=new Audio;this.inactiveAudio.src=p;this.inactiveAudio._pos=0;this.inactiveAudio.preload="auto";this.inactiveAudio.volume=this._volume;this.inactiveAudio.load();var s=function(){this._duration=this.audio.duration;this._loaded||(this._loaded=!0);this.bgmPlaying?this.play():this.stop();this.audio.removeEventListener("canplaythrough",s,!1)}.bind(this);
this.audio.addEventListener("canplaythrough",s,!1);this.audio.load();break}}}},play:function(j){if(this.isSupported)if(this.bgmPlaying=!0,this.webaudio)if(this.webaudio.buffer){if(!this.muteFlag&&(this.bgmPlaying=!0,!this.webaudio.source_loop._playing)){this.webaudio.source_loop=this.webaudio.context.createBufferSource();this.webaudio.source_loop.buffer=this.webaudio.buffer;this.webaudio.source_loop.loop=!0;this.webaudio.source_loop.connect(this.webaudio.gainNode);isNaN(j)&&(j=0,this.pausedTime&&
(j=this.pausedTime));this.webaudio.source_loop._startTime=this.webaudio.context.currentTime;if("noteOn"===this.webaudio.compatibility.start)this.webaudio.source_once=this.webaudio.context.createBufferSource(),this.webaudio.source_once.buffer=this.webaudio.buffer,this.webaudio.source_once.connect(this.webaudio.gainNode),this.webaudio.source_once.noteGrainOn(0,j,this.webaudio.buffer.duration-j),this.webaudio.source_loop[this.webaudio.compatibility.start](this.webaudio.context.currentTime+(this.webaudio.buffer.duration-
j));else this.webaudio.source_loop[this.webaudio.compatibility.start](0,j);this.webaudio.source_loop._playing=!0}}else this.bgmPlaying=!0;else if(this.audio){var l=this.audio;if(!this.muteFlag){this.bgmPlaying=!0;isNaN(j)&&(j=0,this.pausedTime&&(j=this.pausedTime));var m=this._duration-j;this._onEndTimer&&(clearTimeout(this._onEndTimer),this._onEndTimer=null);this._onEndTimer=setTimeout(function(){this.audio.currentTime=0;this.audio.pause();this.pausedTime=0;if(this.inactiveAudio){var j=this.audio;
this.audio=this.inactiveAudio;this.inactiveAudio=j}this.play()}.bind(this),1E3*m+this.playDelay);4===l.readyState||!l.readyState&&navigator.isCocoonJS?(l.readyState=4,l.currentTime=j,l.muted=this.muteFlag||l.muted,l.volume=this._volume,setTimeout(function(){l.play()},0)):(clearTimeout(this._onEndTimer),this._onEndTimer=null,function(){var j=function(){this.play();l.removeEventListener("canplaythrough",j,!1)}.bind(this);l.addEventListener("canplaythrough",j,!1)}())}}},stop:function(){this.bgmPlaying=
!1;if(this.isSupported)if(this.webaudio){if(this.webaudio.source_loop._playing&&(this.webaudio.source_loop[this.webaudio.compatibility.stop](0),this.webaudio.source_loop._playing=!1,this.pausedTime+=this.webaudio.context.currentTime-this.webaudio.source_loop._startTime,this.pausedTime%=this.webaudio.source_loop.buffer.duration,this.webaudio.source_loop._startTime=0,"noteOn"===this.webaudio.compatibility.start))this.webaudio.source_once[this.webaudio.compatibility.stop](0)}else if(this.audio){var j=
this.audio;this.pausedTime=j.currentTime;j.currentTime=0;j.pause();clearTimeout(this._onEndTimer);this._onEndTimer=null}},volume:function(j){this.isSupported&&(this._volume=j,0>this._volume?this._volume=0:1<this._volume&&(this._volume=1),this.webaudio?this.webaudio.gainNode&&(this.webaudio.gainNode.gain.value=this._volume):this.audio&&(this.audio.volume=this._volume,this.inactiveAudio&&(this.inactiveAudio.volume=this._volume)))},getVolume:function(){return!this.isSupported?0:this._volume},mute:function(j){this.parent(j);
!1==this.muteFlag&&(this.muteFlag=!0,this.bgmPlaying&&(this.stop(),this.bgmPlaying=!0))},unmute:function(j){this.parent(j);!this.stayMuteFlag&&!0==this.muteFlag&&(this.muteFlag=!1,this.bgmPlaying&&this.play())}})});ig.baked=!0;
ig.module("plugins.audio.sound-info").defines(function(){SoundInfo=ig.Class.extend({FORMATS:{OGG:".ogg",MP3:".mp3"},sfx:{kittyopeningSound:{path:"media/audio/opening/kittyopening"},staticSound:{path:"media/audio/play/static"},openingSound:{path:"media/audio/opening/opening"},tile:{path:"media/audio/play/tile"},button:{path:"media/audio/play/button"},hint:{path:"media/audio/play/hint"},win:{path:"media/audio/play/win"},ballroll:{path:"media/audio/play/ballroll"},ding1:{path:"media/audio/play/ding1"},
ding2:{path:"media/audio/play/ding2"},ding3:{path:"media/audio/play/ding3"},enddialog:{path:"media/audio/play/end-dialog"}},bgm:{background:{path:"media/audio/bgm",startOgg:0,endOgg:46.106,startMp3:0,endMp3:46.106}}})});ig.baked=!0;
ig.module("plugins.audio.sound-handler").requires("plugins.audio.impact-music-player","plugins.audio.impact-sound-player","plugins.audio.howler-player","plugins.audio.howler-music-player","plugins.audio.jukebox-player","plugins.audio.webaudio-music-player","plugins.audio.sound-info").defines(function(){ig.SoundHandler=ig.Class.extend({bgmPlayer:null,sfxPlayer:null,focusBlurMute:!1,soundInfo:new SoundInfo,init:function(){console.log("Initiating sound handler");this.initWindowHandler();ig.ua.mobile?
(this.initPowerButtonFix(),this.bgmPlayer=new WebaudioMusicPlayer(this.soundInfo.bgm,{loop:!0}),this.bgmPlayer.isSupported||(this.bgmPlayer=new JukeboxPlayer(this.soundInfo.bgm,{loop:!0}))):(this.bgmPlayer=new WebaudioMusicPlayer(this.soundInfo.bgm,{loop:!0}),this.bgmPlayer.isSupported||(this.bgmPlayer=new ImpactMusicPlayer(this.soundInfo.bgm,{loop:!0})));this.sfxPlayer=new HowlerPlayer(this.soundInfo.sfx)},unlockWebAudio:function(){Howler&&(Howler.ctx&&"running"!==Howler.ctx.state&&Howler.ctx.resume(),
Howler._audioUnlocked||"function"===typeof Howler._unlockAudio&&Howler._unlockAudio());ig&&ig.webaudio_ctx&&ig.webaudio_ctx.state&&"running"!==ig.webaudio_ctx.state&&ig.webaudio_ctx.resume();this.bgmPlayer.webaudio&&this.bgmPlayer.webaudio.context&&this.bgmPlayer.webaudio.context.state&&"running"!==this.bgmPlayer.webaudio.context.state&&this.bgmPlayer.webaudio.context.resume();this.miningPlayer.webaudio&&this.miningPlayer.webaudio.context&&this.miningPlayer.webaudio.context.state&&"running"!==this.miningPlayer.webaudio.context.state&&
this.miningPlayer.webaudio.context.resume()},checkBGM:function(){return this.bgmPlayer.stayMuteFlag},checkSFX:function(){return this.sfxPlayer.stayMuteFlag},muteSFX:function(j){this.sfxPlayer&&this.sfxPlayer.mute(j)},muteBGM:function(j){this.bgmPlayer&&this.bgmPlayer.mute(j)},unmuteSFX:function(j){this.sfxPlayer&&this.sfxPlayer.unmute(j)},unmuteBGM:function(j){this.bgmPlayer&&this.bgmPlayer.unmute(j)},muteAll:function(j){this.muteSFX(j);this.muteBGM(j)},unmuteAll:function(j){this.unmuteSFX(j);this.unmuteBGM(j)},
forceMuteAll:function(){this.focusBlurMute||this.muteAll(!1);this.focusBlurMute=!0},forceUnMuteAll:function(){this.focusBlurMute&&(this.unmuteAll(!1),this.focusBlurMute=!1)},initWindowHandler:function(){"true"===ig.domHandler.getQueryVariable("webview")?($(window).focus(function(){ig.soundHandler&&ig.soundHandler.forceUnMuteAll()}),$(window).blur(function(){ig.soundHandler&&ig.soundHandler.forceMuteAll()})):(window.onfocus=function(){ig.soundHandler&&ig.soundHandler.forceUnMuteAll()},window.onblur=
function(){ig.soundHandler&&ig.soundHandler.forceMuteAll()})},initPowerButtonFix:function(){var j=this.getHiddenProp();j&&(j=j.replace(/[H|h]idden/,"")+"visibilitychange",document.addEventListener(j,this.visChange));window.addEventListener("pagehide",function(){ig.soundHandler&&ig.soundHandler.forceMuteAll()},!1);window.addEventListener("pageshow",function(){ig.soundHandler&&ig.soundHandler.forceUnMuteAll()},!1)},getHiddenProp:function(){var j=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";
for(var l=0;l<j.length;l++)if(j[l]+"Hidden"in document)return j[l]+"Hidden";return null},isHidden:function(){var j=this.getHiddenProp();return!j?!1:document[j]},visChange:function(){ig.soundHandler.isHidden()?ig.soundHandler&&ig.soundHandler.forceMuteAll():ig.soundHandler&&ig.soundHandler.forceUnMuteAll()},saveVolume:function(){this.sfxPlayer&&ig.game.io.storageSet("soundVolume",this.sfxPlayer.getVolume());this.bgmPlayer&&ig.game.io.storageSet("musicVolume",this.bgmPlayer.getVolume())},forceLoopBGM:function(){var j;
if(!this.focusBlurMute&&this.bgmPlayer.bgmPlaying&&this.bgmPlayer){var l=this.bgmPlayer.jukeboxPlayer;if(l){null!=window.mozInnerScreenX&&/firefox/.test(navigator.userAgent.toLowerCase());j=Boolean(window.chrome);!window.chrome&&/safari/.test(navigator.userAgent.toLowerCase());var m=0.1;ig.ua.mobile&&(m=0.115,ig.ua.android&&(m=0.45,j&&(m=0.3)));l.settings.spritemap.music&&(j=l.settings.spritemap.music.end-m,l.getCurrentTime()>=j&&(j=l.settings.spritemap.music.start,ig.ua.android?this.forcelooped||
(l.play(j,!0),this.forcelooped=!0,setTimeout(function(){ig.soundHandler.forcelooped=!1},m)):l.setCurrentTime(j)))}else"ImpactMusicPlayer"==this.bgmPlayer.tagName&&(null!=window.mozInnerScreenX&&/firefox/.test(navigator.userAgent.toLowerCase()),j=Boolean(window.chrome),!window.chrome&&/safari/.test(navigator.userAgent.toLowerCase()),m=0.1,ig.ua.mobile&&(m=0.115,ig.ua.android&&(m=0.45,j&&(m=0.3))),l=0,"mp3"==ig.soundManager.format.ext&&(l=0.05),ig.music.currentTrack&&(j=ig.music.currentTrack.duration-
m,ig.music.currentTrack.currentTime>=j&&(ig.ua.android?this.forcelooped||(ig.music.currentTrack.pause(),ig.music.currentTrack.currentTime=l,ig.music.currentTrack.play(),this.forcelooped=!0,setTimeout(function(){ig.soundHandler.forcelooped=!1},m)):ig.music.currentTrack.currentTime=l)))}}})});ig.baked=!0;
ig.module("plugins.io.storage").defines(function(){ig.Storage=ig.Class.extend({staticInstantiate:function(){return!ig.Storage.instance?null:ig.Storage.instance},init:function(){ig.Storage.instance=this},isCapable:function(){return"undefined"!==typeof window.localStorage},isSet:function(j){return null!==this.get(j)},initUnset:function(j,l){null===this.get(j)&&this.set(j,l)},get:function(j){if(!this.isCapable())return null;try{return JSON.parse(localStorage.getItem(j))}catch(l){return window.localStorage.getItem(j)}},
getInt:function(j){return~~this.get(j)},getFloat:function(j){return parseFloat(this.get(j))},getBool:function(j){return!!this.get(j)},key:function(j){return this.isCapable()?window.localStorage.key(j):null},set:function(j,l){if(!this.isCapable())return null;try{window.localStorage.setItem(j,JSON.stringify(l))}catch(m){console.log(m)}},setHighest:function(j,l){l>this.getFloat(j)&&this.set(j,l)},remove:function(j){if(!this.isCapable())return null;window.localStorage.removeItem(j)},clear:function(){if(!this.isCapable())return null;
window.localStorage.clear()}})});ig.baked=!0;ig.module("plugins.io.mouse").defines(function(){Mouse=ig.Class.extend({bindings:{click:[ig.KEY.MOUSE1]},init:function(){ig.input.initMouse();for(var j in this.bindings){this[j]=j;for(var l=0;l<this.bindings[j].length;l++)ig.input.bind(this.bindings[j][l],j)}},getPos:function(){if(ig.ua.mobile)var j=ig.input.mouse.x/ig.sizeHandler.sizeRatio.x,l=ig.input.mouse.y/ig.sizeHandler.sizeRatio.y;else j=ig.input.mouse.x,l=ig.input.mouse.y;return new Vector2(j,l)}})});
ig.baked=!0;ig.module("plugins.io.keyboard").defines(function(){Keyboard=ig.Class.extend({bindings:{jump:[ig.KEY.W,ig.KEY.UP_ARROW],moveright:[ig.KEY.D,ig.KEY.RIGHT_ARROW],moveleft:[ig.KEY.A,ig.KEY.LEFT_ARROW],shoot:[ig.KEY.S,ig.KEY.DOWN_ARROW,ig.KEY.SPACE]},init:function(){for(var j in this.bindings){this[j]=j;for(var l=0;l<this.bindings[j].length;l++)ig.input.bind(this.bindings[j][l],j)}}})});ig.baked=!0;
ig.module("plugins.io.gamepad-input").defines(function(){ig.PADKEY={BUTTON_0:0,PADBUTTON_1:1,BUTTON_2:2,BUTTON_3:3,BUTTON_LEFT_BUMPER:4,BUTTON_RIGHT_BUMPER:5,BUTTON_LEFT_TRIGGER:6,BUTTON_RIGHT_TRIGGER:7,BUTTON_LEFT_JOYSTICK:10,BUTTON_RIGHT_JOYSTICK:11,BUTTON_DPAD_UP:12,BUTTON_DPAD_DOWN:13,BUTTON_DPAD_LEFT:14,BUTTON_DPAD_RIGHT:15,BUTTON_MENU:16,AXIS_LEFT_JOYSTICK_X:0,AXIS_LEFT_JOYSTICK_Y:1,AXIS_RIGHT_JOYSTICK_X:2,AXIS_RIGHT_JOYSTICK_Y:3};ig.GamepadInput=ig.Class.extend({isInit:!1,isSupported:!1,list:[],
bindings:{},states:{},presses:{},releases:{},downLocks:{},upLocks:{},leftStick:{x:0,y:0},rightStick:{x:0,y:0},start:function(){if(!this.isInit){this.isInit=!0;var j=navigator.getGamepads||navigator.webkitGetGamepads;j&&(!navigator.getGamepads&&navigator.webkitGetGamepads&&(navigator.getGamepads=navigator.webkitGetGamepads),this.list=navigator.getGamepads());this.isSupported=j}},isAvailable:function(){return this.isInit&&this.isSupported},buttonPressed:function(j){return"object"==typeof j?j.pressed:
1==j},buttonDown:function(j){if(j=this.bindings[j])this.states[j]=!0,this.downLocks[j]||(this.presses[j]=!0,this.downLocks[j]=!0)},buttonUp:function(j){if((j=this.bindings[j])&&this.downLocks[j]&&!this.upLocks[j])this.states[j]=!1,this.releases[j]=!0,this.upLocks[j]=!0},clearPressed:function(){for(var j in this.releases)this.states[j]=!1,this.downLocks[j]=!1;this.releases={};this.presses={};this.upLocks={}},bind:function(j,l){this.bindings[j]=l},unbind:function(j){this.releases[this.bindings[j]]=
!0;this.bindings[j]=null},unbindAll:function(){this.bindings={};this.states={};this.presses={};this.releases={};this.downLocks={};this.upLocks={}},state:function(j){return this.states[j]},pressed:function(j){return this.presses[j]},released:function(j){return this.releases[j]},clamp:function(j,l,m){return j<l?l:j>m?m:j},pollGamepads:function(){if(this.isSupported){this.leftStick.x=0;this.leftStick.y=0;this.rightStick.x=0;this.rightStick.y=0;this.list=navigator.getGamepads();for(var j in this.bindings){for(var l=
!1,m=0;m<this.list.length;m++){var n=this.list[m];if(n&&n.buttons&&this.buttonPressed(n.buttons[j])){l=!0;break}}l?this.buttonDown(j):this.buttonUp(j)}for(m=0;m<this.list.length;m++)if((n=this.list[m])&&n.axes){j=n.axes[ig.GAMEPADINPUT.AXIS_LEFT_JOYSTICK_X];var l=n.axes[ig.GAMEPADINPUT.AXIS_LEFT_JOYSTICK_Y],p=n.axes[ig.GAMEPADINPUT.AXIS_RIGHT_JOYSTICK_X],n=n.axes[ig.GAMEPADINPUT.AXIS_RIGHT_JOYSTICK_Y];this.leftStick.x+=isNaN(j)?0:j;this.leftStick.y+=isNaN(l)?0:l;this.rightStick.x+=isNaN(p)?0:p;this.rightStick.y+=
isNaN(n)?0:n}0<this.list.length&&(this.leftStick.x=this.clamp(this.leftStick.x,-1,1),this.leftStick.y=this.clamp(this.leftStick.y,-1,1),this.rightStick.x=this.clamp(this.rightStick.x,-1,1),this.rightStick.y=this.clamp(this.rightStick.y,-1,1))}}})});ig.baked=!0;
ig.module("plugins.io.gamepad").requires("plugins.io.gamepad-input").defines(function(){Gamepad=ig.Class.extend({bindings:{padJump:[ig.PADKEY.BUTTON_0]},init:function(){ig.gamepadInput.start();for(var j in this.bindings)for(var l=0;l<this.bindings[j].length;l++)ig.gamepadInput.bind(this.bindings[j][l],j)},press:function(){},held:function(){},release:function(){}})});ig.baked=!0;
ig.module("plugins.io.multitouch").defines(function(){Multitouch=ig.Class.extend({init:function(){ig.multitouchInput.start()},getTouchesPos:function(){if(ig.ua.mobile){if(0<ig.multitouchInput.touches.length){for(var j=[],l=0;l<ig.multitouchInput.touches.length;l++){var m=ig.multitouchInput.touches[l];j.push({x:m.x,y:m.y})}return j}return null}}})});ig.baked=!0;
ig.module("plugins.io.multitouch-input").defines(function(){ig.MultitouchInput=ig.Class.extend({isStart:!1,touches:[],multitouchCapable:!1,lastEventUp:null,start:function(){this.isStart||(this.isStart=!0,navigator.maxTouchPoints&&1<navigator.maxTouchPoints&&(this.multitouchCapable=!0),ig.ua.touchDevice&&(window.navigator.msPointerEnabled&&(ig.system.canvas.addEventListener("MSPointerDown",this.touchdown.bind(this),!1),ig.system.canvas.addEventListener("MSPointerUp",this.touchup.bind(this),!1),ig.system.canvas.addEventListener("MSPointerMove",
this.touchmove.bind(this),!1),ig.system.canvas.style.msContentZooming="none",ig.system.canvas.style.msTouchAction="none"),ig.system.canvas.addEventListener("touchstart",this.touchdown.bind(this),!1),ig.system.canvas.addEventListener("touchend",this.touchup.bind(this),!1),ig.system.canvas.addEventListener("touchmove",this.touchmove.bind(this),!1)))},touchmove:function(j){if(ig.ua.touchDevice){var l=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth,m=parseInt(ig.system.canvas.offsetHeight)||
ig.system.realHeight,l=ig.system.scale*(l/ig.system.realWidth),m=ig.system.scale*(m/ig.system.realHeight);if(j.touches){for(;0<this.touches.length;)this.touches.pop();!this.multitouchCapable&&1<j.touches.length&&(this.multitouchCapable=!0);var n={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(n=ig.system.canvas.getBoundingClientRect());for(var p=0;p<j.touches.length;p++){var s=j.touches[p];s&&this.touches.push({x:(s.clientX-n.left)/l,y:(s.clientY-n.top)/m})}}else this.windowMove(j)}},touchdown:function(j){var l=
parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth,m=parseInt(ig.system.canvas.offsetHeight)||ig.system.realHeight,l=ig.system.scale*(l/ig.system.realWidth),m=ig.system.scale*(m/ig.system.realHeight);if(window.navigator.msPointerEnabled)this.windowKeyDown(j);else if(ig.ua.touchDevice&&j.touches){for(;0<this.touches.length;)this.touches.pop();!this.multitouchCapable&&1<j.touches.length&&(this.multitouchCapable=!0);var n={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(n=ig.system.canvas.getBoundingClientRect());
for(var p=0;p<j.touches.length;p++){var s=j.touches[p];s&&this.touches.push({x:(s.clientX-n.left)/l,y:(s.clientY-n.top)/m})}}},touchup:function(j){var l=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth;parseInt(ig.system.canvas.offsetHeight);l=ig.system.scale*(l/ig.system.realWidth);if(window.navigator.msPointerEnabled)this.windowKeyUp(j);else{this.lastEventUp=j;var m={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(m=ig.system.canvas.getBoundingClientRect());if(ig.ua.touchDevice){j=
(j.changedTouches[0].clientX-m.left)/l;for(l=0;l<this.touches.length;l++)this.touches[l].x>=j-40&&this.touches[l].x<=j+40&&this.touches.splice(l,1)}}},windowKeyDown:function(j){var l=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth,m=parseInt(ig.system.canvas.offsetHeight)||ig.system.realHeight,l=ig.system.scale*(l/ig.system.realWidth),m=ig.system.scale*(m/ig.system.realHeight);if(window.navigator.msPointerEnabled){var n={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(n=ig.system.canvas.getBoundingClientRect());
j=j.changedTouches?j.changedTouches:[j];for(var p=0;p<j.length;++p){for(var s=j[p],A="undefined"!=typeof s.identifier?s.identifier:"undefined"!=typeof s.pointerId?s.pointerId:1,v=(s.clientX-n.left)/l,s=(s.clientY-n.top)/m,r=0;r<this.touches.length;++r)this.touches[r].identifier==A&&this.touches.splice(r,1);this.touches.push({x:v,y:s,identifier:A})}for(l=0;l<this.touches.length;l++);}},windowKeyUp:function(j){j="undefined"!=typeof j.identifier?j.identifier:"undefined"!=typeof j.pointerId?j.pointerId:
1;for(var l=0;l<this.touches.length;++l)this.touches[l].identifier==j&&this.touches.splice(l,1);for(;0<this.touches.length;)this.touches.pop()},windowMove:function(j){var l=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth,m=parseInt(ig.system.canvas.offsetHeight)||ig.system.realHeight,l=ig.system.scale*(l/ig.system.realWidth),m=ig.system.scale*(m/ig.system.realHeight),n={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(n=ig.system.canvas.getBoundingClientRect());if(window.navigator.msPointerEnabled)for(var p=
"undefined"!=typeof j.identifier?j.identifier:"undefined"!=typeof j.pointerId?j.pointerId:1,s=0;s<this.touches.length;++s)if(this.touches[s].identifier==p){var A=(j.clientY-n.top)/m;this.touches[s].x=(j.clientX-n.left)/l;this.touches[s].y=A}}})});ig.baked=!0;
ig.module("plugins.io.io-manager").requires("plugins.io.storage","plugins.io.mouse","plugins.io.keyboard","plugins.io.gamepad","plugins.io.multitouch","plugins.io.multitouch-input","plugins.io.gamepad-input").defines(function(){IoManager=ig.Class.extend({storage:null,localStorageSupport:!1,gamekey:"TeamKaboom",mouse:null,keyboard:null,multitouch:null,gamepad:null,init:function(){ig.multitouchInput=new ig.MultitouchInput;ig.gamepadInput=new ig.GamepadInput;this.unbindAll();this.initStorage();this.initMouse();
this.initKeyboard()},unbindAll:function(){ig.input.unbindAll();ig.gamepadInput.unbindAll()},initStorage:function(){this._supportsLocalStorage()&&(this.storage=new ig.Storage)},initMouse:function(){this.mouse=new Mouse},initKeyboard:function(){this.keyboard=new Keyboard},initMultitouch:function(){this.multitouch=new Multitouch},initGamepad:function(){this.gamepad=new Gamepad},press:function(j){return ig.input.pressed(j)||this.gamepad.press(j)?!0:!1},held:function(j){return ig.input.state(j)||this.gamepad.state(j)?
!0:!1},release:function(j){return ig.input.released(j)||this.gamepad.released(j)?!0:!1},getClickPos:function(){return this.mouse.getPos()},getTouchesPos:function(){return this.multitouch.getTouchesPos()},checkOverlap:function(j,l,m,n,p){return j.x>l+n||j.x<l||j.y>m+p||j.y<m?!1:!0},_supportsLocalStorage:function(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),this.localStorageSupport="localStorage"in window&&null!==window.localStorage}catch(j){return this.localStorageSupport}},
storageIsSet:function(j){return!this.localStorageSupport?null:this.storage.isSet(j)},storageGet:function(j){return!this.localStorageSupport?null:this.storage.get(j)},storageSet:function(j,l){if(!this.localStorageSupport)return null;this.storage.set(j,l)},assert:function(j,l,m){if(l!==m)throw"actualValue:"+l+" not equal to testValue:"+m+" at "+j;}})});ig.baked=!0;
ig.module("plugins.splash-loader").requires("impact.loader","impact.animation").defines(function(){ig.SplashLoader=ig.Loader.extend({bg:new ig.Image("media/graphics/splash/desktop/cover.jpg"),frame:new ig.Image("media/graphics/splash/progress/frame.png"),bar:new ig.Image("media/graphics/splash/progress/bar.png"),resource:[new ig.Sound("media/audio/bgm.mp3"),new ig.Sound("media/audio/bgm.ogg"),new ig.Sound("media/audio/play/ballroll.mp3"),new ig.Sound("media/audio/play/ballroll.ogg"),new ig.Sound("media/audio/play/button.mp3"),
new ig.Sound("media/audio/play/button.ogg"),new ig.Sound("media/audio/play/ding1.mp3"),new ig.Sound("media/audio/play/ding1.ogg"),new ig.Sound("media/audio/play/ding2.mp3"),new ig.Sound("media/audio/play/ding2.ogg"),new ig.Sound("media/audio/play/ding3.mp3"),new ig.Sound("media/audio/play/ding3.ogg"),new ig.Sound("media/audio/play/hint.mp3"),new ig.Sound("media/audio/play/hint.ogg"),new ig.Sound("media/audio/play/tile.mp3"),new ig.Sound("media/audio/play/tile.ogg"),new ig.Sound("media/audio/play/win.mp3"),
new ig.Sound("media/audio/play/win.ogg"),new ig.Image("media/graphics/games/ball.png"),new ig.Image("media/graphics/games/board.png"),new ig.Image("media/graphics/games/end-game-dialog.png"),new ig.Image("media/graphics/games/level-select-dialog.png"),new ig.Image("media/graphics/games/paused-frame.png"),new ig.Image("media/graphics/games/sound-bar.png"),new ig.Image("media/graphics/games/sound-frame.png"),new ig.Image("media/graphics/games/sound-knob.png"),new ig.Image("media/graphics/games/tutorial-frame.png"),
new ig.Image("media/graphics/games/tutorial-pointer.png"),new ig.Image("media/graphics/games/ui-frame-bottom.png"),new ig.Image("media/graphics/games/ui-frame-top.png"),new ig.Image("media/graphics/sprites/button-game.png"),new ig.Image("media/graphics/sprites/button_moregames.png"),new ig.Image("media/graphics/sprites/button_play.png"),new ig.Image("media/graphics/sprites/button_setting.png"),new ig.Image("media/graphics/sprites/close-dialog.png"),new ig.Image("media/graphics/sprites/hint-spin.png"),
new ig.Image("media/graphics/sprites/level-select-page.png"),new ig.Image("media/graphics/sprites/level-select-tile.png"),new ig.Image("media/graphics/sprites/star-end.png"),new ig.Image("media/graphics/sprites/star-pick.png"),new ig.Image("media/graphics/sprites/star-uitop.png"),new ig.Image("media/graphics/sprites/tiles.png")],init:function(j,l){ig.system.context.font="0pt sketch-block";ig.system.context.fillText("",0,0);ig.system.context.restore();this.parent(j,l);ig.apiHandler.run("MJSPreroll")},
end:function(){this.parent();if(ig.ua.mobile){var j=ig.domHandler.getElementById("#play");ig.domHandler.show(j)}j=0<=document.URL.indexOf("localhost")?500:3E3;window.setTimeout("ig.system.setGame(MyGame)",j)},setupCustomAnimation:function(){this.customAnim=new ig.Animation(this.customAnim,0.05,[0,1,2,3,4,5]);this.customAnim.currentFrame=0;ig.loadingScreen=this;ig.loadingScreen.animationTimer=window.setInterval("ig.loadingScreen.animate()",100)},animate:function(){this.customAnim.currentFrame<this.customAnim.sequence.length?
this.customAnim.currentFrame++:this.customAnim.currentFrame=0;this.customAnim.gotoFrame(this.customAnim.currentFrame)},draw:function(){this._drawStatus+=(this.status-this._drawStatus)/5;var j=ig.system.scale,l,m,n;l=this.frame.width;m=this.frame.height;n=0.5*ig.system.width-l/2;this.bg.draw(0,0);0<this.frame.width*j&&(this.frame.draw(n*j,420*j),this.bar.draw(n*j,420*j,0,0,l*j*this._drawStatus,m*j))}})});ig.baked=!0;
ig.module("plugins.tween").requires("impact.entity").defines(function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(j){for(var l=0;l<this.length;++l)if(this[l]===j)return l;return-1});ig.Entity.prototype.tweens=[];ig.Entity.prototype._preTweenUpdate=ig.Entity.prototype.update;ig.Entity.prototype.update=function(){this._preTweenUpdate();if(0<this.tweens.length){for(var j=[],l=0;l<this.tweens.length;l++)this.tweens[l].update(),this.tweens[l].complete||j.push(this.tweens[l]);this.tweens=
j}};ig.Entity.prototype.tween=function(j,l,m){j=new ig.Tween(this,j,l,m);this.tweens.push(j);return j};ig.Entity.prototype.pauseTweens=function(){for(var j=0;j<this.tweens.length;j++)this.tweens[j].pause()};ig.Entity.prototype.resumeTweens=function(){for(var j=0;j<this.tweens.length;j++)this.tweens[j].resume()};ig.Entity.prototype.stopTweens=function(j){for(var l=0;l<this.tweens.length;l++)this.tweens[l].stop(j)};ig.Tween=function(j,l,m,n){var p={},s={},A={},v=0,r=!1,u=!1,t=!1;this.duration=m;this.paused=
this.complete=!1;this.easing=ig.Tween.Easing.Linear.EaseNone;this.onComplete=!1;this.loop=this.delay=0;this.loopCount=-1;ig.merge(this,n);this.loopNum=this.loopCount;this.chain=function(j){t=j};this.initEnd=function(j,l,m){if("object"!==typeof l[j])m[j]=l[j];else for(subprop in l[j])m[j]||(m[j]={}),this.initEnd(subprop,l[j],m[j])};this.initStart=function(j,l,m,n){if("object"!==typeof m[j])"undefined"!==typeof l[j]&&(n[j]=m[j]);else for(subprop in m[j])n[j]||(n[j]={}),"undefined"!==typeof l[j]&&this.initStart(subprop,
l[j],m[j],n[j])};this.start=function(){this.paused=this.complete=!1;this.loopNum=this.loopCount;v=0;-1==j.tweens.indexOf(this)&&j.tweens.push(this);u=!0;r=new ig.Timer;for(var m in l)this.initEnd(m,l,s);for(m in s)this.initStart(m,s,j,p),this.initDelta(m,A,j,s)};this.initDelta=function(j,l,m,n){if("object"!==typeof n[j])l[j]=n[j]-m[j];else for(subprop in n[j])l[j]||(l[j]={}),this.initDelta(subprop,l[j],m[j],n[j])};this.propUpdate=function(j,l,m,n,p){if("function"==typeof this.onUpdate){var r=this.onUpdate(j,
l,m,n,p);r&&r.pause&&this.pause();j=r&&r.prop?r.prop:j;l=r&&r.obj?r.obj:l;m=r&&r.start?r.start:m;n=r&&r.delta?r.delta:n;p=r&&r.value?r.value:p}if("object"!==typeof m[j])l[j]="undefined"!=typeof m[j]?m[j]+n[j]*p:l[j];else for(subprop in m[j])this.propUpdate(subprop,l[j],m[j],n[j],p)};this.propSet=function(j,l,m){if("object"!==typeof l[j])m[j]=l[j];else for(subprop in l[j])m[j]||(m[j]={}),this.propSet(subprop,l[j],m[j])};this.update=function(){if(!u)return!1;if(this.delay){if(r.delta()<this.delay)return;
this.delay=0;r.reset()}if(this.paused||this.complete)return!1;var l=(r.delta()+v)/this.duration,l=1<l?1:l,m=this.easing(l);for(property in A)this.propUpdate(property,j,p,A,m);if(1<=l){if(0==this.loopNum||!this.loop){this.complete=!0;if(this.onComplete)this.onComplete();t&&t.start();return!1}if(this.loop==ig.Tween.Loop.Revert){for(property in p)this.propSet(property,p,j);v=0;r.reset();-1!=this.loopNum&&this.loopNum--}else if(this.loop==ig.Tween.Loop.Reverse){l={};m={};ig.merge(l,s);ig.merge(m,p);ig.merge(p,
l);ig.merge(s,m);for(property in s)this.initDelta(property,A,j,s);v=0;r.reset();-1!=this.loopNum&&this.loopNum--}}};this.pause=function(){this.paused=!0;v+=r.delta()};this.resume=function(){this.paused=!1;r.reset()};this.stop=function(j){j&&(this.loop=this.complete=this.paused=!1,v+=m,this.update());this.complete=!0}};ig.Tween.Loop={Revert:1,Reverse:2};ig.Tween.Easing={Linear:{},Quadratic:{},Cubic:{},Quartic:{},Quintic:{},Sinusoidal:{},Exponential:{},Circular:{},Elastic:{},Back:{},Bounce:{}};ig.Tween.Easing.Linear.EaseNone=
function(j){return j};ig.Tween.Easing.Quadratic.EaseIn=function(j){return j*j};ig.Tween.Easing.Quadratic.EaseOut=function(j){return-j*(j-2)};ig.Tween.Easing.Quadratic.EaseInOut=function(j){return 1>(j*=2)?0.5*j*j:-0.5*(--j*(j-2)-1)};ig.Tween.Easing.Cubic.EaseIn=function(j){return j*j*j};ig.Tween.Easing.Cubic.EaseOut=function(j){return--j*j*j+1};ig.Tween.Easing.Cubic.EaseInOut=function(j){return 1>(j*=2)?0.5*j*j*j:0.5*((j-=2)*j*j+2)};ig.Tween.Easing.Quartic.EaseIn=function(j){return j*j*j*j};ig.Tween.Easing.Quartic.EaseOut=
function(j){return-(--j*j*j*j-1)};ig.Tween.Easing.Quartic.EaseInOut=function(j){return 1>(j*=2)?0.5*j*j*j*j:-0.5*((j-=2)*j*j*j-2)};ig.Tween.Easing.Quintic.EaseIn=function(j){return j*j*j*j*j};ig.Tween.Easing.Quintic.EaseOut=function(j){return(j-=1)*j*j*j*j+1};ig.Tween.Easing.Quintic.EaseInOut=function(j){return 1>(j*=2)?0.5*j*j*j*j*j:0.5*((j-=2)*j*j*j*j+2)};ig.Tween.Easing.Sinusoidal.EaseIn=function(j){return-Math.cos(j*Math.PI/2)+1};ig.Tween.Easing.Sinusoidal.EaseOut=function(j){return Math.sin(j*
Math.PI/2)};ig.Tween.Easing.Sinusoidal.EaseInOut=function(j){return-0.5*(Math.cos(Math.PI*j)-1)};ig.Tween.Easing.Exponential.EaseIn=function(j){return 0==j?0:Math.pow(2,10*(j-1))};ig.Tween.Easing.Exponential.EaseOut=function(j){return 1==j?1:-Math.pow(2,-10*j)+1};ig.Tween.Easing.Exponential.EaseInOut=function(j){return 0==j?0:1==j?1:1>(j*=2)?0.5*Math.pow(2,10*(j-1)):0.5*(-Math.pow(2,-10*(j-1))+2)};ig.Tween.Easing.Circular.EaseIn=function(j){return-(Math.sqrt(1-j*j)-1)};ig.Tween.Easing.Circular.EaseOut=
function(j){return Math.sqrt(1- --j*j)};ig.Tween.Easing.Circular.EaseInOut=function(j){return 1>(j/=0.5)?-0.5*(Math.sqrt(1-j*j)-1):0.5*(Math.sqrt(1-(j-=2)*j)+1)};ig.Tween.Easing.Elastic.EaseIn=function(j){var l,m=0.1,n=0.4;if(0==j)return 0;if(1==j)return 1;n||(n=0.3);!m||1>m?(m=1,l=n/4):l=n/(2*Math.PI)*Math.asin(1/m);return-(m*Math.pow(2,10*(j-=1))*Math.sin((j-l)*2*Math.PI/n))};ig.Tween.Easing.Elastic.EaseOut=function(j){var l,m=0.1,n=0.4;if(0==j)return 0;if(1==j)return 1;n||(n=0.3);!m||1>m?(m=1,
l=n/4):l=n/(2*Math.PI)*Math.asin(1/m);return m*Math.pow(2,-10*j)*Math.sin((j-l)*2*Math.PI/n)+1};ig.Tween.Easing.Elastic.EaseInOut=function(j){var l,m=0.1,n=0.4;if(0==j)return 0;if(1==j)return 1;n||(n=0.3);!m||1>m?(m=1,l=n/4):l=n/(2*Math.PI)*Math.asin(1/m);return 1>(j*=2)?-0.5*m*Math.pow(2,10*(j-=1))*Math.sin((j-l)*2*Math.PI/n):0.5*m*Math.pow(2,-10*(j-=1))*Math.sin((j-l)*2*Math.PI/n)+1};ig.Tween.Easing.Back.EaseIn=function(j){return j*j*(2.70158*j-1.70158)};ig.Tween.Easing.Back.EaseOut=function(j){return(j-=
1)*j*(2.70158*j+1.70158)+1};ig.Tween.Easing.Back.EaseInOut=function(j){return 1>(j*=2)?0.5*j*j*(3.5949095*j-2.5949095):0.5*((j-=2)*j*(3.5949095*j+2.5949095)+2)};ig.Tween.Easing.Bounce.EaseIn=function(j){return 1-ig.Tween.Easing.Bounce.EaseOut(1-j)};ig.Tween.Easing.Bounce.EaseOut=function(j){return(j/=1)<1/2.75?7.5625*j*j:j<2/2.75?7.5625*(j-=1.5/2.75)*j+0.75:j<2.5/2.75?7.5625*(j-=2.25/2.75)*j+0.9375:7.5625*(j-=2.625/2.75)*j+0.984375};ig.Tween.Easing.Bounce.EaseInOut=function(j){return 0.5>j?0.5*ig.Tween.Easing.Bounce.EaseIn(2*
j):0.5*ig.Tween.Easing.Bounce.EaseOut(2*j-1)+0.5}});ig.baked=!0;
ig.module("plugins.url-parameters").defines(function(){ig.UrlParameters=ig.Class.extend({init:function(){switch(getQueryVariable("iphone")){case "true":ig.ua.iPhone=!0,console.log("iPhone mode")}var j=getQueryVariable("webview");if(j)switch(j){case "true":ig.ua.is_uiwebview=!0,console.log("webview mode")}if(j=getQueryVariable("debug"))switch(j){case "true":ig.game.showDebugMenu(),console.log("debug mode")}switch(getQueryVariable("view")){case "stats":ig.game.resetPlayerStats(),ig.game.endGame()}getQueryVariable("ad")}})});
ig.baked=!0;
ig.module("plugins.director").requires("impact.impact").defines(function(){ig.Director=ig.Class.extend({init:function(j,l){this.game=j;this.levels=[];this.currentLevel=0;this.append(l)},loadLevel:function(j){for(var l in ig.sizeHandler.dynamicClickableEntityDivs){var m=ig.domHandler.getElementById("#"+l);ig.domHandler.hide(m)}this.currentLevel=j;this.game.loadLevel(this.levels[j]);return!0},loadLevelWithoutEntities:function(j){this.currentLevel=j;this.game.loadLevelWithoutEntities(this.levels[j]);return!0},
append:function(j){newLevels=[];return"object"===typeof j?(j.constructor===[].constructor?newLevels=j:newLevels[0]=j,this.levels=this.levels.concat(newLevels),!0):!1},nextLevel:function(){return this.currentLevel+1<this.levels.length?this.loadLevel(this.currentLevel+1):!1},previousLevel:function(){return 0<=this.currentLevel-1?this.loadLevel(this.currentLevel-1):!1},jumpTo:function(j){var l=null;for(i=0;i<this.levels.length;i++)this.levels[i]==j&&(l=i);return 0<=l?this.loadLevel(l):!1},firstLevel:function(){return this.loadLevel(0)},
lastLevel:function(){return this.loadLevel(this.levels.length-1)},reloadLevel:function(){return this.loadLevel(this.currentLevel)}})});ig.baked=!0;
ig.module("plugins.impact-storage").requires("impact.game").defines(function(){ig.Storage=ig.Class.extend({staticInstantiate:function(){return!ig.Storage.instance?null:ig.Storage.instance},init:function(){ig.Storage.instance=this},isCapable:function(){return"undefined"!==typeof window.localStorage},isSet:function(j){return null!==this.get(j)},initUnset:function(j,l){null===this.get(j)&&this.set(j,l)},get:function(j){if(!this.isCapable())return null;try{return JSON.parse(localStorage.getItem(j))}catch(l){return window.localStorage.getItem(j)}},
getInt:function(j){return~~this.get(j)},getFloat:function(j){return parseFloat(this.get(j))},getBool:function(j){return!!this.get(j)},key:function(j){return this.isCapable()?window.localStorage.key(j):null},set:function(j,l){if(!this.isCapable())return null;try{window.localStorage.setItem(j,JSON.stringify(l))}catch(m){console.log(m)}},setHighest:function(j,l){l>this.getFloat(j)&&this.set(j,l)},remove:function(j){if(!this.isCapable())return null;window.localStorage.removeItem(j)},clear:function(){if(!this.isCapable())return null;
window.localStorage.clear()}})});ig.baked=!0;
ig.module("plugins.coolmath-api").defines(function(){ig.onPlayButton=function(){console.log("onPlayButton");parent&&"function"==typeof parent.cmgGameEvent&&parent.cmgGameEvent("start")};ig.onLevelStart=function(j){console.log("onLevelStart "+j);parent&&"function"==typeof parent.cmgGameEvent&&parent.cmgGameEvent("start",j)};ig.onLevelReplay=function(j){console.log("onLevelReplay "+j);parent&&"function"==typeof parent.cmgGameEvent&&parent.cmgGameEvent("replay",j)};window.unlockAllLevels=function(){console.log("unlockAllLevels");
if(ig&&ig.game){(new LevelService).fnSaveUnlockedLevel(ig.game.settings.layout.length);var j=ig.game.getEntitiesByType(EntityDialogLevelselect);0<j.length&&j[0].fnChangePage(0)}};window.resetLevels=function(){console.log("resetLevels");if(ig&&ig.game){(new LevelService).fnSaveUnlockedLevel(0);(new Service)._set("score",{});var j=ig.game.getEntitiesByType(EntityDialogLevelselect);0<j.length&&j[0].fnChangePage(0)}}});ig.baked=!0;
ig.module("game.app.settings").requires("impact.game").defines(function(){ig.Game.inject({settings:{enIdx:{levelsplasher:200,levelselect:100,starendgame:50,option:40,paused:30,starstatusUiTop:22,uiButtonTop:21,uiFrameTop:20,pathcomplete:12,tutorial:11,hintspin:10,uiButtonBottom:10,uiFrameBottom:9,starpick:8,ball:7,tileHint:6,tile:5,tileBoard:4,menubackground:1,menubtn:2},color:{value:"#FF751F",rgbTransitiontext:{r:128,g:255,b:0},rgbTransitiontextShadow:{r:23,g:46,b:0},tileHint:"rgba(19,191,0,0.7)",
rgbMovesBase:{r:255,g:117,b:31},rgbMovesAnimate:{r:255,g:255,b:255},captionLeather:"#FFF99E",captionBoard:"#3B0B00",soundLevel:{r:0,g:0,b:0,changed:"g"}},layout:[{a:{gridAx:{x:1,y:1},type:"start",dir:"t",isPath:!0,ball:!0},b:{gridAx:{x:1,y:2},type:"wood",dir:"rt",isPath:!0,star:!0},c:{gridAx:{x:2,y:2},type:"wood",dir:"lt",isPath:!0,star:!0},d:{gridAx:{x:2,y:1},type:"metal",dir:"rb",isPath:!0,star:!0},e:{gridAx:{x:3,y:1},type:"wood",dir:"lb",isPath:!0},z:{gridAx:{x:3,y:2},type:"goal",dir:"b",isPath:!0,
hintspin:!0}},{a:{gridAx:{x:1,y:1},type:"start",dir:"b",isPath:!0,ball:!0},b:{gridAx:{x:1,y:0},type:"wood",dir:"lb",isPath:!0},c:{gridAx:{x:0,y:0},type:"metal",dir:"rb",isPath:!0},d:{gridAx:{x:0,y:1},type:"wood",dir:"v",isPath:!0},e:{gridAx:{x:0,y:2},type:"wood",dir:"rt",isPath:!0,star:!0},f:{gridAx:{x:1,y:2},type:"wood",dir:"h",isPath:!0,star:!0},g:{gridAx:{x:2,y:2},type:"wood",dir:"lt",isPath:!0,star:!0},h:{gridAx:{x:1,y:3},type:"wood-empty"},z:{gridAx:{x:2,y:1},type:"goal",dir:"t",isPath:!0,hintspin:!0}},
{a:{gridAx:{x:1,y:1},type:"start",dir:"b",isPath:!0,ball:!0},b:{gridAx:{x:1,y:0},type:"wood",dir:"lb",isPath:!0},c:{gridAx:{x:0,y:0},type:"wood",dir:"rb",isPath:!0,star:!0},d:{gridAx:{x:0,y:1},type:"wood",dir:"v",isPath:!0},e:{gridAx:{x:0,y:2},type:"wood",dir:"rt",isPath:!0,star:!0},f:{gridAx:{x:1,y:2},type:"wood",dir:"h",isPath:!0},g:{gridAx:{x:2,y:2},type:"wood",dir:"lt",isPath:!0,star:!0},h:{gridAx:{x:2,y:3},type:"wood-empty"},z:{gridAx:{x:2,y:1},type:"goal",dir:"t",isPath:!0,hintspin:!0}},{a:{gridAx:{x:0,
y:3},type:"start",dir:"l",isPath:!0,ball:!0},b:{gridAx:{x:1,y:3},type:"wood",dir:"lt",isPath:!0,star:!0},c:{gridAx:{x:1,y:2},type:"wood",dir:"v",isPath:!0},d:{gridAx:{x:1,y:1},type:"wood",dir:"v",isPath:!0},e:{gridAx:{x:1,y:0},type:"metal",dir:"rb",isPath:!0,star:!0},f:{gridAx:{x:2,y:0},type:"metal",dir:"lb",isPath:!0},g:{gridAx:{x:2,y:1},type:"wood",dir:"v",isPath:!0},h:{gridAx:{x:2,y:2},type:"wood",dir:"v",isPath:!0},i:{gridAx:{x:2,y:3},type:"wood",dir:"rt",isPath:!0,star:!0},z:{gridAx:{x:3,y:3},
type:"goal",dir:"r",isPath:!0,hintspin:!0}},{a:{gridAx:{x:1,y:1},type:"start",dir:"r",isPath:!0,ball:!0},b:{gridAx:{x:0,y:1},type:"wood",dir:"rb",isPath:!0,star:!0},c:{gridAx:{x:0,y:2},type:"wood",dir:"rt",isPath:!0},d:{gridAx:{x:1,y:2},type:"wood",dir:"h",isPath:!0},e:{gridAx:{x:2,y:2},type:"wood",dir:"h",isPath:!0,star:!0},f:{gridAx:{x:3,y:2},type:"wood",dir:"lt",isPath:!0},g:{gridAx:{x:3,y:1},type:"wood",dir:"lb",isPath:!0,star:!0},h:{gridAx:{x:1,y:3},type:"wood-empty"},i:{gridAx:{x:2,y:3},type:"wood-empty"},
z:{gridAx:{x:2,y:1},type:"goal",dir:"l",isPath:!0,hintspin:!0}},{a:{gridAx:{x:0,y:0},type:"start",dir:"t",isPath:!0,ball:!0},b:{gridAx:{x:0,y:1},type:"wood",dir:"v",isPath:!0},c:{gridAx:{x:0,y:2},type:"wood",dir:"rt",isPath:!0,star:!0},d:{gridAx:{x:1,y:2},type:"wood",dir:"h",isPath:!0,star:!0},e:{gridAx:{x:2,y:2},type:"wood",dir:"lt",isPath:!0,star:!0},f:{gridAx:{x:1,y:1},type:"wood",dir:"lt"},g:{gridAx:{x:2,y:3},type:"wood-empty"},z:{gridAx:{x:2,y:1},type:"goal",dir:"t",isPath:!0,hintspin:!0}},{a:{gridAx:{x:0,
y:0},type:"start",dir:"t",isPath:!0,ball:!0},b:{gridAx:{x:0,y:1},type:"wood",dir:"rt",isPath:!0},c:{gridAx:{x:1,y:1},type:"wood",dir:"lt",isPath:!0},d:{gridAx:{x:1,y:0},type:"metal",dir:"rb",isPath:!0,star:!0},e:{gridAx:{x:2,y:0},type:"wood",dir:"h",isPath:!0,star:!0},f:{gridAx:{x:3,y:0},type:"wood",dir:"lb",isPath:!0},g:{gridAx:{x:3,y:1},type:"wood",dir:"v",isPath:!0,star:!0},h:{gridAx:{x:3,y:2},type:"wood",dir:"lt",isPath:!0},i:{gridAx:{x:2,y:2},type:"wood",dir:"rt",isPath:!0},j:{gridAx:{x:0,y:2},
type:"wood",dir:"v"},k:{gridAx:{x:1,y:2},type:"wood",dir:"h"},z:{gridAx:{x:2,y:1},type:"goal",dir:"t",isPath:!0,hintspin:!0}},{a:{gridAx:{x:0,y:3},type:"start",dir:"l",isPath:!0,ball:!0},b:{gridAx:{x:1,y:3},type:"wood",dir:"h",isPath:!0,star:!0},c:{gridAx:{x:2,y:3},type:"wood",dir:"h",isPath:!0},d:{gridAx:{x:3,y:3},type:"wood",dir:"lt",isPath:!0,star:!0},e:{gridAx:{x:3,y:2},type:"wood",dir:"lb",isPath:!0},f:{gridAx:{x:2,y:2},type:"wood",dir:"rt",isPath:!0,star:!0},g:{gridAx:{x:1,y:2},type:"wood",
dir:"lt"},h:{gridAx:{x:0,y:2},type:"wood",dir:"rb"},z:{gridAx:{x:2,y:1},type:"goal",dir:"t",isPath:!0,hintspin:!0}},{a:{gridAx:{x:0,y:3},type:"start",dir:"l",isPath:!0,ball:!0},b:{gridAx:{x:1,y:3},type:"wood",dir:"lt",isPath:!0,star:!0},c:{gridAx:{x:1,y:2},type:"wood",dir:"lb",isPath:!0},d:{gridAx:{x:0,y:2},type:"wood",dir:"rt",isPath:!0},e:{gridAx:{x:0,y:1},type:"wood",dir:"rb",isPath:!0,star:!0},f:{gridAx:{x:1,y:1},type:"wood",dir:"h",isPath:!0},g:{gridAx:{x:2,y:1},type:"wood",dir:"lb",isPath:!0},
h:{gridAx:{x:2,y:2},type:"wood",dir:"rt",isPath:!0},i:{gridAx:{x:3,y:2},type:"wood",dir:"lt",isPath:!0,star:!0},j:{gridAx:{x:2,y:3},type:"wood-empty"},z:{gridAx:{x:3,y:1},type:"goal",dir:"t",isPath:!0,hintspin:!0}},{a:{gridAx:{x:0,y:3},type:"start",dir:"l",isPath:!0,ball:!0},b:{gridAx:{x:1,y:3},type:"wood",dir:"h",isPath:!0},c:{gridAx:{x:2,y:3},type:"metal",dir:"lt",isPath:!0,star:!0},d:{gridAx:{x:2,y:2},type:"wood",dir:"v",isPath:!0},e:{gridAx:{x:2,y:1},type:"wood",dir:"rb",isPath:!0,star:!0},f:{gridAx:{x:3,
y:1},type:"wood",dir:"lb",isPath:!0},g:{gridAx:{x:3,y:2},type:"wood",dir:"v",isPath:!0,star:!0},z:{gridAx:{x:3,y:3},type:"goal",dir:"b",isPath:!0,hintspin:!0}},{a:{gridAx:{x:0,y:3},type:"start",dir:"l",isPath:!0,ball:!0},b:{gridAx:{x:1,y:3},type:"wood",dir:"lt",isPath:!0},c:{gridAx:{x:1,y:2},type:"wood",dir:"lb",isPath:!0},d:{gridAx:{x:0,y:2},type:"metal",dir:"rt",isPath:!0,star:!0},e:{gridAx:{x:0,y:1},type:"wood",dir:"rb",isPath:!0},f:{gridAx:{x:1,y:1},type:"wood",dir:"h",isPath:!0,star:!0},g:{gridAx:{x:2,
y:1},type:"wood",dir:"h",isPath:!0},h:{gridAx:{x:3,y:1},type:"wood",dir:"lb",isPath:!0,star:!0},i:{gridAx:{x:3,y:2},type:"wood",dir:"v",isPath:!0},z:{gridAx:{x:3,y:3},type:"goal",dir:"b",isPath:!0,hintspin:!0}},{a:{gridAx:{x:0,y:3},type:"start",dir:"l",isPath:!0,ball:!0},b:{gridAx:{x:1,y:3},type:"wood",dir:"h",isPath:!0},c:{gridAx:{x:2,y:3},type:"wood",dir:"lt",isPath:!0,star:!0},d:{gridAx:{x:2,y:2},type:"wood",dir:"v",isPath:!0},e:{gridAx:{x:2,y:1},type:"wood",dir:"rb",isPath:!0,star:!0},f:{gridAx:{x:3,
y:1},type:"metal",dir:"lb",isPath:!0,star:!0},g:{gridAx:{x:3,y:3},type:"wood-empty"},z:{gridAx:{x:3,y:2},type:"goal",dir:"b",isPath:!0,hintspin:!0}},{a:{gridAx:{x:0,y:0},type:"start",dir:"l",isPath:!0,ball:!0},b:{gridAx:{x:1,y:0},type:"wood",dir:"lb",isPath:!0,star:!0},c:{gridAx:{x:1,y:1},type:"wood",dir:"v",isPath:!0},d:{gridAx:{x:1,y:2},type:"wood",dir:"rt",isPath:!0,star:!0},e:{gridAx:{x:2,y:2},type:"wood",dir:"lb",isPath:!0,star:!0},f:{gridAx:{x:0,y:1},type:"wood-empty"},g:{gridAx:{x:0,y:3},type:"wood-empty"},
h:{gridAx:{x:1,y:3},type:"wood-empty"},z:{gridAx:{x:2,y:3},type:"goal",dir:"b",isPath:!0,hintspin:!0}},{a:{gridAx:{x:0,y:0},type:"start",dir:"l",isPath:!0,ball:!0},b:{gridAx:{x:1,y:0},type:"wood",dir:"lb",isPath:!0},c:{gridAx:{x:1,y:1},type:"wood",dir:"rt",isPath:!0,star:!0},d:{gridAx:{x:2,y:1},type:"wood",dir:"h",isPath:!0},e:{gridAx:{x:3,y:1},type:"wood",dir:"lb",isPath:!0},f:{gridAx:{x:3,y:2},type:"wood",dir:"lt",isPath:!0,star:!0},g:{gridAx:{x:2,y:2},type:"wood",dir:"rb",isPath:!0,star:!0},h:{gridAx:{x:1,
y:2},type:"wood",dir:"v"},i:{gridAx:{x:3,y:0},type:"wood-empty"},z:{gridAx:{x:2,y:3},type:"goal",dir:"b",isPath:!0,hintspin:!0}},{a:{gridAx:{x:2,y:0},type:"start",dir:"t",isPath:!0,ball:!0},b:{gridAx:{x:2,y:1},type:"wood",dir:"rt",isPath:!0,star:!0},c:{gridAx:{x:3,y:1},type:"wood",dir:"lb",isPath:!0},d:{gridAx:{x:3,y:2},type:"wood",dir:"lt",isPath:!0},e:{gridAx:{x:2,y:2},type:"metal",dir:"h",isPath:!0},f:{gridAx:{x:1,y:2},type:"wood",dir:"h",isPath:!0,star:!0},g:{gridAx:{x:0,y:2},type:"wood",dir:"rb",
isPath:!0,star:!0},h:{gridAx:{x:0,y:3},type:"wood",dir:"rt",isPath:!0},i:{gridAx:{x:1,y:3},type:"wood",dir:"h",isPath:!0},j:{gridAx:{x:0,y:0},type:"wood-empty"},k:{gridAx:{x:1,y:0},type:"wood-empty"},z:{gridAx:{x:2,y:3},type:"goal",dir:"r",isPath:!0,hintspin:!0}},{a:{gridAx:{x:3,y:3},type:"start",dir:"b",isPath:!0,ball:!0},b:{gridAx:{x:3,y:2},type:"wood",dir:"v",isPath:!0,star:!0},c:{gridAx:{x:3,y:1},type:"wood",dir:"lb",isPath:!0},d:{gridAx:{x:2,y:1},type:"wood",dir:"h",isPath:!0,star:!0},e:{gridAx:{x:1,
y:1},type:"wood",dir:"rb",isPath:!0},f:{gridAx:{x:1,y:2},type:"wood",dir:"v",isPath:!0},g:{gridAx:{x:1,y:3},type:"wood",dir:"rt",isPath:!0,star:!0},h:{gridAx:{x:0,y:0},type:"wood-empty"},i:{gridAx:{x:1,y:0},type:"wood-empty"},j:{gridAx:{x:2,y:0},type:"wood-empty"},k:{gridAx:{x:0,y:1},type:"wood-empty"},l:{gridAx:{x:0,y:2},type:"wood-empty"},m:{gridAx:{x:0,y:3},type:"wood-empty"},z:{gridAx:{x:2,y:3},type:"goal",dir:"r",isPath:!0,hintspin:!0}},{a:{gridAx:{x:3,y:3},type:"start",dir:"b",isPath:!0,ball:!0},
b:{gridAx:{x:3,y:2},type:"wood",dir:"v",isPath:!0},c:{gridAx:{x:3,y:1},type:"wood",dir:"v",isPath:!0},d:{gridAx:{x:3,y:0},type:"wood",dir:"lb",isPath:!0},e:{gridAx:{x:2,y:0},type:"wood",dir:"rb",isPath:!0,star:!0},f:{gridAx:{x:2,y:1},type:"wood",dir:"v",isPath:!0},g:{gridAx:{x:2,y:2},type:"wood",dir:"lt",isPath:!0,star:!0},h:{gridAx:{x:1,y:2},type:"wood",dir:"rb",isPath:!0},i:{gridAx:{x:1,y:3},type:"wood",dir:"rt",isPath:!0,star:!0},j:{gridAx:{x:0,y:0},type:"wood-empty"},j:{gridAx:{x:1,y:0},type:"wood-empty"},
k:{gridAx:{x:0,y:1},type:"wood-empty"},l:{gridAx:{x:0,y:2},type:"wood",dir:"h"},z:{gridAx:{x:2,y:3},type:"goal",dir:"r",isPath:!0,hintspin:!0}},{a:{gridAx:{x:3,y:1},type:"start",dir:"b",isPath:!0,ball:!0},b:{gridAx:{x:3,y:0},type:"wood",dir:"lb",isPath:!0},c:{gridAx:{x:2,y:0},type:"wood",dir:"rb",isPath:!0},d:{gridAx:{x:2,y:1},type:"wood",dir:"v",isPath:!0,star:!0},e:{gridAx:{x:2,y:2},type:"wood",dir:"lt",isPath:!0},f:{gridAx:{x:1,y:2},type:"wood",dir:"rb",isPath:!0,star:!0},g:{gridAx:{x:1,y:3},type:"wood",
dir:"lt",isPath:!0,star:!0},h:{gridAx:{x:0,y:3},type:"wood",dir:"rt",isPath:!0},i:{gridAx:{x:1,y:1},type:"wood",dir:"h"},j:{gridAx:{x:2,y:3},type:"wood",dir:"v"},z:{gridAx:{x:0,y:2},type:"goal",dir:"t",isPath:!0,hintspin:!0}},{a:{gridAx:{x:3,y:3},type:"start",dir:"b",isPath:!0,ball:!0},b:{gridAx:{x:3,y:2},type:"wood",dir:"lb",isPath:!0,star:!0},c:{gridAx:{x:2,y:2},type:"wood",dir:"rb",isPath:!0},e:{gridAx:{x:2,y:3},type:"wood",dir:"lt",isPath:!0},f:{gridAx:{x:1,y:3},type:"wood",dir:"rt",isPath:!0,
star:!0},g:{gridAx:{x:1,y:2},type:"wood",dir:"v",isPath:!0,star:!0},h:{gridAx:{x:1,y:1},type:"wood",dir:"lb",isPath:!0},i:{gridAx:{x:0,y:1},type:"wood",dir:"rt",isPath:!0},j:{gridAx:{x:0,y:2},type:"wood",dir:"h"},k:{gridAx:{x:2,y:0},type:"wood",dir:"h"},z:{gridAx:{x:0,y:0},type:"goal",dir:"t",isPath:!0,hintspin:!0}},{a:{gridAx:{x:3,y:0},type:"start",dir:"t",isPath:!0,ball:!0},b:{gridAx:{x:3,y:1},type:"wood",dir:"lt",isPath:!0},c:{gridAx:{x:2,y:1},type:"wood",dir:"rb",isPath:!0},d:{gridAx:{x:2,y:2},
type:"wood",dir:"rt",isPath:!0,star:!0},e:{gridAx:{x:3,y:2},type:"wood",dir:"lb",isPath:!0},f:{gridAx:{x:3,y:3},type:"metal",dir:"lt",isPath:!0,star:!0},g:{gridAx:{x:2,y:3},type:"wood",dir:"h",isPath:!0},h:{gridAx:{x:1,y:3},type:"wood",dir:"rt",isPath:!0,star:!0},i:{gridAx:{x:1,y:2},type:"wood",dir:"lb",isPath:!0},j:{gridAx:{x:0,y:2},type:"wood",dir:"rb",isPath:!0},k:{gridAx:{x:2,y:0},type:"wood",dir:"v"},l:{gridAx:{x:0,y:1},type:"wood",dir:"v"},z:{gridAx:{x:0,y:3},type:"goal",dir:"b",isPath:!0,hintspin:!0}},
{a:{gridAx:{x:3,y:3},type:"start",dir:"r",isPath:!0,ball:!0},b:{gridAx:{x:2,y:3},type:"wood",dir:"rt",isPath:!0,star:!0},c:{gridAx:{x:2,y:2},type:"wood",dir:"rb",isPath:!0},d:{gridAx:{x:3,y:2},type:"wood",dir:"lt",isPath:!0},e:{gridAx:{x:3,y:1},type:"wood",dir:"lb",isPath:!0},f:{gridAx:{x:2,y:1},type:"wood",dir:"h",isPath:!0,star:!0},g:{gridAx:{x:1,y:1},type:"wood",dir:"rb",isPath:!0},h:{gridAx:{x:1,y:2},type:"wood",dir:"v",isPath:!0},i:{gridAx:{x:1,y:3},type:"wood",dir:"lt",isPath:!0,star:!0},j:{gridAx:{x:0,
y:2},type:"wood",dir:"h"},k:{gridAx:{x:0,y:0},type:"wood-empty"},l:{gridAx:{x:1,y:0},type:"wood-empty"},m:{gridAx:{x:0,y:1},type:"wood-empty"},z:{gridAx:{x:0,y:3},type:"goal",dir:"l",isPath:!0,hintspin:!0}},{a:{gridAx:{x:3,y:0},type:"start",dir:"r",isPath:!0,ball:!0},b:{gridAx:{x:2,y:0},type:"wood",dir:"rb",isPath:!0},c:{gridAx:{x:2,y:1},type:"wood",dir:"v",isPath:!0,star:!0},d:{gridAx:{x:2,y:2},type:"metal",dir:"rt",isPath:!0},e:{gridAx:{x:3,y:2},type:"wood",dir:"lb",isPath:!0},f:{gridAx:{x:3,y:3},
type:"wood",dir:"lt",isPath:!0},g:{gridAx:{x:2,y:3},type:"wood",dir:"h",isPath:!0,star:!0},h:{gridAx:{x:1,y:3},type:"wood",dir:"rt",isPath:!0},i:{gridAx:{x:1,y:2},type:"wood",dir:"v",isPath:!0},j:{gridAx:{x:1,y:1},type:"wood",dir:"v",isPath:!0,star:!0},k:{gridAx:{x:1,y:0},type:"wood",dir:"lb",isPath:!0},l:{gridAx:{x:0,y:2},type:"wood",dir:"h"},z:{gridAx:{x:0,y:0},type:"goal",dir:"l",isPath:!0,hintspin:!0}},{b:{gridAx:{x:1,y:1},type:"start",dir:"t",isPath:!0,ball:!0},c:{gridAx:{x:1,y:2},type:"wood",
dir:"lt",isPath:!0},d:{gridAx:{x:0,y:2},type:"wood",dir:"rb",isPath:!0,star:!0},e:{gridAx:{x:0,y:3},type:"wood",dir:"rt",isPath:!0},f:{gridAx:{x:1,y:3},type:"wood",dir:"h",isPath:!0,star:!0},g:{gridAx:{x:2,y:3},type:"wood",dir:"lt",isPath:!0,star:!0},h:{gridAx:{x:2,y:2},type:"wood",dir:"v",isPath:!0},i:{gridAx:{x:2,y:1},type:"wood",dir:"v",isPath:!0},j:{gridAx:{x:2,y:0},type:"wood",dir:"lb",isPath:!0},k:{gridAx:{x:1,y:0},type:"wood",dir:"h",isPath:!0},l:{gridAx:{x:3,y:2},type:"wood",dir:"h"},m:{gridAx:{x:3,
y:0},type:"wood-empty"},z:{gridAx:{x:0,y:0},type:"goal",dir:"l",isPath:!0,hintspin:!0}},{a:{gridAx:{x:3,y:3},type:"start",dir:"r",isPath:!0,ball:!0},b:{gridAx:{x:2,y:3},type:"wood",dir:"rt",isPath:!0},c:{gridAx:{x:2,y:2},type:"wood",dir:"rb",isPath:!0},d:{gridAx:{x:3,y:2},type:"wood",dir:"lt",isPath:!0},e:{gridAx:{x:3,y:1},type:"wood",dir:"v",isPath:!0},f:{gridAx:{x:3,y:0},type:"metal",dir:"lb",isPath:!0,star:!0},g:{gridAx:{x:2,y:0},type:"wood",dir:"rb",isPath:!0},h:{gridAx:{x:2,y:1},type:"wood",
dir:"lt",isPath:!0},i:{gridAx:{x:1,y:1},type:"wood",dir:"rb",isPath:!0,star:!0},j:{gridAx:{x:1,y:2},type:"wood",dir:"v",isPath:!0},k:{gridAx:{x:1,y:3},type:"wood",dir:"lt",isPath:!0},l:{gridAx:{x:0,y:3},type:"metal",dir:"rt",isPath:!0,star:!0},m:{gridAx:{x:0,y:2},type:"wood",dir:"v",isPath:!0},n:{gridAx:{x:0,y:1},type:"wood",dir:"v",isPath:!0},z:{gridAx:{x:0,y:0},type:"goal",dir:"t",isPath:!0,hintspin:!0}}],layoutShuffle:[[{id:"c",tileDir:"y",step:1}],[{id:"g",tileDir:"y",step:1},{id:"f",tileDir:"x",
step:1},{id:"h",tileDir:"y",step:-1}],[{id:"e",tileDir:"y",step:1},{id:"f",tileDir:"x",step:-1},{id:"g",tileDir:"x",step:-1},{id:"h",tileDir:"y",step:-1}],[{id:"c",tileDir:"x",step:-1},{id:"b",tileDir:"y",step:-1},{id:"h",tileDir:"x",step:1},{id:"i",tileDir:"x",step:-1},{id:"b",tileDir:"x",step:1},{id:"b",tileDir:"y",step:1},{id:"h",tileDir:"x",step:-1},{id:"c",tileDir:"x",step:1}],[{id:"c",tileDir:"y",step:1},{id:"d",tileDir:"x",step:-1},{id:"f",tileDir:"y",step:1},{id:"e",tileDir:"x",step:1},{id:"i",
tileDir:"y",step:-1},{id:"h",tileDir:"y",step:-1},{id:"f",tileDir:"x",step:-1},{id:"c",tileDir:"x",step:1}],[{id:"c",tileDir:"y",step:1},{id:"d",tileDir:"x",step:-1},{id:"e",tileDir:"x",step:1},{id:"f",tileDir:"y",step:1},{id:"f",tileDir:"x",step:1},{id:"d",tileDir:"x",step:1}],[{id:"k",tileDir:"y",step:1},{id:"j",tileDir:"x",step:1},{id:"b",tileDir:"y",step:1},{id:"b",tileDir:"y",step:1},{id:"j",tileDir:"x",step:-1},{id:"j",tileDir:"y",step:-1},{id:"c",tileDir:"y",step:1},{id:"c",tileDir:"x",step:-1},
{id:"k",tileDir:"y",step:-1}],[{id:"g",tileDir:"y",step:-1},{id:"g",tileDir:"x",step:-1},{id:"b",tileDir:"y",step:-1},{id:"b",tileDir:"y",step:-1},{id:"h",tileDir:"x",step:1},{id:"h",tileDir:"y",step:1},{id:"g",tileDir:"y",step:1},{id:"g",tileDir:"x",step:1}],[{id:"i",tileDir:"y",step:1},{id:"h",tileDir:"x",step:1},{id:"j",tileDir:"y",step:-1},{id:"b",tileDir:"x",step:1},{id:"c",tileDir:"y",step:1},{id:"j",tileDir:"x",step:-1}],[{id:"e",tileDir:"y",step:-1},{id:"d",tileDir:"y",step:-1},{id:"g",tileDir:"x",
step:-1},{id:"f",tileDir:"y",step:1},{id:"d",tileDir:"x",step:1},{id:"e",tileDir:"y",step:1}],[{id:"f",tileDir:"y",step:-1},{id:"c",tileDir:"x",step:1},{id:"c",tileDir:"y",step:1},{id:"e",tileDir:"x",step:1},{id:"e",tileDir:"y",step:1},{id:"g",tileDir:"y",step:1}],[{id:"d",tileDir:"x",step:-1},{id:"c",tileDir:"y",step:-1},{id:"d",tileDir:"y",step:-1},{id:"b",tileDir:"y",step:-1},{id:"g",tileDir:"x",step:-1},{id:"g",tileDir:"x",step:-1}],[{id:"c",tileDir:"x",step:1},{id:"f",tileDir:"x",step:1},{id:"g",
tileDir:"y",step:-1},{id:"g",tileDir:"y",step:-1},{id:"d",tileDir:"x",step:-1},{id:"d",tileDir:"y",step:1},{id:"g",tileDir:"y",step:1},{id:"e",tileDir:"x",step:-1}],[{id:"d",tileDir:"y",step:-1},{id:"c",tileDir:"x",step:-1},{id:"h",tileDir:"y",step:-1},{id:"c",tileDir:"y",step:1},{id:"c",tileDir:"x",step:1},{id:"e",tileDir:"x",step:-1},{id:"i",tileDir:"y",step:1}],[{id:"b",tileDir:"x",step:-1},{id:"b",tileDir:"x",step:-1},{id:"f",tileDir:"y",step:-1},{id:"f",tileDir:"x",step:1},{id:"b",tileDir:"x",
step:1},{id:"b",tileDir:"y",step:1},{id:"g",tileDir:"y",step:-1},{id:"g",tileDir:"x",step:1}],[{id:"d",tileDir:"y",step:1},{id:"c",tileDir:"x",step:-1},{id:"j",tileDir:"x",step:1},{id:"j",tileDir:"y",step:1},{id:"i",tileDir:"x",step:1},{id:"i",tileDir:"x",step:1},{id:"e",tileDir:"y",step:-1},{id:"e",tileDir:"x",step:1},{id:"h",tileDir:"x",step:1},{id:"h",tileDir:"y",step:1}],[{id:"i",tileDir:"x",step:-1},{id:"h",tileDir:"y",step:1},{id:"l",tileDir:"x",step:1},{id:"k",tileDir:"y",step:1},{id:"f",tileDir:"x",
step:-1},{id:"c",tileDir:"x",step:-1},{id:"d",tileDir:"y",step:1},{id:"e",tileDir:"x",step:1},{id:"j",tileDir:"x",step:1}],[{id:"e",tileDir:"x",step:1},{id:"f",tileDir:"x",step:1},{id:"i",tileDir:"y",step:1},{id:"e",tileDir:"y",step:1},{id:"f",tileDir:"x",step:1},{id:"j",tileDir:"y",step:-1},{id:"e",tileDir:"x",step:-1}],[{id:"b",tileDir:"y",step:-1},{id:"c",tileDir:"x",step:1},{id:"k",tileDir:"y",step:1},{id:"k",tileDir:"y",step:1},{id:"h",tileDir:"y",step:-1},{id:"g",tileDir:"y",step:-1},{id:"g",
tileDir:"x",step:1},{id:"j",tileDir:"x",step:1},{id:"h",tileDir:"y",step:1}],[{id:"i",tileDir:"y",step:-1},{id:"i",tileDir:"y",step:-1},{id:"l",tileDir:"x",step:1},{id:"l",tileDir:"y",step:1},{id:"c",tileDir:"x",step:-1},{id:"d",tileDir:"y",step:-1},{id:"l",tileDir:"x",step:1},{id:"c",tileDir:"y",step:1},{id:"d",tileDir:"x",step:-1},{id:"k",tileDir:"y",step:1}],[{id:"e",tileDir:"y",step:-1},{id:"d",tileDir:"y",step:-1},{id:"c",tileDir:"x",step:1},{id:"f",tileDir:"y",step:1},{id:"l",tileDir:"x",step:1},
{id:"l",tileDir:"y",step:1},{id:"g",tileDir:"y",step:-1},{id:"h",tileDir:"y",step:-1},{id:"j",tileDir:"x",step:1},{id:"m",tileDir:"y",step:1}],[{id:"e",tileDir:"y",step:-1},{id:"f",tileDir:"y",step:-1},{id:"h",tileDir:"x",step:-1},{id:"j",tileDir:"x",step:-1},{id:"i",tileDir:"y",step:-1},{id:"l",tileDir:"x",step:1},{id:"l",tileDir:"y",step:1},{id:"i",tileDir:"y",step:1},{id:"j",tileDir:"x",step:1}],[{id:"d",tileDir:"y",step:-1},{id:"l",tileDir:"y",step:1},{id:"h",tileDir:"x",step:1},{id:"h",tileDir:"y",
step:-1},{id:"g",tileDir:"y",step:-1},{id:"g",tileDir:"x",step:1},{id:"c",tileDir:"x",step:-1},{id:"f",tileDir:"x",step:1},{id:"e",tileDir:"x",step:1},{id:"e",tileDir:"y",step:-1},{id:"f",tileDir:"y",step:-1}],[{id:"i",tileDir:"y",step:-1},{id:"h",tileDir:"x",step:-1},{id:"c",tileDir:"y",step:-1},{id:"j",tileDir:"x",step:1},{id:"h",tileDir:"y",step:1},{id:"c",tileDir:"x",step:-1},{id:"j",tileDir:"y",step:-1},{id:"b",tileDir:"y",step:-1},{id:"k",tileDir:"x",step:1},{id:"h",tileDir:"y",step:1},{id:"m",
tileDir:"x",step:1},{id:"n",tileDir:"y",step:1},{id:"c",tileDir:"x",step:-1},{id:"i",tileDir:"y",step:1}]],maxMoves:[1,3,4,8,8,1,7,6,6,6,6,6,7,5,8,8,8,3,8,10,9,9,1,14],bShowTransitionText:!1,stepStrightBase:25,stepArcBase:100,stepSpeedBase:2,stepSpeedQuick:4,stepStrightPad:5,stepStrightSizeMin:32,pauseOverlayDarkness:0.8,optionOverlayDarkness:0.8,starTopUiDelay:0.25,dialogShowSpeed:0.25,selectleveltileDelay:0.025,endGameDelay:0.5}})});ig.baked=!0;
ig.module("game.app.states").requires("impact.game").defines(function(){ig.Game.inject({states:{isPaused:!1,isPusedReset:function(){this.isPaused=!1}}})});ig.baked=!0;ig.module("game.app.querystring").requires("impact.game").defines(function(){ig.Game.inject({queryString:!1,init:function(){this.queryString=this.queryString?QueryString:!1;QueryString=!1}})});
QueryString=function(){for(var j={},l=window.location.search.substring(1).split("&"),m=0;m<l.length;m++){var n=l[m].split("=");if("undefined"===typeof j[n[0]])j[n[0]]=decodeURIComponent(n[1]);else if("string"===typeof j[n[0]]){var p=[j[n[0]],decodeURIComponent(n[1])];j[n[0]]=p}else j[n[0]].push(decodeURIComponent(n[1]))}return j}();ig.baked=!0;
ig.module("game.app.entity").requires("impact.entity").defines(function(){Entity=ig.Entity.extend({init:function(j,l,m){if(ig.global.wm){var n=Math.floor(257*Math.random())+0,p=Math.floor(257*Math.random())+0,s=Math.floor(257*Math.random())+0;this._wmDrawBox=!0;this_wmBoxColor="rgba("+n+","+s+","+p+",1)"}this.parent(j,l,m)},fnGetCenter:function(j){var l={},l={x:this.pos.x+this.size.x/2,y:this.pos.y+this.size.y/2};j&&(l.x-=ig.game.screen.x,l.y-=ig.game.screen.y);return l},fnGetPosByCenter:function(j,
l){var m={x:j.x-this.size.x/2,y:j.y-this.size.y/2};l&&(results.x-=ig.game.screen.x,results.y-=ig.game.screen.y);return m},fnGetBottomRight:function(j){var l={x:this.pos.x+this.size.x,y:this.pos.y+this.size.y};j&&(results.x-=ig.game.screen.x,results.y-=ig.game.screen.y);return l},fnGetState:function(j){return j?void 0!==ig.game.states[j]?ig.game.states[j]:!1:ig.game.states},fnGetLocalState:function(j){return this.fnGetController().fnGetLocalState(j)},fnGetSetting:function(j){return j?ig.game.settings[j]?
ig.game.settings[j]:!1:ig.game.settings},fnGetHelper:function(){return ig.game.helper},fnGetEntities:function(j){return ig.game.getEntitiesByType(j)},fnGetEntity:function(j){return j=(j=this.fnGetEntities(j))&&j[0]?j[0]:!1},fnGetController:function(){return ig.game.controller},fnGetPointer:function(){return ig.game.pointer},fnGetContext:function(){return ig.system.context},fnSetCenter:function(j,l,m,n){if(!j||!l)return!1;switch(j){case "x":if("number"!=typeof l)return!1;this.pos.x=l-this.size.x/2+
(m&&"number"==typeof m?m:0);break;case "y":if("number"!=typeof l)return!1;this.pos.y=l-this.size.y/2+(m&&"number"==typeof m?m:0);break;case "both":if("object"!=typeof l||!l.x||!l.y)return!1;j={x:0,y:0};j.x=m&&m.x?m.x:0;j.y=m&&m.y?m.y:0;this.pos={x:l.x-this.size.x/2+j.x,y:l.y-this.size.y/2+j.y}}n&&(this.pos.x-=ig.game.screen.x,this.pos.y-=ig.game.screen.y);return this},fnSpawn:function(j,l,m,n){return ig.game.spawnEntity(j,l,m,n)},fnCtxWrite:function(j,l,m,n,p,s,A){ig.system.context.font=m+"pt "+l;
ig.system.context.textAlign=p;ig.system.context.fillStyle=n;ig.system.context.fillText(j,s,A);ig.system.context.restore()},fnCtxDot:function(j,l,m,n){n=n||2;ig.system.context.fillStyle=m||"black";ig.system.context.fillRect(j,l,n,n);ig.system.context.restore()},fnDrawOverlay:function(j,l,m){ig.system.context.beginPath();ig.system.context.rect(0,0,j,l);ig.system.context.fillStyle=m;ig.system.context.fill();ig.system.context.restore},clicked:function(){this.pointerHold=!0},clicking:function(){},released:function(){if(!this.pointerHold&&
this.fnGetPointer().hoveringItem==this)for(var j=0;j<ig.game.entities.length;j++)ig.game.entities[j].pointerHold&&(ig.game.entities[j].pointerHold=!1);this.pointerHold&&(this.pointerHold=!1,this.fnGetPointer().fnLetGo())},releasedOutside:function(){this.pointerHold&&(this.pointerHold=!1,this.fnGetPointer().fnLetGo())},leave:function(){document.body.style.cursor="inherit"},over:function(){this.cursor&&(document.body.style.cursor=this.cursor)}});ig.Animation.inject({scale:{x:1,y:1,align:{x:!1,y:!1}},
draw:function(j,l){var m=ig.system.scale;ig.system.context.save();var n=0,p=0,n=this.scale.align&&this.scale.align.x&&"left"==this.scale.align.x?j:this.scale.align&&this.scale.align.x&&"right"==this.scale.align.x?j+this.sheet.width:j+this.sheet.width/2,p=this.scale.align&&this.scale.align.y&&"top"==this.scale.align.y?l:this.scale.align&&this.scale.align.y&&"bottom"==this.scale.align.y?l+this.sheet.height:l+this.sheet.height/2;ig.system.context.translate(n*m,p*m);ig.system.context.scale(this.scale.x,
this.scale.y);ig.system.context.translate(-n*m,-p*m);this.parent(j,l);ig.system.context.restore()}})});ig.baked=!0;
ig.module("game.entities.games.board-game").requires("game.app.entity").defines(function(){EntityBoardGame=Entity.extend({name:"BoardGame",size:{x:480,y:640},animSheet:new ig.AnimationSheet("media/graphics/games/board.png",480,640),oTile:{},iMaxCol:3,iMaxRow:3,arHintMoves:[],arHintTiles:[],arOHintTiles:[],hintShowDelay:0.1,ballRollPlay:!1,init:function(j,l,m){this.parent(j,l,m);this.addAnim("idle",0.1,[0]);this.currentAnim=this.anims.idle;ig.global.wm||(this.zIndex=this.fnGetSetting("enIdx").tileBoard,
ig.game.sortEntitiesDeferred())},fnAddTile:function(j){if(this.oTile[j.tileId]||this.fnGetTileByPos(j.gridAx.x,j.gridAx.y)||this.fnIsOutsideTile(j))return!1;this.oTile[j.tileId]=j;j.board=this},fnGetTileByPos:function(j,l){var m=!1;for(a in this.oTile)if(this.oTile[a].gridAx.x==j&&this.oTile[a].gridAx.y==l){m=this.oTile[a];break}return m},fnIsOutsideTile:function(j){return 0>j.gridAx.x||j.gridAx.x>this.iMaxCol||0>j.gridAx.y||j.gridAx.y>this.iMaxRow?!0:!1},fnInitArrangeTiles:function(){for(b in this.oTile){var j=
this.fnGetGrid(this.oTile[b].gridAx.x,this.oTile[b].gridAx.y);j.bEmpty&&(this.oTile[b].fnSetCenter("both",{x:j.pos.x,y:j.pos.y}),this.fnSetGrid(this.oTile[b].gridAx.x,this.oTile[b].gridAx.y));this.oTile[b].isPath&&this.arHintTiles.push({tileDir:this.oTile[b].tileDir,centerPos:{x:j.pos.x,y:j.pos.y}})}this.fnInitTilesPath()},fnInitTilesPath:function(){for(e in this.oTile)this.oTile[e].fnSetPath()},fnShuffle:function(j){if(j){for(var l=0;l<j.length;l++){var m=j[l],n=this.oTile[m.id];this.fnUnsetGrid(n.gridAx.x,
n.gridAx.y);n.gridAx[m.tileDir]+=m.step;this.fnSetGrid(n.gridAx.x,n.gridAx.y);m=this.fnGetGrid(n.gridAx.x,n.gridAx.y);n.fnSetCenter("both",{x:m.pos.x,y:m.pos.y})}this.arHintMoves=ig.copy(j).reverse()}},fnHideHintTiles:function(){if(0<this.arOHintTiles.length){for(var j=0;j<this.arOHintTiles.length;j++)this.arOHintTiles[j].kill();this.arOHintTiles=[]}},fnShowHintTiles:function(){this.fnHideHintTiles();for(var j=0;j<this.arHintTiles.length;j++){var l=this.arHintTiles[j];this.arOHintTiles.push(this.fnSpawn(EntityTilehintGame,
0,0,{tileDir:l.tileDir,centerPos:l.centerPos,delay:this.hintShowDelay*j}))}},fnMoveTile:function(j,l,m){if(!this.fnGetController().pathCompleted){var n=this.oTile[j];switch(l){case "top":if(0==n.gridAx.y)break;var p=this.fnGetGrid(n.gridAx.x,n.gridAx.y-1);p.bEmpty&&(m&&this.fnGetController().fnAddMoveHistory(j,l),this.fnGetController().uiTop.fnAnimateFontMoves(),n.gridAx.y--,this.fnSetGrid(n.gridAx.x,n.gridAx.y),this.fnUnsetGrid(n.gridAx.x,n.gridAx.y+1),n.fnAnimateMove(p.pos));break;case "bottom":if(n.gridAx.y>
this.iMaxRow)break;p=this.fnGetGrid(n.gridAx.x,n.gridAx.y+1);p.bEmpty&&(m&&this.fnGetController().fnAddMoveHistory(j,l),this.fnGetController().uiTop.fnAnimateFontMoves(),n.gridAx.y++,this.fnSetGrid(n.gridAx.x,n.gridAx.y),this.fnUnsetGrid(n.gridAx.x,n.gridAx.y-1),n.fnAnimateMove(p.pos));break;case "left":if(0==n.gridAx.x)break;p=this.fnGetGrid(n.gridAx.x-1,n.gridAx.y);p.bEmpty&&(m&&this.fnGetController().fnAddMoveHistory(j,l),this.fnGetController().uiTop.fnAnimateFontMoves(),n.gridAx.x--,this.fnSetGrid(n.gridAx.x,
n.gridAx.y),this.fnUnsetGrid(n.gridAx.x+1,n.gridAx.y),n.fnAnimateMove(p.pos));break;case "right":if(n.gridAx.x>this.iMaxRow)break;p=this.fnGetGrid(n.gridAx.x+1,n.gridAx.y);p.bEmpty&&(m&&this.fnGetController().fnAddMoveHistory(j,l),this.fnGetController().uiTop.fnAnimateFontMoves(),n.gridAx.x++,this.fnSetGrid(n.gridAx.x,n.gridAx.y),this.fnUnsetGrid(n.gridAx.x-1,n.gridAx.y),n.fnAnimateMove(p.pos))}}},fnAsignConnectedTiles:function(j,l){var m=!1;l=l||[];if(j)if(m=this.fnFindNextTile(j)){l.push(m);var n=
this.fnAsignConnectedTiles(m,l);if("goal"==m.tileType)return l;if(n)m=l;else return!1}else m=!1;else{for(c in this.oTile){"start"==this.oTile[c].tileType&&(j=this.oTile[c]);break}j&&(l.push(j),m=this.fnAsignConnectedTiles(j,l)?l:!1)}return m},fnFindNextTile:function(j){var l=!1;if("goal"!=j.tileType){var m=j.tileType,m=this.tileDirection["metal"==m?"wood":m]||!1;if(!m)return l;m=m[j.tileDir]||!1;if(!m)return l;m=m[j.dirType]||!1;if(!m)return l;j=this.fnGetGrid(j.gridAx.x+m.nextGrid.x,j.gridAx.y+m.nextGrid.y);
if(!j||j.bEmpty)return l;if((l=this.fnGetTileByPos(j.ax.x,j.ax.y))&&!m.nextDir[l.tileDir])return!1;l&&"goal"==l.tileType||"start"!==l.tileType&&l.fnChangeDirType(m.nextDir[l.tileDir])}return l},fnFindStartTile:function(){var j=!1;for(d in this.oTile)if("start"==this.oTile[d].tileType){j=this.oTile[d];break}return j},fnTriggerCompletedTiles:function(){var j=this.fnAsignConnectedTiles();if(j){ig.soundHandler.sfxPlayer.play("win");var l=_STRINGS.Game.pathcomplete,l=l+(ig.game.namedEntities.HintspinGame?
" "+_STRINGS.Game.hintplus:""),m=ig.game.namedEntities.HintspinGame?!0:!1;this.fnGetSetting("bShowTransitionText")?this.fnSpawn(EntityTransitiontextGame,0,0,{board:this,checkResult:j,message:l,customSize:m}):this.fnDeleteUncompleteTiles(j);this.fnGetController().pathCompleted=!0;this.fnGetController().uiFooter.fnActivateFastButton();this.fnGetController().uiFooter.fnDisableButtonOnCompletedPath()}},fnTriggerFast:function(){for(g in this.oTile)this.oTile[g].ballSpeed=this.fnGetSetting("stepSpeedQuick")},
fnTriggerBallMove:function(){this.ballRollPlay=!0;ig.soundHandler.sfxPlayer.soundList.ballroll._loop=!0;ig.soundHandler.sfxPlayer.play("ballroll");var j=this.fnFindStartTile();j.fnTriggerAnimateBall(j.ball)},fnDeleteUncompleteTiles:function(j){for(var l=0;l<j.length;l++)j[l].deleteMark=!1;l=0;j=!1;for(f in this.oTile)this.oTile[f].deleteMark&&(this.oTile[f].fnTriggerKill(l),l+=0.05,j=this.oTile[f]);j?j.triggerBallMove=!0:this.fnTriggerBallMove()},fnGetGrid:function(j,l){for(var m=this.arGrid.length-
1;0<=m;m--)if(this.arGrid[m].ax.x==j&&this.arGrid[m].ax.y==l)return this.arGrid[m];return!1},fnSetGrid:function(j,l){for(var m=this.arGrid.length-1;0<=m;m--)this.arGrid[m].ax.x==j&&this.arGrid[m].ax.y==l&&(this.arGrid[m].bEmpty=!1)},fnUnsetGrid:function(j,l){for(var m=this.arGrid.length-1;0<=m;m--)this.arGrid[m].ax.x==j&&this.arGrid[m].ax.y==l&&(this.arGrid[m].bEmpty=!0)},fnPause:function(){this.ballRollPlay&&ig.soundHandler.sfxPlayer.soundList.ballroll.stop()},fnUnpause:function(){this.ballRollPlay&&
(ig.soundHandler.sfxPlayer.soundList.ballroll._loop=!0,ig.soundHandler.sfxPlayer.play("ballroll"))},arGrid:[{ax:{x:0,y:0},pos:{x:93,y:201},bEmpty:!0},{ax:{x:1,y:0},pos:{x:191,y:201},bEmpty:!0},{ax:{x:2,y:0},pos:{x:289,y:201},bEmpty:!0},{ax:{x:3,y:0},pos:{x:387,y:201},bEmpty:!0},{ax:{x:0,y:1},pos:{x:93,y:299},bEmpty:!0},{ax:{x:1,y:1},pos:{x:191,y:299},bEmpty:!0},{ax:{x:2,y:1},pos:{x:289,y:299},bEmpty:!0},{ax:{x:3,y:1},pos:{x:387,y:299},bEmpty:!0},{ax:{x:0,y:2},pos:{x:93,y:397},bEmpty:!0},{ax:{x:1,
y:2},pos:{x:191,y:397},bEmpty:!0},{ax:{x:2,y:2},pos:{x:289,y:397},bEmpty:!0},{ax:{x:3,y:2},pos:{x:387,y:397},bEmpty:!0},{ax:{x:0,y:3},pos:{x:93,y:495},bEmpty:!0},{ax:{x:1,y:3},pos:{x:191,y:495},bEmpty:!0},{ax:{x:2,y:3},pos:{x:289,y:495},bEmpty:!0},{ax:{x:3,y:3},pos:{x:387,y:495},bEmpty:!0}],tileDirection:{start:{t:{cw:{nextGrid:{x:0,y:1},nextDir:{v:"cw",lt:"cw",rt:"ccw"}}},b:{ccw:{nextGrid:{x:0,y:-1},nextDir:{v:"ccw",lb:"ccw",rb:"cw"}}},l:{cw:{nextGrid:{x:1,y:0},nextDir:{h:"cw",lb:"cw",lt:"ccw"}}},
r:{ccw:{nextGrid:{x:-1,y:0},nextDir:{h:"ccw",rb:"ccw",rt:"cw"}}}},wood:{h:{cw:{nextGrid:{x:1,y:0},nextDir:{h:"cw",r:"cw",lb:"cw",lt:"ccw"}},ccw:{nextGrid:{x:-1,y:0},nextDir:{h:"ccw",l:"ccw",rb:"ccw",rt:"cw"}}},v:{cw:{nextGrid:{x:0,y:1},nextDir:{v:"cw",b:"cw",lt:"cw",rt:"ccw"}},ccw:{nextGrid:{x:0,y:-1},nextDir:{v:"ccw",t:"ccw",lb:"ccw",rb:"cw"}}},rt:{cw:{nextGrid:{x:0,y:-1},nextDir:{v:"ccw",t:"ccw",lb:"ccw",rb:"cw"}},ccw:{nextGrid:{x:1,y:0},nextDir:{h:"cw",r:"cw",lb:"cw",lt:"ccw"}}},rb:{cw:{nextGrid:{x:1,
y:0},nextDir:{h:"cw",r:"cw",lb:"cw",lt:"ccw"}},ccw:{nextGrid:{x:0,y:1},nextDir:{v:"cw",b:"cw",lt:"cw",rt:"ccw"}}},lb:{cw:{nextGrid:{x:0,y:1},nextDir:{v:"cw",b:"cw",lt:"cw",rt:"ccw"}},ccw:{nextGrid:{x:-1,y:0},nextDir:{h:"ccw",l:"ccw",rb:"ccw",rt:"cw"}}},lt:{cw:{nextGrid:{x:-1,y:0},nextDir:{h:"ccw",l:"ccw",rb:"ccw",rt:"cw"}},ccw:{nextGrid:{x:0,y:-1},nextDir:{v:"ccw",t:"ccw",lb:"ccw",rb:"cw"}}}}}})});ig.baked=!0;
ig.module("game.app.storage").requires("impact.game").defines(function(){ig.Game.inject({init:function(){this.parent();try{localStorage.setItem("testStorage","testStorage"),localStorage.removeItem("testStorage"),localStorageSupport="localStorage"in window&&null!==window.localStorage,ig.game.storage=new ig.Storage}catch(j){ig.game.storage={data:{},set:function(j,m){this.data[j]=m},get:function(j){return this.data[j]}}}}})});ig.baked=!0;
ig.module("game.app.service").requires("game.app.storage").defines(function(){Service=ig.Class.extend({nameSpace:"puzzle-ball",init:function(j){this.nameSpace=j||this.nameSpace},fnSetNameSpace:function(j){this.nameSpace=j},_set:function(j,l){var m=this._get();m[j]=l;ig.game.storage.set(this.nameSpace,m);return this},_unset:function(j){var l=this._get();delete l[j];ig.game.storage.set(this.nameSpace,l)},_get:function(j){var l=ig.game.storage.get(this.nameSpace);if(!l||void 0===l||"object"!==typeof l)l=
{};return j?void 0!=l[j]?l[j]:void 0:l}})});ig.baked=!0;ig.module("game.services.hint").requires("game.app.service").defines(function(){HintService=Service.extend({fnGet:function(){return this._get("hint")||0},fnAdd:function(){this._set("hint",this.fnGet()+1)},fnReduce:function(){var j=this.fnGet();this._set("hint",j-(0<j?1:0))},fnGetHints:function(){return this._get("hints")||{}},fnSetHints:function(j){var l=this.fnGetHints();l[j]=!0;this._set("hints",l)}})});ig.baked=!0;
ig.module("game.entities.games.tile-game").requires("game.app.entity","game.services.hint","impact.timer").defines(function(){EntityTileGame=Entity.extend({name:"TileGame",size:{x:98,y:98},animSheet:new ig.AnimationSheet("media/graphics/sprites/tiles.png",98,98),tileType:"wood",tileDir:"n",type:ig.Entity.TYPE.B,cursor:"pointer",iDragDiffIntent:30,path:[],connected:!1,dirType:"cw",dirTypeOri:!1,animateBall:!1,animateBallIndex:0,deleteMark:!0,spinRemoveAnimate:!1,hintspinFixed:!1,ballSpeed:0,hintService:new HintService,
showEndGameTimer:!1,init:function(j,l,m){this.parent(j,l,m);this.fnSetAnim();this.currentAnim=this.anims.default;ig.global.wm||(this.ballSpeed=this.fnGetSetting("stepSpeedBase"),this.star&&(this.star=this.fnSpawn(EntityStarpickGame,-500,-500)),"goal"==this.tileType&&this.hintSpin&&(this.hintSpin=this.hintService.fnGetHints()[this.fnGetController().level]?!1:this.fnSpawn(EntityHintspinGame,-500,-500)),this.zIndex=this.fnGetSetting("enIdx").tile,ig.game.sortEntitiesDeferred())},fnSetStarPos:function(){this.star&&
this.star.fnSetCenter("both",this.fnGetCenter(),{x:this.starLocation[this.tileDir].x,y:this.starLocation[this.tileDir].y})},fnSetHintspin:function(){if(this.hintSpin&&"goal"==this.tileType&&this.hintSpin&&!this.hintspinFixed){this.hintspinFixed=!0;var j=this.path.length-1,l=this.fnGetPivot();this.hintSpin.fnSetCenter("both",{x:this.path[j].x+l.x,y:this.path[j].y+l.y})}},fnSetBall:function(){if("start"==this.tileType&&this.ball&&this.path){this.ball=this.fnSpawn(EntityBallGame,0,0);var j=this.fnGetPivot();
this.ball.fnSetCenter("both",{x:j.x+this.path[0].x,y:j.y+this.path[0].y});this.fnGetController().ball=this.ball}},fnSetAnim:function(){if("wood"==this.tileType)switch(this.tileDir){case "h":this.addAnim("default",0.1,[15]);break;case "v":this.addAnim("default",0.1,[14]);break;case "rt":this.addAnim("default",0.1,[16]);break;case "lt":this.addAnim("default",0.1,[17]);break;case "lb":this.addAnim("default",0.1,[18]);break;case "rb":this.addAnim("default",0.1,[19])}else if("wood-empty"==this.tileType)this.addAnim("default",
0.1,[20]);else if("start"==this.tileType)switch(this.tileDir){case "t":this.addAnim("default",0.1,[4]);break;case "b":this.addAnim("default",0.1,[5]);break;case "r":this.addAnim("default",0.1,[6]);break;case "l":this.addAnim("default",0.1,[7])}else if("metal"==this.tileType)switch(this.tileDir){case "h":this.addAnim("default",0.1,[9]);break;case "v":this.addAnim("default",0.1,[8]);break;case "rt":this.addAnim("default",0.1,[11]);break;case "lt":this.addAnim("default",0.1,[10]);break;case "lb":this.addAnim("default",
0.1,[12]);break;case "rb":this.addAnim("default",0.1,[13])}else if("goal"==this.tileType)switch(this.tileDir){case "t":this.addAnim("default",0.1,[0]);break;case "b":this.addAnim("default",0.1,[1]);break;case "r":this.addAnim("default",0.1,[2]);break;case "l":this.addAnim("default",0.1,[3])}},draw:function(){this.parent()},fnChangeDirType:function(j){this.dirType!=j&&(this.dirType=j,this.path=this.path.reverse())},fnSetPath:function(){if("wood-empty"!=this.tileType){this.path=[];this.fnGetCenter();
var j=this.size.x/2,l=Math.PI;aglTop=3*Math.PI/2;aglRight=2*Math.PI;aglBottom=Math.PI/2;var m=this.fnGetSetting("stepStrightBase"),n=this.fnGetSetting("stepArcBase"),p=this.fnGetSetting("stepStrightPad"),s=this.fnGetSetting("stepStrightSizeMin");switch(this.tileDir){case "lt":this.fnCreateArcPath(j,n,aglRight,Math.PI/2);break;case "lb":this.fnCreateArcPath(j,n,aglTop,Math.PI/2);break;case "rb":this.fnCreateArcPath(j,n,l,Math.PI/2);break;case "rt":this.fnCreateArcPath(j,n,aglBottom,Math.PI/2);break;
case "v":this.fnCreateStrightPath(this.tileDir,m,this.size.x);break;case "h":this.fnCreateStrightPath(this.tileDir,m,this.size.x);break;case "l":this.fnCreateStrightPath(this.tileDir,m-p,this.size.x-s);"goal"==this.tileType&&this.fnChangeDirType("ccw");break;case "r":this.fnCreateStrightPath(this.tileDir,m-p,this.size.x-s);"start"==this.tileType&&this.fnChangeDirType("ccw");break;case "t":this.fnCreateStrightPath(this.tileDir,m-p,this.size.y-s);"goal"==this.tileType&&this.fnChangeDirType("ccw");break;
case "b":this.fnCreateStrightPath(this.tileDir,m-p,this.size.y-s),"start"==this.tileType&&this.fnChangeDirType("ccw")}this.fnSetBall()}},fnGetPivot:function(){var j=this.fnGetSetting("stepStrightSizeMin"),l=this.fnGetCenter(),m=this.fnGetBottomRight(),n={x:0,y:0};switch(this.tileDir){case "lt":n={x:this.pos.x,y:this.pos.y};break;case "lb":n={x:this.pos.x,y:m.y};break;case "rt":n={x:m.x,y:this.pos.y};break;case "rb":n={x:m.x,y:m.y};break;case "v":n={x:l.x,y:this.pos.y};break;case "t":n={x:l.x,y:this.pos.y+
j};break;case "b":n={x:l.x,y:this.pos.y};break;case "h":n={x:this.pos.x,y:l.y};break;case "l":n={x:this.pos.x+j,y:l.y};break;case "r":n={x:this.pos.x,y:l.y}}return n},fnCreateStrightPath:function(j,l,m){if("v"==j||"t"==j||"b"==j)for(j=0;j<=l;j++)this.path.push({x:0,y:j/l*m});else if("h"==j||"l"==j||"r"==j)for(j=0;j<=l;j++)this.path.push({x:j/l*m,y:0})},fnCreateArcPath:function(j,l,m,n){for(var p=0,s=0;s<l;s++)if(p=2*Math.PI*s/l,this.path.push({x:j*Math.cos(m+p),y:j*Math.sin(m+p)}),Math.abs(2*Math.PI*
(s+1)/l)>n){this.path.push({x:j*Math.cos(m+n),y:j*Math.sin(m+n)});break}},clicked:function(){this.parent();"wood"!=this.tileType&&"wood-empty"!=this.tileType||(this.prePointerPos=this.fnGetPointer().fnGetCenter(),this.prePointerPos={x:this.prePointerPos.x,y:this.prePointerPos.y},this.beginDrag=!0)},over:function(){this.cursor="wood"==this.tileType||"wood-empty"==this.tileType?"pointer":"inherit";this.parent()},fnTestCheckTileStep:function(j){var l,m;switch(j){case "top":l="y";m=-1;break;case "bottom":l=
"y";m=1;break;case "left":l="x";m=-1;break;case "right":l="x",m=1}return{id:this.tileId,tileDir:l,step:m}},fnDetectTileMove:function(){if(this.pointerHold&&!this.bMoveAnimate&&this.beginDrag){var j=this.fnPredictDragIntent();if(j&&!(0==this.fnGetController().level&&this.fnGetController().tutorial&&("top"!=j||"c"!=this.tileId))){0==this.fnGetController().level&&this.fnGetController().tutorial&&(this.fnGetController().tutorialService.fnSet(),this.fnGetController().tutorial.kill());var l="top"==j?{x:this.gridAx.x,
y:this.gridAx.y-1}:"bottom"==j?{x:this.gridAx.x,y:this.gridAx.y+1}:"left"==j?{x:this.gridAx.x-1,y:this.gridAx.y}:{x:this.gridAx.x+1,y:this.gridAx.y};if((l=this.board.fnGetGrid(l.x,l.y))&&l.bEmpty)this.fnGetPointer().fnLetGo(),this.beginDrag=!1,this.board.fnHideHintTiles(),this.board.fnMoveTile(this.tileId,j,!0),ig.game.namedEntities.HintspinGame&&this.fnGetController().stepHistory.length>this.fnGetSetting("maxMoves")[this.fnGetController().level]&&(ig.game.namedEntities.HintspinGame.addHint=!1,ig.game.namedEntities.HintspinGame.kill())}}},
fnAnimateBall:function(){if(this.animateBall&&this.ball&&"BallGame"==this.ball.name)if(this.animateBallIndex>this.path.length-1&&"goal"==this.tileType){var j=this.fnGetPivot();this.ball.fnSetCenter("both",{x:j.x+this.path[this.path.length-1].x,y:j.y+this.path[this.path.length-1].y});this.fnStopAnimateBall();this.showEndGameTimer=new ig.Timer(this.fnGetSetting("endGameDelay"))}else this.animateBallIndex>=this.path.length-1&&"goal"!=this.tileType?(this.board.fnFindNextTile(this).fnTriggerAnimateBall(this.ball),
this.fnStopAnimateBall()):(j=this.fnGetPivot(),this.ball.fnSetCenter("both",{x:j.x+this.path[this.animateBallIndex].x,y:j.y+this.path[this.animateBallIndex].y}),this.animateBallIndex+=this.ballSpeed)},update:function(){this.parent();this.fnGetState().isPaused||(this.fnSetStarPos(),this.fnSetHintspin(),this.fnDetectTileMove(),this.fnAnimateBall(),this.showEndGameTimer&&0<this.showEndGameTimer.delta()&&(this.showEndGameTimer=!1,this.fnGetController().fnShowEndGameDialog()))},fnAnimateMove:function(j){j=
this.fnGetPosByCenter(j);this.bMoveAnimate=!0;this.zIndex++;ig.game.sortEntitiesDeferred();this.tween({pos:{x:j.x,y:j.y}},0.1,{easing:ig.Tween.Easing.Back.EaseOut,onComplete:function(){this.bMoveAnimate=!1;this.zIndex--;ig.game.sortEntitiesDeferred();this.fnGetController().board.fnTriggerCompletedTiles();ig.soundHandler.sfxPlayer.play("tile")}.bind(this)}).start()},fnPredictDragIntent:function(){var j=this.fnGetPointer().fnGetCenter();if(this.fnGetHelper().fnGetDistance(this.prePointerPos,{x:j.x,
y:j.y})>this.iDragDiffIntent){var l=j.x-this.prePointerPos.x,j=j.y-this.prePointerPos.y,m=Math.abs(l)>Math.abs(j)?"x":"y";return"x"==m&&0<l?"right":"x"==m&&0>l?"left":"y"==m&&0<j?"bottom":"top"}return!1},fnTriggerAnimateBall:function(j){j&&"BallGame"==j.name&&(this.animateBall=!0,this.ball=j,j=this.fnGetPivot(),this.ball.fnSetCenter("both",{x:j.x+this.path[this.animateBallIndex].x,y:j.y+this.path[this.animateBallIndex].y}),this.animateBallIndex++)},fnStopAnimateBall:function(){"goal"==this.tileType&&
(ig.soundHandler.sfxPlayer.soundList.ballroll.stop(),ig.soundHandler.sfxPlayer.play("tile"));this.animateBall=!1;this.animateBallIndex=0;delete this.ball},fnTriggerKill:function(j){this.zIndex++;ig.game.sortEntitiesDeferred();this.tween({currentAnim:{scale:{x:0,y:0}}},0.5,{easing:ig.Tween.Easing.Back.EaseIn,delay:j,onUpdate:function(){porp="currentAnim";this.currentAnim.angle+=Math.PI/4*ig.system.tick;this.star&&(this.star.fnTriggerShrink(),this.star=!1)}.bind(this),onComplete:function(){this.triggerBallMove&&
this.board.fnTriggerBallMove();this.kill()}.bind(this)}).start()},fnPause:function(){this.pauseTweens()},fnUnpause:function(){this.resumeTweens()},starLocation:{h:{x:0,y:0},v:{x:-1,y:0},rt:{x:10,y:-18},rb:{x:10,y:12},lb:{x:-12,y:10},lt:{x:-10,y:-18}},fnUpdateHintPos:function(){this.tilehint.fnSetCenter("both",this.fnGetCenter())}})});ig.baked=!0;
ig.module("game.entities.games.tile-helper").requires("game.app.entity").defines(function(){EntityTileHelper=Entity.extend({name:"TileHelper",size:{x:98,y:98},animSheet:new ig.AnimationSheet("media/graphics/sprites/tiles.png",98,98),type:ig.Entity.TYPE.B,init:function(j,l,m){this.parent(j,l,m);ig.global.wm||(this.zIndex=this.fnGetSetting("enIdx").tile,this.fnSetCenter("both",ig.system.width/2,ig.system.height/2),this.fnSetAnim(),ig.game.sortEntitiesDeferred())},fnSetAnim:function(){if("wood"==this.tileType)switch(this.tileDir){case "h":this.addAnim("default",
0.1,[15]);break;case "v":this.addAnim("default",0.1,[14]);break;case "rt":this.addAnim("default",0.1,[16]);break;case "lt":this.addAnim("default",0.1,[17]);break;case "lb":this.addAnim("default",0.1,[18]);break;case "rb":this.addAnim("default",0.1,[19])}else if("wood-empty"==this.tileType)this.addAnim("default",0.1,[20]);else if("start"==this.tileType)switch(this.tileDir){case "t":this.addAnim("default",0.1,[4]);break;case "b":this.addAnim("default",0.1,[5]);break;case "r":this.addAnim("default",
0.1,[6]);break;case "l":this.addAnim("default",0.1,[7])}else if("metal"==this.tileType)switch(this.tileDir){case "h":this.addAnim("default",0.1,[9]);break;case "v":this.addAnim("default",0.1,[8]);break;case "rt":this.addAnim("default",0.1,[11]);break;case "lt":this.addAnim("default",0.1,[10]);break;case "lb":this.addAnim("default",0.1,[12]);break;case "rb":this.addAnim("default",0.1,[13])}else if("goal"==this.tileType)switch(this.tileDir){case "t":this.addAnim("default",0.1,[0]);break;case "b":this.addAnim("default",
0.1,[1]);break;case "r":this.addAnim("default",0.1,[2]);break;case "l":this.addAnim("default",0.1,[3])}},update:function(){this.pointerHold&&(this.fnSetCenter("both",this.fnGetPointer().fnGetCenter()),console.log(this.fnGetCenter()))}})});ig.baked=!0;
ig.module("game.entities.games.ball-game").requires("game.app.entity").defines(function(){EntityBallGame=Entity.extend({name:"BallGame",size:{x:32,y:32},animSheet:new ig.AnimationSheet("media/graphics/games/ball.png",32,32),checkAgainst:ig.Entity.TYPE.A,star:0,arPath:[],init:function(j,l,m){this.parent(j,l,m);this.addAnim("idle",0.1,[0]);this.currentAnim=this.anims.idle;ig.global.wm||(this.zIndex=this.fnGetSetting("enIdx").ball,ig.game.sortEntitiesDeferred())},check:function(j){this.parent();"StarpickGame"==
j.name&&!j.shrinking&&(j.fnTriggerShrink(),this.fnGetController().currentScore++,this.fnGetController().currentScore>this.fnGetController().score.fnGet(this.fnGetController().level)&&this.fnGetController().fnAddScore());"HintspinGame"==j.name&&!j.shrinking&&j.fnTriggerShrink()}})});ig.baked=!0;
ig.module("game.entities.games.starpick-game").requires("game.app.entity").defines(function(){EntityStarpickGame=Entity.extend({name:"StarpickGame",size:{x:41,y:39},animSheet:new ig.AnimationSheet("media/graphics/sprites/star-pick.png",41,39),type:ig.Entity.TYPE.A,shrinking:!1,disablePointer:!0,pausedFrame:0,init:function(j,l,m){this.parent(j,l,m);this.addAnim("idle",0.1,[0,1,2,3,4,5]);this.currentAnim=this.anims.idle;ig.global.wm||(this.zIndex=this.fnGetSetting("enIdx").starpick,ig.game.sortEntitiesDeferred())},
fnTriggerShrink:function(){switch(this.fnGetController().currentScore){case 0:ig.soundHandler.sfxPlayer.play("ding1");break;case 1:ig.soundHandler.sfxPlayer.play("ding2");break;case 2:ig.soundHandler.sfxPlayer.play("ding3")}this.shrinking=!0;this.tween({currentAnim:{alpha:0},pos:{y:this.pos.y-40}},0.5,{easing:ig.Tween.Easing.Sinusoidal.EaseInOut,onComplete:function(){this.kill()}.bind(this)}).start()},update:function(){this.fnGetState("isPaused")||this.parent()},fnPause:function(){this.pauseTweens();
this.pausedFrame=this.currentAnim.frame},fnUnpause:function(){this.resumeTweens();this.currentAnim.gotoFrame(this.pausedFrame)}})});ig.baked=!0;
ig.module("game.entities.games.hintspin-game").requires("game.app.entity","game.services.hint").defines(function(){EntityHintspinGame=Entity.extend({name:"HintspinGame",size:{x:32,y:32},animSheet:new ig.AnimationSheet("media/graphics/sprites/hint-spin.png",32,32),type:ig.Entity.TYPE.A,shrinking:!1,disablePointer:!0,pausedFrame:0,addHint:!0,hintService:new HintService,init:function(j,l,m){this.parent(j,l,m);this.addAnim("idle",0.1,[0,1,2,3,4,5,6,7,8,9]);this.currentAnim=this.anims.idle;ig.global.wm||
(this.zIndex=this.fnGetSetting("enIdx").hintspin,ig.game.sortEntitiesDeferred())},fnTriggerShrink:function(){ig.soundHandler.sfxPlayer.play("hint");this.shrinking=!0;this.tween({currentAnim:{alpha:0.5},pos:{x:305,y:580}},0.5,{easing:ig.Tween.Easing.Sinusoidal.EaseInOut,onComplete:function(){this.kill()}.bind(this)}).start()},update:function(){this.fnGetState("isPaused")||this.parent()},fnPause:function(){this.pauseTweens();this.pausedFrame=this.currentAnim.frame},fnUnpause:function(){this.resumeTweens();
this.currentAnim.gotoFrame(this.pausedFrame)},kill:function(){this.addHint&&!this.hintService.fnGetHints()[this.fnGetController().level]&&(ig.game.namedEntities.UiframeBottomGame.fnAddHint(),this.hintService.fnSetHints(this.fnGetController().level));this.parent()}})});ig.baked=!0;
ig.module("game.entities.games.uiframe-bottom-game").requires("game.app.entity","game.services.hint").defines(function(){EntityUiframeBottomGame=Entity.extend({name:"UiframeBottomGame",size:{x:480,y:96},animSheet:new ig.AnimationSheet("media/graphics/games/ui-frame-bottom.png",480,96),hintService:new HintService,hintRemaining:0,init:function(j,l,m){this.parent(j,l,m);this.addAnim("idle",0.1,[0]);this.currentAnim=this.anims.idle;ig.global.wm||(this.fnUpdateHintRemaining(),this.zIndex=this.fnGetSetting("enIdx").uiFrameBottom,
this.fnInitButtons(),ig.game.sortEntitiesDeferred())},fnAddHint:function(){this.hintService.fnAdd();this.fnUpdateHintRemaining()},fnReduceHint:function(){this.hintService.fnReduce();this.fnUpdateHintRemaining()},fnUpdateHintRemaining:function(){this.hintRemaining=this.hintService.fnGet()},fnInitButtons:function(){var j=this.fnGetCenter();this.backBtn=this.fnSpawn(EntityUibuttonBack,0,0,{frame:this}).fnSetCenter("both",{x:j.x,y:j.y},{x:-160,y:0});this.resetBtn=this.fnSpawn(EntityUibuttonReset,0,0,
{frame:this}).fnSetCenter("both",{x:j.x,y:j.y},{x:-80,y:0});this.undoBtn=this.fnSpawn(EntityUibuttonUndo,0,0,{frame:this}).fnSetCenter("both",{x:j.x,y:j.y},{x:0,y:0});this.hintBtn=this.fnSpawn(EntityUibuttonHint,0,0,{frame:this}).fnSetCenter("both",{x:j.x,y:j.y},{x:80,y:0});this.fastBtn=this.fnSpawn(EntityUibuttonFast,0,0,{frame:this}).fnSetCenter("both",{x:j.x,y:j.y},{x:160,y:0})},fnActivateUndo:function(){this.undoBtn.fnActivate()},fnDeactivateUndo:function(){this.undoBtn.fnDeactivate()},fnActivateFastButton:function(){this.fastBtn.fnActivate()},
fnDisableButtonOnCompletedPath:function(){this.backBtn.fnDisabled();this.resetBtn.fnDisabled();this.hintBtn.fnDisabled();this.undoBtn.fnDeactivate()},draw:function(){this.parent();var j=this.fnGetCenter();this.fnCtxWrite(_STRINGS.Game.back,"sketch-block",14,this.fnGetSetting("color").captionLeather,"center",j.x-160,j.y+40);this.fnCtxWrite(_STRINGS.Game.restart,"sketch-block",14,this.fnGetSetting("color").captionLeather,"center",j.x-80,j.y+40);this.fnCtxWrite(_STRINGS.Game.undo,"sketch-block",14,this.fnGetSetting("color").captionLeather,
"center",j.x,j.y+40);this.fnCtxWrite(_STRINGS.Game.hints+":"+this.hintRemaining+"","sketch-block",14,this.fnGetSetting("color").captionLeather,"center",j.x+80,j.y+40);this.fnCtxWrite(_STRINGS.Game.faster,"sketch-block",14,this.fnGetSetting("color").captionLeather,"center",j.x+160,j.y+40)}});EntityUibuttonBack=Entity.extend({name:"UibuttonBack",size:{x:52,y:51},animSheet:new ig.AnimationSheet("media/graphics/sprites/button-game.png",52,51),type:ig.Entity.TYPE.A,cursor:"pointer",init:function(j,l,m){this.parent(j,
l,m);this.addAnim("idle",0.1,[21]);this.addAnim("hover",0.1,[20]);this.currentAnim=this.anims.idle;ig.global.wm||(this.zIndex=this.fnGetSetting("enIdx").uiButtonBottom,ig.game.sortEntitiesDeferred())},clicked:function(){this.disabled||(this.levelSplasher=this.fnSpawn(EntityLevelSplasher,0,0,{alpha:0,onFinish:function(){ig.game.director.loadLevel(1)},killOnfinish:!1}).fnAnimateOut(),ig.soundHandler.sfxPlayer.play("button"))},over:function(){this.disabled?this.cursor="inherit":this.currentAnim=this.anims.hover},
leave:function(){this.currentAnim=this.anims.idle},fnDisabled:function(){this.disabled=!0}});EntityUibuttonReset=Entity.extend({name:"UibuttonReset",size:{x:52,y:51},animSheet:new ig.AnimationSheet("media/graphics/sprites/button-game.png",52,51),type:ig.Entity.TYPE.A,cursor:"pointer",init:function(j,l,m){this.parent(j,l,m);this.addAnim("idle",0.1,[19]);this.addAnim("hover",0.1,[18]);this.currentAnim=this.anims.idle;ig.global.wm||(this.zIndex=this.fnGetSetting("enIdx").uiButtonBottom,ig.game.sortEntitiesDeferred())},
clicked:function(){if(!this.disabled&&(this.fnGetController().fnReloadLevel(),ig.soundHandler.sfxPlayer.play("button"),typeof("function"==ig.onLevelReplay))){var j="Level "+((new LevelService).fnLoadLevel().fnGetLevel()+1);ig.onLevelReplay(j)}},over:function(){this.disabled?this.cursor="inherit":this.currentAnim=this.anims.hover},leave:function(){this.currentAnim=this.anims.idle},fnDisabled:function(){this.disabled=!0}});EntityUibuttonUndo=Entity.extend({name:"UibuttonUndo",size:{x:52,y:51},animSheet:new ig.AnimationSheet("media/graphics/sprites/button-game.png",
52,51),type:ig.Entity.TYPE.A,disabled:!0,cursor:"pointer",init:function(j,l,m){this.parent(j,l,m);this.addAnim("disabled",0.1,[15]);this.addAnim("idle",0.1,[17]);this.addAnim("hover",0.1,[16]);this.currentAnim=this.anims.disabled;ig.global.wm||(this.zIndex=this.fnGetSetting("enIdx").uiButtonBottom,ig.game.sortEntitiesDeferred())},clicked:function(){this.parent();this.disabled||(this.fnGetController().fnUndo(),ig.soundHandler.sfxPlayer.play("button"))},over:function(){this.disabled?this.cursor="inherit":
this.currentAnim=this.anims.hover},leave:function(){this.currentAnim=!this.disabled?this.anims.idle:this.anims.disabled;this.cursor="pointer"},fnActivate:function(){this.disabled=!1;this.currentAnim=this.anims.idle},fnDeactivate:function(){this.disabled=!0;this.currentAnim=this.anims.disabled}});EntityUibuttonHint=Entity.extend({name:"UibuttonHint",size:{x:52,y:51},animSheet:new ig.AnimationSheet("media/graphics/sprites/button-game.png",52,51),type:ig.Entity.TYPE.A,cursor:"pointer",init:function(j,
l,m){this.parent(j,l,m);this.addAnim("idle",0.1,[14]);this.addAnim("hover",0.1,[13]);this.currentAnim=this.anims.idle;ig.global.wm||(this.zIndex=this.fnGetSetting("enIdx").uiButtonBottom,ig.game.sortEntitiesDeferred())},over:function(){0<this.frame.hintRemaining&&!this.disabled?(this.currentAnim=this.anims.hover,this.cursor="pointer"):this.cursor="inherit"},leave:function(){this.currentAnim=this.anims.idle},clicked:function(){0<this.frame.hintRemaining&&!this.disabled&&(this.fnGetController().board.fnShowHintTiles(),
this.frame.fnReduceHint(),ig.soundHandler.sfxPlayer.play("hint"))},fnDisabled:function(){this.disabled=!0}});EntityUibuttonFast=Entity.extend({name:"UibuttonFast",size:{x:52,y:51},animSheet:new ig.AnimationSheet("media/graphics/sprites/button-game.png",52,51),type:ig.Entity.TYPE.A,disabled:!0,cursor:"pointer",init:function(j,l,m){this.parent(j,l,m);this.addAnim("disabled",0.1,[10]);this.addAnim("idle",0.1,[12]);this.addAnim("hover",0.1,[11]);this.currentAnim=this.anims.disabled;ig.global.wm||(this.zIndex=
this.fnGetSetting("enIdx").uiButtonBottom,ig.game.sortEntitiesDeferred())},clicked:function(){this.parent();this.disabled||(this.fnGetController().fnFast(),this.disabled=!0,this.currentAnim=this.anims.disabled,this.cursor="inherit",ig.soundHandler.sfxPlayer.play("button"))},over:function(){this.disabled?this.cursor="inherit":this.currentAnim=this.anims.hover},leave:function(){this.currentAnim=!this.disabled?this.anims.idle:this.anims.disabled;this.cursor="pointer"},fnActivate:function(){this.disabled=
!1;this.currentAnim=this.anims.idle}})});ig.baked=!0;ig.module("game.services.level").requires("game.app.service").defines(function(){LevelService=Service.extend({level:0,unlockedLevel:0,fnSaveLevel:function(j){this._set("level",j);this.level=j;return this},fnLoadLevel:function(){this.level=this._get("level")||0;return this},fnGetLevel:function(){return this.level},fnSaveUnlockedLevel:function(j){this._set("unlockedLevel",j)},fnGetUnlockedLevel:function(){return this._get("unlockedLevel")||0}})});
ig.baked=!0;
ig.module("game.entities.games.uiframe-top-game").requires("game.services.level","game.app.entity").defines(function(){EntityUiframeTopGame=Entity.extend({name:"UiframeTopGame",size:{x:480,y:144},animSheet:new ig.AnimationSheet("media/graphics/games/ui-frame-top.png",480,144),levelService:new LevelService,fMovesFontSizeBase:14,fMovesFontSizeBig:18,fMovesFontSize:14,rgbMoves:{},rgbMovesBase:{},init:function(j,l,m){this.parent(j,l,m);this.addAnim("idle",0.1,[0]);this.currentAnim=this.anims.idle;ig.global.wm||
(this.rgbMovesBase=ig.copy(this.fnGetSetting("color").rgbMovesBase),this.rgbMoves=ig.copy(this.rgbMovesBase),this.zIndex=this.fnGetSetting("enIdx").uiFrameTop,this.fnInitButton(),this.levelService.fnLoadLevel(),ig.game.sortEntitiesDeferred())},fnInitButton:function(){this.pauseBtn=this.fnSpawn(EntityUibuttonPause,380,15);this.optionBtn=this.fnSpawn(EntityUibuttonOption,380,70)},fnAnimateFontMoves:function(){var j=this.tween({fMovesFontSize:this.fMovesFontSizeBig,rgbMoves:{r:this.fnGetSetting("color").rgbMovesAnimate.r,
g:this.fnGetSetting("color").rgbMovesAnimate.g,b:this.fnGetSetting("color").rgbMovesAnimate.b}},0.1,{easing:ig.Tween.Easing.Sinusoidal.EaseIn}),l=this.tween({fMovesFontSize:this.fMovesFontSizeBase,rgbMoves:{r:this.rgbMovesBase.r,g:this.rgbMovesBase.g,b:this.rgbMovesBase.b}},0.1,{easing:ig.Tween.Easing.Sinusoidal.EaseOut});j.chain(l);j.start()},draw:function(){this.parent();var j=this.fnGetCenter();this.fnCtxWrite("Level "+(this.levelService.fnGetLevel()+1),"sketch-block",15,this.fnGetSetting("color").captionBoard,
"center",j.x,j.y-50);this.fnCtxWrite(_STRINGS.Game.moves,"sketch-block",13,this.fnGetSetting("color").captionLeather,"center",j.x-166,j.y-35);var l;l="rgba(R,G,B,1)".replace("R",this.rgbMoves.r.round());l=l.replace("G",this.rgbMoves.g.round());l=l.replace("B",this.rgbMoves.b.round());this.fnCtxWrite(this.fnGetController().stepHistory.length,"sketch-block",this.fMovesFontSize,l,"center",j.x-166,j.y-10);this.fnCtxWrite(_STRINGS.Game.best,"sketch-block",14,this.fnGetSetting("color").captionLeather,"center",
j.x-166,j.y+15);this.fnCtxWrite(this.fnGetController().bestPath.fnGet(this.fnGetController().level)||"-","sketch-block",this.fMovesFontSizeBase,this.fnGetSetting("color").value,"center",j.x-166,j.y+35)}});EntityUibuttonPause=Entity.extend({name:"UibuttonBack",size:{x:52,y:51},animSheet:new ig.AnimationSheet("media/graphics/sprites/button-game.png",52,51),type:ig.Entity.TYPE.A,cursor:"pointer",init:function(j,l,m){this.parent(j,l,m);this.addAnim("idle",0.1,[3]);this.addAnim("hover",0.1,[2]);this.currentAnim=
this.anims.idle;ig.global.wm||(this.zIndex=this.fnGetSetting("enIdx").uiButtonTop,ig.game.sortEntitiesDeferred())},clicked:function(){this.parent();this.fnGetState("isPaused")||(ig.game.fnPause(),this.fnGetController().fnShowPauseDialog(),this.currentAnim=this.anims.idle,ig.soundHandler.sfxPlayer.play("button"))},over:function(){this.currentAnim=this.anims.hover},leave:function(){this.currentAnim=this.anims.idle}});EntityUibuttonOption=Entity.extend({name:"UibuttonOption",size:{x:52,y:51},animSheet:new ig.AnimationSheet("media/graphics/sprites/button-game.png",
52,51),type:ig.Entity.TYPE.A,cursor:"pointer",init:function(j,l,m){this.parent(j,l,m);this.addAnim("idle",0.1,[1]);this.addAnim("hover",0.1,[0]);this.currentAnim=this.anims.idle;ig.global.wm||(this.zIndex=this.fnGetSetting("enIdx").uiButtonTop,ig.game.sortEntitiesDeferred())},clicked:function(){this.parent();ig.game.fnPause();this.fnGetController().fnShowOptionDialog();this.currentAnim=this.anims.idle;ig.soundHandler.sfxPlayer.play("button")},over:function(){this.currentAnim=this.anims.hover},leave:function(){this.currentAnim=
this.anims.idle}})});ig.baked=!0;
ig.module("game.entities.games.paused-game").requires("game.app.entity").defines(function(){EntityPausedGame=Entity.extend({name:"PausedGame",size:{x:460,y:840},type:ig.Entity.TYPE.A,opacity:0,init:function(j,l,m){this.parent(j,l,m);ig.global.wm||(this.fnGetCenter(),this.frame=this.fnSpawn(EntityPausedgameFrame,0,0,{overlay:this}),this.frame.fnShow(),this.zIndex=this.fnGetSetting("enIdx").paused,ig.game.sortEntitiesDeferred())},draw:function(){this.parent();ig.system.context.beginPath();ig.system.context.rect(0,
0,480,640);ig.system.context.fillStyle="rgba(0,0,0,"+this.opacity+")";ig.system.context.fill();ig.system.context.restore}});EntityPausedgameFrame=Entity.extend({name:"PausedgameFrame",size:{x:299,y:105},animSheet:new ig.AnimationSheet("media/graphics/games/paused-frame.png",299,105),init:function(j,l,m){this.parent(j,l,m);this.addAnim("idle",0.1,[0]);this.currentAnim=this.anims.idle;ig.global.wm||(j=this.overlay.fnGetCenter(),this.fnSetCenter("both",{x:j.x,y:-500}),this.hidePos={x:j.x,y:-500},this.showPos=
{x:j.x,y:250},this.resumeBtn=this.fnSpawn(EntityResumeBtn,0,0,{dialog:this}),this.fnSetResumeBtnPos(),this.zIndex=this.fnGetSetting("enIdx").paused+1,ig.game.sortEntitiesDeferred())},fnSetResumeBtnPos:function(){var j=this.fnGetCenter();this.resumeBtn.fnSetCenter("both",j,{y:15})},fnShow:function(){this.tween({pos:{y:this.showPos.y}},0.25,{easing:ig.Tween.Easing.Exponential.EaseOut,onUpdate:function(j,l,m,n,p){this.overlay.opacity=this.fnGetSetting("pauseOverlayDarkness")*p}.bind(this)}).start()},
fnHideKill:function(){this.tween({pos:{y:this.hidePos.y}},0.25,{easing:ig.Tween.Easing.Exponential.EaseIn,onUpdate:function(j,l,m,n,p){this.overlay.opacity-=this.fnGetSetting("pauseOverlayDarkness")*p}.bind(this),onComplete:function(){this.kill()}.bind(this)}).start()},update:function(){this.parent();this.fnSetResumeBtnPos()},kill:function(){this.overlay.kill();this.resumeBtn.kill();this.parent()},draw:function(){this.parent();var j=this.fnGetCenter();this.fnCtxWrite(_STRINGS.Game.paused,"sketch-block",
16,"black","center",j.x,j.y-30)}});EntityResumeBtn=Entity.extend({name:"ResumeBtn",size:{x:52,y:51},animSheet:new ig.AnimationSheet("media/graphics/sprites/button-game.png",52,51),type:ig.Entity.TYPE.A,cursor:"pointer",init:function(j,l,m){this.parent(j,l,m);this.addAnim("idle",0.1,[7]);this.addAnim("hover",0.1,[6]);this.currentAnim=this.anims.idle;ig.global.wm||(this.zIndex=this.fnGetSetting("enIdx").paused+2,ig.game.sortEntitiesDeferred())},released:function(){this.parent();ig.game.fnUnpause();
ig.soundHandler.sfxPlayer.play("button");this.dialog.fnHideKill()},over:function(){this.parent();this.currentAnim=this.anims.hover},leave:function(){this.parent();this.currentAnim=this.anims.idle}})});ig.baked=!0;
ig.module("game.services.sound").requires("game.app.service").defines(function(){SoundService=Service.extend({fnSetSfx:function(j){this._set("sfx",j)},fnSetBgm:function(j){this._set("bgm",j)},fnGetSfx:function(){var j=this._get("sfx");if(void 0==j||!1===j)j=1,this.fnSetSfx(j);return j},fnGetBgm:function(){var j=this._get("bgm");if(void 0==j||!1===j)j=0.5,this.fnSetBgm(j);return j}})});ig.baked=!0;
ig.module("game.entities.games.option-game").requires("game.services.sound","game.app.entity").defines(function(){EntityOptionGame=Entity.extend({name:"OptionGame",size:{x:480,y:640},type:ig.Entity.TYPE.A,opacity:0,init:function(j,l,m){this.parent(j,l,m);ig.global.wm||(this.frame=this.fnSpawn(EntityOptionFrame,0,0,{overlay:this}),this.frame.fnShow(),this.zIndex=this.fnGetSetting("enIdx").option,ig.game.sortEntitiesDeferred())},draw:function(){this.parent();ig.system.context.beginPath();ig.system.context.rect(0,
0,480,640);ig.system.context.fillStyle="rgba(0,0,0,"+this.opacity+")";ig.system.context.fill();ig.system.context.restore}});EntityOptionFrame=Entity.extend({name:"OptionFrame",size:{x:309,y:297},animSheet:new ig.AnimationSheet("media/graphics/games/sound-frame.png",309,297),soundBar:new ig.Image("media/graphics/games/sound-bar.png"),service:new SoundService,soundValue:0,musicValue:0,init:function(j,l,m){this.parent(j,l,m);this.addAnim("idle",0.1,[0]);this.currentAnim=this.anims.idle;ig.global.wm||
(j=this.overlay.fnGetCenter(),this.fnSetCenter("both",{x:j.x,y:-500}),this.hidePos={x:j.x,y:-500},this.showPos={x:j.x,y:150},this.okBtn=this.fnSpawn(EntityOptionokGame,0,0,{dialog:this}),this.fnUpdateOkBtnPos(j),this.closeBtn=this.fnSpawn(EntityClosedialogGame,0,0,{dialog:this}),this.fnUpdateCloseBtnPos(j),l=this.soundBar.width/2,this.soundValue=this.service.fnGetSfx(),this.musicValue=this.service.fnGetBgm(),this.oKnobs={sound:this.fnSpawn(EntitySoundknobGame,0,0,{dialog:this,knobType:"sfx",centerX:287,
diffCenter:l,value:this.soundValue}),music:this.fnSpawn(EntitySoundknobGame,0,0,{dialog:this,knobType:"bgm",centerX:287,diffCenter:l,value:this.musicValue})},this.fnUpdateSliderPos(j,!0),this.zIndex=this.fnGetSetting("enIdx").option+1,ig.game.sortEntitiesDeferred())},fnShow:function(){this.tween({pos:{y:this.showPos.y}},this.fnGetSetting("dialogShowSpeed"),{easing:ig.Tween.Easing.Exponential.EaseOut,onUpdate:function(j,l,m,n,p){this.overlay.opacity=this.fnGetSetting("optionOverlayDarkness")*p}.bind(this)}).start()},
fnHideKill:function(){ig.game.states.isPaused&&ig.game.fnUnpause();this.tween({pos:{y:this.hidePos.y}},0.25,{easing:ig.Tween.Easing.Exponential.EaseIn,onUpdate:function(j,l,m,n,p){this.overlay.opacity-=this.fnGetSetting("pauseOverlayDarkness")*p}.bind(this),onComplete:function(){"MainmenuCtrl"==this.fnGetController().name&&0<ig.game.getEntitiesByType(EntityButtonMoreGames).length&&ig.game.getEntitiesByType(EntityButtonMoreGames)[0].show();this.kill()}.bind(this)}).start()},fnUpdateOkBtnPos:function(j){this.okBtn.fnSetCenter("both",
j,{y:100})},fnUpdateCloseBtnPos:function(j){this.closeBtn.fnSetCenter("both",j,{x:148,y:-122})},fnUpdateSliderPos:function(j){this.oKnobs.sound.fnSetCenter("y",j.y-54);this.oKnobs.music.fnSetCenter("y",j.y+16)},fnSaveSfxBgmValue:function(){this.service.fnSetSfx(this.soundValue);this.service.fnSetBgm(this.musicValue)},update:function(){this.parent();var j=this.fnGetCenter();this.fnUpdateOkBtnPos(j);this.fnUpdateCloseBtnPos(j);this.fnUpdateSliderPos(j)},kill:function(){this.overlay.kill();this.okBtn.kill();
this.closeBtn.kill();this.oKnobs.sound.kill();this.oKnobs.music.kill();this.parent()},draw:function(){this.parent();var j=this.fnGetCenter();this.fnCtxWrite(_STRINGS.Game.options,"sketch-block",16,this.fnGetSetting("color").captionBoard,"center",j.x,j.y-120);this.fnCtxWrite(_STRINGS.Game.sound,"sketch-block",16,this.fnGetSetting("color").captionLeather,"right",j.x-50,j.y-50);this.fnCtxWrite(_STRINGS.Game.music,"sketch-block",16,this.fnGetSetting("color").captionLeather,"right",j.x-50,j.y+20);this.soundBar.draw(j.x-
25,j.y+7);this.soundBar.draw(j.x-25,j.y-63)}});EntityOptionokGame=Entity.extend({name:"OptionokGame",size:{x:52,y:51},animSheet:new ig.AnimationSheet("media/graphics/sprites/button-game.png",52,51),type:ig.Entity.TYPE.A,cursor:"pointer",init:function(j,l,m){this.parent(j,l,m);this.addAnim("idle",0.1,[5]);this.addAnim("hover",0.1,[4]);this.currentAnim=this.anims.idle;ig.global.wm||(this.zIndex=this.fnGetSetting("enIdx").option+2,ig.game.sortEntitiesDeferred())},clicked:function(){this.parent();this.dialog.fnSaveSfxBgmValue();
ig.soundHandler.sfxPlayer.play("button");this.dialog.fnHideKill()},over:function(){this.parent();this.currentAnim=this.anims.hover},leave:function(){this.parent();this.currentAnim=this.anims.idle}});EntityClosedialogGame=Entity.extend({name:"ClosedialogGame",size:{x:40,y:39},animSheet:new ig.AnimationSheet("media/graphics/sprites/close-dialog.png",40,39),type:ig.Entity.TYPE.A,cursor:"pointer",init:function(j,l,m){this.parent(j,l,m);this.addAnim("idle",0.1,[1]);this.addAnim("hover",0.1,[0]);this.currentAnim=
this.anims.idle;ig.global.wm||(this.zIndex=this.fnGetSetting("enIdx").option+3,ig.game.sortEntitiesDeferred())},clicked:function(){this.parent();ig.soundHandler.sfxPlayer.volume(this.dialog.service.fnGetSfx());ig.soundHandler.bgmPlayer.volume(this.dialog.service.fnGetBgm());ig.soundHandler.sfxPlayer.play("button");this.dialog.fnHideKill()},over:function(){this.parent();this.currentAnim=this.anims.hover},leave:function(){this.parent();this.currentAnim=this.anims.idle}});EntitySoundknobGame=Entity.extend({name:"SoundknobGame",
size:{x:41,y:41},animSheet:new ig.AnimationSheet("media/graphics/games/sound-knob.png",41,41),type:ig.Entity.TYPE.A,cursor:"pointer",init:function(j,l,m){this.parent(j,l,m);this.addAnim("idle",0.1,[0]);this.currentAnim=this.anims.idle;ig.global.wm||(this.fnSetPosXByValue(),this.zIndex=this.fnGetSetting("enIdx").option+3,ig.game.sortEntitiesDeferred())},fnCalculatePosXByValue:function(){return{min:this.centerX-this.diffCenter,delta:2*this.diffCenter*this.value}},fnCalculateValueByPos:function(){var j=
this.centerX-this.diffCenter,l=2*this.diffCenter,j=this.fnGetCenter().x-j,l=this.fnGetHelper().fnR2D(j/l);"sfx"==this.knobType?this.dialog.soundValue=l:this.dialog.musicValue=l;return l},fnSetPosXByValue:function(){var j=this.fnCalculatePosXByValue();this.fnSetCenter("x",j.min+j.delta)},fnDrawBarColor:function(){var j=this.fnCalculatePosXByValue(),l=j.min+2,m=this.fnGetCenter().y-6,n=this.fnGetSetting("color").soundLevel;n[n.changed]=(255*this.value).round();ig.system.context.shadowColor="rgba("+
n.r+","+n.g+","+n.b+",1)";ig.system.context.shadowBlur=10;ig.system.context.fillStyle="rgba("+n.r+","+n.g+","+n.b+",1)";this.fnGetHelper().fnRoundRect(ig.system.context,l,m,j.delta,10,5,!0,!1);ig.system.context.shadowColor="rgba(0,0,0,0)";ig.system.context.shadowBlur=0;ig.system.context.restore()},fnSetSoundhandlerSfxVolume:function(){},draw:function(){this.fnDrawBarColor();this.parent()},released:function(){this.parent();"sfx"==this.knobType&&ig.soundHandler.sfxPlayer.play("button")},update:function(){this.parent();
if(this.pointerHold){var j=this.fnGetPointer().fnGetCenter();j.x<this.centerX-this.diffCenter?this.fnSetCenter("x",this.centerX-this.diffCenter):j.x>this.centerX+this.diffCenter?this.fnSetCenter("x",this.centerX+this.diffCenter):this.fnSetCenter("x",j.x)}this.value=this.fnCalculateValueByPos();this.pointerHold&&"bgm"==this.knobType?ig.soundHandler.bgmPlayer.volume(this.value):this.pointerHold&&"sfx"==this.knobType&&ig.soundHandler.sfxPlayer.volume(this.value)}})});ig.baked=!0;
ig.module("game.entities.games.starstatusuitop-game").requires("game.app.entity").defines(function(){EntityStarstatusuitopGame=Entity.extend({name:"StarstatusuitopGame",score:!1,arElement:[],init:function(j,l,m){this.parent(j,l,m);if(!ig.global.wm){for(j=0;j<this.score;j++)this.fnActivateStar(j,this.fnGetSetting("starTopUiDelay")*j);this.zIndex=this.fnGetSetting("enIdx").starstatusUiTop;ig.game.sortEntitiesDeferred()}},fnActivateStar:function(j,l){var m;m=0==j?{x:167,y:96}:1==j?{x:239,y:86}:{x:311,
y:96};this.arElement.push(this.fnSpawn(EntityStarstatusuitopElement,m.x,m.y,{index:j,delay:l}))},fnAddScore:function(){2<this.arElement.length||(this.score++,this.fnActivateStar(this.arElement.length,0))}});EntityStarstatusuitopElement=Entity.extend({name:"StarstatusuitopElement",animSheet:new ig.AnimationSheet("media/graphics/sprites/star-uitop.png",75,71),size:{x:75,y:71},init:function(j,l,m){this.parent(j,l,m);ig.global.wm||(this.index%2?this.addAnim("idle",0.1,[0]):this.addAnim("idle",0.1,[1]),
this.currentAnim=this.anims.idle,this.fnSetCenter("both",this.pos),this.currentAnim.scale={x:0,y:0},this.fnTriggerEntrance(this.delay),this.zIndex=this.fnGetSetting("enIdx").starstatusUiTop+1,ig.game.sortEntitiesDeferred())},fnTriggerEntrance:function(j){this.tween({currentAnim:{scale:{x:1,y:1}}},0.3,{easing:ig.Tween.Easing.Sinusoidal.EaseOut,delay:j,onUpdate:function(j,m,n,p,s){this.currentAnim.angle=2*Math.PI*s}.bind(this),onComplete:function(){}.bind(this)}).start()}})});ig.baked=!0;
ig.module("game.entities.games.enddialog-game").requires("game.app.entity","game.services.level").defines(function(){EntityEnddialogGame=Entity.extend({name:"EnddialogGame",size:{x:480,y:640},type:ig.Entity.TYPE.A,opacity:0,init:function(j,l,m){this.parent(j,l,m);ig.global.wm||(j=this.fnGetCenter(),this.anchor=this.fnSpawn(EntityStarendAnchor,j.x,-500,{overlay:this}),this.anchor.fnShow(),this.zIndex=this.fnGetSetting("enIdx").starendgame,ig.game.sortEntitiesDeferred(),ig.soundHandler.sfxPlayer.play("enddialog"))},
draw:function(){this.parent();ig.system.context.beginPath();ig.system.context.rect(0,0,480,640);ig.system.context.fillStyle="rgba(0,0,0,"+this.opacity+")";ig.system.context.fill();ig.system.context.restore},kill:function(){this.anchor.kill();this.parent()}});EntityStarendAnchor=Entity.extend({name:"StarendAnchor",nextEvent:!1,init:function(j,l,m){this.parent(j,l,m);ig.global.wm||(this.fnSetCenter("both",this.pos),j=this.fnGetCenter(),this.hidePosY=this.pos.y,this.showPosY=ig.system.height/2-50,this.dialog=
this.fnSpawn(EntityStarendDialog,j.x,j.y,{anchor:this}),this.fnUpdateDialogPos(),this.zIndex=this.fnGetSetting("enIdx").starendgame+1,ig.game.sortEntitiesDeferred())},fnShow:function(){this.tween({pos:{x:this.pos.x,y:this.showPosY}},this.fnGetSetting("dialogShowSpeed"),{easing:ig.Tween.Easing.Exponential.EaseOut,onUpdate:function(j,l,m,n,p){this.overlay.opacity=this.fnGetSetting("optionOverlayDarkness")*p}.bind(this),onComplete:function(){this.fnGenerateStars()}.bind(this)}).start()},fnHide:function(){this.tween({pos:{x:this.pos.x,
y:this.hidePosY}},this.fnGetSetting("dialogShowSpeed"),{easing:ig.Tween.Easing.Exponential.EaseIn,onUpdate:function(j,l,m,n,p){this.overlay.opacity-=this.fnGetSetting("pauseOverlayDarkness")*p}.bind(this),onComplete:function(){this.fnResponseOnClose()}.bind(this)}).start()},fnGenerateStars:function(){this.stars=[];for(var j=this.fnGetController().currentScore,l=0;l<=j-1;l++)relPos=0===l?{x:-56,y:-144}:1==l?{x:1,y:-156}:{x:56,y:-144},this.stars.push(this.fnSpawn(EntityStarend,0,0,{index:l,relPos:relPos,
delay:l*this.fnGetSetting("starTopUiDelay")}));this.fnUpdateStarPos();for(l=0;l<this.stars.length;l++)this.stars[l].fnTriggerEntrance()},fnUpdateStarPos:function(){if(this.stars)for(var j=this.fnGetCenter(),l=0;l<this.stars.length;l++){var m=this.stars[l];m.fnSetCenter("both",j,{x:m.relPos.x,y:m.relPos.y})}},fnUpdateDialogPos:function(){var j=this.fnGetCenter();this.dialog.fnSetCenter("both",j)},update:function(){this.parent();this.fnUpdateDialogPos();this.fnUpdateStarPos()},fnResponseOnClose:function(){this.nextEvent;
"reset"==this.nextEvent&&this.fnGetController().fnReloadLevel()},kill:function(){if(this.stars)for(var j=0;j<this.stars.length;j++)this.stars[j].kill();this.dialog.kill();this.parent()}});EntityStarendDialog=Entity.extend({name:"StarendDialog",size:{x:309,y:347},animSheet:new ig.AnimationSheet("media/graphics/games/end-game-dialog.png",309,347),init:function(j,l,m){this.parent(j,l,m);this.addAnim("idle",0.1,[0]);this.currentAnim=this.anims.idle;ig.global.wm||(this.fnInitButtons(),this.fnUpdateButtonPos(),
this.zIndex=this.fnGetSetting("enIdx").starendgame+2,ig.game.sortEntitiesDeferred())},fnInitButtons:function(){this.fnGetController().level+1>this.fnGetSetting("layout").length-1?(this.levelBtn=this.fnSpawn(EntityLevelendBtn,0,0,{dialog:this}),this.retryBtn=this.fnSpawn(EntityRetryendBtn,0,0,{dialog:this})):(this.levelBtn=this.fnSpawn(EntityLevelendBtn,0,0,{dialog:this}),this.retryBtn=this.fnSpawn(EntityRetryendBtn,0,0,{dialog:this}),this.nextBtn=this.fnSpawn(EntityNextendBtn,0,0,{dialog:this}))},
fnUpdateButtonPos:function(){var j=this.fnGetCenter();this.fnGetController().level+1>this.fnGetSetting("layout").length-1?(this.fnUpdateButtonElements(this.levelBtn,j,{x:-42,y:100}),this.fnUpdateButtonElements(this.retryBtn,j,{x:42,y:100})):(this.fnUpdateButtonElements(this.levelBtn,j,{x:-85,y:100}),this.fnUpdateButtonElements(this.retryBtn,j,{x:0,y:100}),this.fnUpdateButtonElements(this.nextBtn,j,{x:85,y:100}))},fnUpdateButtonElements:function(j,l,m){j.fnSetCenter("both",{x:l.x+m.x,y:l.y+m.y})},
update:function(){this.parent();this.fnUpdateButtonPos()},draw:function(){this.parent();var j=this.fnGetCenter();this.fnCtxWrite(_STRINGS.Game.levelcomplete,"sketch-block",16,this.fnGetSetting("color").captionBoard,"center",j.x,j.y-98);this.fnCtxWrite(_STRINGS.Game.moves,"sketch-block",16,this.fnGetSetting("color").captionLeather,"right",j.x-45,j.y-25);var l=this.fnGetController().stepHistory.length;this.fnCtxWrite(l,"sketch-block",16,this.fnGetSetting("color").value,"center",j.x+38,j.y-25);this.fnCtxWrite(_STRINGS.Game.best,
"sketch-block",16,this.fnGetSetting("color").captionLeather,"right",j.x-45,j.y+43);var m=this.fnGetController().bestPath.fnGet(this.fnGetController().level)||!1;this.fnCtxWrite((!1===m?l:l<m?l:!1)||m,"sketch-block",16,this.fnGetSetting("color").value,"center",j.x+38,j.y+43)},kill:function(){this.levelBtn.kill();this.retryBtn.kill();this.nextBtn&&this.nextBtn.kill();this.parent()}});EntityLevelendBtn=Entity.extend({name:"LevelenBtn",size:{x:52,y:51},animSheet:new ig.AnimationSheet("media/graphics/sprites/button-game.png",
52,51),type:ig.Entity.TYPE.A,cursor:"pointer",init:function(j,l,m){this.parent(j,l,m);this.addAnim("idle",0.1,[9]);this.addAnim("hover",0.1,[8]);this.currentAnim=this.anims.idle;ig.global.wm||(this.zIndex=this.fnGetSetting("enIdx").starendgame+3,ig.game.sortEntitiesDeferred())},clicked:function(){this.parent();ig.soundHandler.sfxPlayer.play("button");this.fnGetController().fnShowSelectLevelDialog();cmgAdBreak()},over:function(){this.parent();this.currentAnim=this.anims.hover},leave:function(){this.parent();
this.currentAnim=this.anims.idle}});EntityRetryendBtn=Entity.extend({name:"RetryendBtn",size:{x:52,y:51},animSheet:new ig.AnimationSheet("media/graphics/sprites/button-game.png",52,51),type:ig.Entity.TYPE.A,cursor:"pointer",clicked:function(){this.parent();ig.soundHandler.sfxPlayer.play("button");this.dialog.anchor.nextEvent="reset";this.dialog.anchor.fnHide();cmgAdBreak();if(typeof("function"==ig.onLevelReplay)){var j="Level "+((new LevelService).fnLoadLevel().fnGetLevel()+1);ig.onLevelReplay(j)}},
init:function(j,l,m){this.parent(j,l,m);this.addAnim("idle",0.1,[19]);this.addAnim("hover",0.1,[18]);this.currentAnim=this.anims.idle;ig.global.wm||(this.zIndex=this.fnGetSetting("enIdx").starendgame+3,ig.game.sortEntitiesDeferred())},over:function(){this.parent();this.currentAnim=this.anims.hover},leave:function(){this.parent();this.currentAnim=this.anims.idle}});EntityNextendBtn=Entity.extend({name:"NextendBtn",size:{x:52,y:51},animSheet:new ig.AnimationSheet("media/graphics/sprites/button-game.png",
52,51),type:ig.Entity.TYPE.A,cursor:"pointer",init:function(j,l,m){this.parent(j,l,m);this.addAnim("idle",0.1,[7]);this.addAnim("hover",0.1,[6]);this.currentAnim=this.anims.idle;ig.global.wm||(this.zIndex=this.fnGetSetting("enIdx").starendgame+3,ig.game.sortEntitiesDeferred())},over:function(){this.parent();this.currentAnim=this.anims.hover},leave:function(){this.parent();this.currentAnim=this.anims.idle},clicked:function(){this.parent();(new LevelService).fnSaveLevel(this.fnGetController().level+
1);this.dialog.anchor.nextEvent="reset";ig.soundHandler.sfxPlayer.play("button");this.dialog.anchor.fnHide();cmgAdBreak();if(typeof("function"==ig.onLevelStart)){var j="Level "+((new LevelService).fnLoadLevel().fnGetLevel()+1);ig.onLevelStart(j)}}});EntityStarend=Entity.extend({name:"Starend",size:{x:68,y:66},animSheet:new ig.AnimationSheet("media/graphics/sprites/star-end.png",68,66),init:function(j,l,m){this.parent(j,l,m);ig.global.wm||(0==this.index%2?this.addAnim("idle",0.1,[1]):this.addAnim("idle",
0.1,[0]),this.currentAnim=this.anims.idle,this.currentAnim.scale.x=0,this.currentAnim.scale.y=0,this.zIndex=this.fnGetSetting("enIdx").starendgame+4,ig.game.sortEntitiesDeferred())},fnTriggerEntrance:function(){this.tween({currentAnim:{scale:{x:1,y:1},angle:2*Math.PI}},0.5,{easing:ig.Tween.Easing.Exponential.EaseOut,delay:this.delay}).start()}})});ig.baked=!0;
ig.module("game.services.score").requires("game.app.service").defines(function(){ScoreService=Service.extend({score:0,fnLoad:function(){this.score=this._get("score")||{};return this},fnGet:function(j){return this.score[j]||0},fnSet:function(j,l){this.score[l]=this.score[l]?this.score[l]<j?j:this.score[l]:j},fnIsNewRecord:function(j){if(this.score[j]){var l=this._get("score")||!1;return l?l[j]?l[j]<this.score[j]?!0:!1:!0:!0}return!0},fnSave:function(){this._set("score",this.score)}})});ig.baked=!0;
ig.module("game.entities.games.levelselect-game").requires("game.app.entity","game.services.level","game.services.score").defines(function(){EntityLevelselectGame=Entity.extend({name:"LevelselectGame",size:{x:480,y:640},opacity:0,type:ig.Entity.TYPE.A,init:function(j,l,m){this.parent(j,l,m);ig.global.wm||(j=this.fnGetCenter(),this.anchor=this.fnSpawn(EntityAnchorLevelselect,j.x,-500,{overlay:this}),this.anchor.fnShow(),this.zIndex=this.fnGetSetting("enIdx").levelselect,ig.game.sortEntitiesDeferred())},
draw:function(){this.parent();ig.system.context.beginPath();ig.system.context.rect(0,0,480,640);ig.system.context.fillStyle="rgba(0,0,0,"+this.opacity+")";ig.system.context.fill();ig.system.context.restore},kill:function(){this.anchor.kill();this.parent()}});EntityAnchorLevelselect=Entity.extend({name:"AnchorLevelselect",nextLevel:!1,init:function(j,l,m){this.parent(j,l,m);ig.global.wm||(this.fnSetCenter("both",this.pos),this.hidePosY=this.fnGetCenter().y,this.showPosY=ig.system.height/2-30,this.dialog=
this.fnSpawn(EntityDialogLevelselect,0,0,{anchor:this}),this.fnUpdateDialogPos(),this.zIndex=this.fnGetSetting("enIdx").levelselect+1,ig.game.sortEntitiesDeferred())},fnShow:function(){this.tween({pos:{x:this.pos.x,y:this.showPosY}},this.fnGetSetting("dialogShowSpeed"),{easing:ig.Tween.Easing.Exponential.EaseOut,onUpdate:function(j,l,m,n,p){this.overlay.opacity=this.fnGetSetting("optionOverlayDarkness")*p}.bind(this),onComplete:function(){this.dialog.fnGenerateLevelTile(0)}.bind(this)}).start()},
fnHide:function(){this.tween({pos:{x:this.pos.x,y:this.hidePosY}},this.fnGetSetting("dialogShowSpeed"),{easing:ig.Tween.Easing.Exponential.EaseIn,onUpdate:function(j,l,m,n,p){this.overlay.opacity-=this.fnGetSetting("optionOverlayDarkness")*p}.bind(this),onComplete:function(){"MainmenuCtrl"==this.fnGetController().name&&0<ig.game.getEntitiesByType(EntityButtonMoreGames).length&&ig.game.getEntitiesByType(EntityButtonMoreGames)[0].show();this.fnParentKill()}.bind(this)}).start()},fnUpdateDialogPos:function(){var j=
this.fnGetCenter();this.dialog.fnSetCenter("both",j)},update:function(){this.parent();this.fnUpdateDialogPos();this.dialog.fnUpdate()},fnParentKill:function(){!1!==this.nextLevel&&ig.game.getEntityByName("EnddialogGame")?(ig.game.getEntityByName("EnddialogGame").anchor.nextEvent="reset",ig.game.getEntityByName("EnddialogGame").anchor.fnHide()):!1!==this.nextLevel&&ig.game.getEntityByName("BgMenu")&&this.fnGetController().fnGotoGameLevel();this.overlay.kill()},kill:function(){this.dialog.kill();this.parent()}});
EntityDialogLevelselect=Entity.extend({name:"DialogLevelselect",size:{x:309,y:298},animSheet:new ig.AnimationSheet("media/graphics/games/level-select-dialog.png",309,298),arPageSelector:[],levelGrid:[],arTile:[],pageSelector:!1,selectedPageIndex:0,bTileAnimate:!1,levelStorage:new LevelService,scoreStorage:new ScoreService,init:function(j,l,m){this.parent(j,l,m);this.addAnim("idle",0.1,[0]);this.currentAnim=this.anims.idle;ig.global.wm||(this.scoreStorage.fnLoad(),this.fnInitButtons(),this.fnUpdateBtnPos(),
this.zIndex=this.fnGetSetting("enIdx").levelselect+2,ig.game.sortEntitiesDeferred())},fnInitButtons:function(){this.fnGetCenter();this.closeBtn=this.fnSpawn(EntityCloseLevelselect,0,0,{dialog:this,relPos:{x:148,y:-120}});this.fnInitPageSelector();this.stepBtn={next:this.fnSpawn(EntityLevelselectBtnStep,0,0,{dialog:this}),prev:this.fnSpawn(EntityLevelselectBtnStep,0,0,{dialog:this,btnType:"prev"})}},fnInitPageSelector:function(j){j=j||this.selectedPageIndex;var l=this.fnGetSetting("layout").length,
l=Math.floor(l/12)+(l%12?1:0),m=(ig.system.width-(1==l?0:16*(l-1)+10*(l-1)))/2,n=0;this.pageCount=l;for(var p=0;p<l;p++)n+=0<p?26:0,this.arPageSelector.push(this.fnSpawn(EntityLevelselectPage,0,0,{startPosX:m,relPos:{y:110,x:n},pageType:"holder",dialog:this,iPageIdx:p}));this.arPageSelector&&(this.pageSelector=this.fnSpawn(EntityLevelselectPage,0,0,{iPageIdx:j,dialog:this}))},fnUpdatePageSelectorPos:function(j){for(var l=0;l<this.arPageSelector.length;l++){var m=this.arPageSelector[l];m.fnSetCenter("both",
{x:m.startPosX+m.relPos.x,y:j.y+m.relPos.y})}this.pageSelector&&this.pageSelector.fnSetCenter("both",this.arPageSelector[this.pageSelector.iPageIdx].fnGetCenter())},fnUpdateBtnPos:function(){var j=this.fnGetCenter();this.closeBtn.fnSetCenter("both",j,{x:this.closeBtn.relPos.x,y:this.closeBtn.relPos.y});this.fnUpdatePageSelectorPos(j);this.stepBtn.next.fnSetCenter("both",j,{x:180,y:10});this.stepBtn.prev.fnSetCenter("both",j,{x:-180,y:10})},fnClose:function(){for(var j=0;j<this.arTile.length;j++)this.arTile[j].fnHide({bCloseDialog:!0})},
fnChangePage:function(j){this.selectedPageIndex=j;this.bTileAnimate=!0;j=this.pageSelector.tween({currentAnim:{scale:{x:0,y:0}}},0.1,{easing:ig.Tween.Easing.Sinusoidal.EaseIn,onComplete:function(){this.pageSelector.iPageIdx=this.selectedPageIndex;this.pageSelector.fnSetCenter("both",this.arPageSelector[this.selectedPageIndex].fnGetCenter())}.bind(this)});var l=this.pageSelector.tween({currentAnim:{scale:{x:1,y:1}}},0.1,{easing:ig.Tween.Easing.Sinusoidal.EaseOut,onComplete:function(){for(var j=0;j<
this.arTile.length;j++)this.arTile[j].fnHide({iNextPage:this.selectedPageIndex})}.bind(this)});j.chain(l);j.start()},fnGenerateLevelTile:function(j){if(!this.bTileAnimate){this.fnGenerateGridPos();this.fnGetSetting("layout");var l=this.fnGetSetting("layout").slice(12*j,12*j+12);this.arTile=[];for(var m=0;m<l.length;m++)this.arTile.push(this.fnSpawn(EntityLevelselectTile,0,0,{centerPos:this.levelGrid[m].pos,dialog:this,delay:(m+1)*this.fnGetSetting("selectleveltileDelay"),index:m,isUnlocked:this.levelStorage.fnGetUnlockedLevel()>=
12*j+m,level:12*j+m,star:this.scoreStorage.fnGet(12*j+m)})),this.arTile[this.arTile.length-1].fnShow()}},fnGenerateGridPos:function(){this.levelGrid=[];this.fnGetCenter();for(var j=this.size.x,l=this.size.y,j=j/4-j/4/4+4,l=l/3-l/3/3,m=this.pos.x,n=this.pos.y+10,p=0;3>p;p++)for(var n=n+l,s=0;4>s;s++)m=0==s?this.pos.x:m,m+=j,this.levelGrid.push({isHead:0==s?!0:!1,isTail:3==s?!0:!1,pos:{x:m,y:n}})},fnKillLevelTile:function(){this.levelGrid=[]},draw:function(){this.parent();var j=this.fnGetCenter();this.fnCtxWrite(_STRINGS.Game.selectlevel,
"sketch-block",16,this.fnGetSetting("color").captionBoard,"center",j.x,j.y-122)},fnUpdate:function(){this.fnUpdateBtnPos()},kill:function(){this.closeBtn.kill();for(var j=0;j<this.arPageSelector.length;j++)this.arPageSelector[j].kill();this.pageSelector&&this.pageSelector.kill();this.stepBtn.next.kill();this.stepBtn.prev.kill();this.parent()}});EntityCloseLevelselect=Entity.extend({name:"CloseLevelselect",size:{x:40,y:39},animSheet:new ig.AnimationSheet("media/graphics/sprites/close-dialog.png",40,
39),type:ig.Entity.TYPE.A,cursor:"pointer",init:function(j,l,m){this.parent(j,l,m);this.addAnim("idle",0.1,[1]);this.addAnim("hover",0.1,[0]);this.currentAnim=this.anims.idle;ig.global.wm||(this.zIndex=this.fnGetSetting("enIdx").levelselect+3,ig.game.sortEntitiesDeferred())},clicked:function(){this.parent();ig.soundHandler.sfxPlayer.play("button");this.dialog.fnClose()},over:function(){this.parent();this.currentAnim=this.anims.hover},leave:function(){this.parent();this.currentAnim=this.anims.idle}});
EntityLevelselectPage=Entity.extend({name:"LevelselectPage",size:{x:16,y:16},animSheet:new ig.AnimationSheet("media/graphics/sprites/level-select-page.png",16,16),init:function(j,l,m){this.parent(j,l,m);this.addAnim("active",0.1,[0]);this.addAnim("frame",0.1,[1]);ig.global.wm||("holder"==this.pageType?(this.currentAnim=this.anims.frame,this.type=ig.Entity.TYPE.A,this.cursor="pointer",this.zIndex=this.fnGetSetting("enIdx").levelselect+4):(this.currentAnim=this.anims.active,this.zIndex=this.fnGetSetting("enIdx").levelselect+
5),ig.game.sortEntitiesDeferred())},clicked:function(){this.parent();this.dialog.bTileAnimate||(ig.soundHandler.sfxPlayer.play("button"),this.dialog.fnChangePage(this.iPageIdx))}});EntityLevelselectTile=Entity.extend({name:"LevelselectTile",size:{x:52,y:52},animSheet:new ig.AnimationSheet("media/graphics/sprites/level-select-tile.png",52,52),iNextPage:!1,bCloseDialog:!1,readyWriteLevel:!1,fontSize:0,locked:!1,type:ig.Entity.TYPE.A,init:function(j,l,m){this.parent(j,l,m);this.addAnim("zeroStar",0.1,
[0]);this.addAnim("oneStar",0.1,[1]);this.addAnim("twoStar",0.1,[2]);this.addAnim("threeStar",0.1,[3]);this.addAnim("locked",0.1,[4]);this.currentAnim=this.anims.zeroStar;if(!ig.global.wm){if(this.isUnlocked)switch(this.star){case 0:this.currentAnim=this.anims.zeroStar;break;case 1:this.currentAnim=this.anims.oneStar;break;case 2:this.currentAnim=this.anims.twoStar;break;case 3:this.currentAnim=this.anims.threeStar}else this.currentAnim=this.anims.locked;this.fnSetCenter("both",this.centerPos);this.currentAnim.scale.x=
0;this.currentAnim.scale.y=0;this.zIndex=this.fnGetSetting("enIdx").levelselect+5;ig.game.sortEntitiesDeferred()}},fnShow:function(){this.dialog.bTileAnimate=!0;this.tween({currentAnim:{scale:{x:1,y:1}},fontSize:16},0.1,{easing:ig.Tween.Easing.Sinusoidal.EaseOut,delay:this.delay,onComplete:function(){this.dialog.arTile.length-1==this.index&&(this.dialog.bTileAnimate=!1,this.fnGetPointer().hoveringItem&&this.fnGetPointer().hoveringItem.over())}.bind(this)}).start()},fnHide:function(j){this.dialog.bTileAnimate=
!0;this.iNextPage=j&&!1!==j.iNextPage?j.iNextPage:!1;this.bCloseDialog=j&&j.bCloseDialog?!0:!1;this.tween({currentAnim:{scale:{x:0,y:0}},fontSize:0},0.1,{easing:ig.Tween.Easing.Sinusoidal.EaseIn,delay:this.delay,onComplete:function(){this.dialog.arTile.length-1==this.index&&(this.dialog.bTileAnimate=!1,!1!==this.iNextPage&&-1<this.iNextPage?this.dialog.fnGenerateLevelTile(this.iNextPage):this.bCloseDialog&&this.dialog.anchor.fnHide());this.kill()}.bind(this)}).start()},draw:function(){this.parent();
var j=this.fnGetCenter();this.isUnlocked&&this.fnCtxWrite(this.level+1,"sketch-block",this.fontSize,this.fnGetSetting("color").captionBoard,"center",j.x-1,j.y-4)},fnAnimateBig:function(){this.tween({currentAnim:{scale:{x:1.2,y:1.2}},fontSize:19.2},0.1,{easing:ig.Tween.Easing.Sinusoidal.EaseInOut}).start()},fnAnimateSmall:function(){this.tween({currentAnim:{scale:{x:1,y:1}},fontSize:16},0.1,{easing:ig.Tween.Easing.Sinusoidal.EaseInOut}).start()},over:function(){this.parent();this.isUnlocked&&(!this.locked&&
!this.dialog.bTileAnimate)&&(this.cursor="pointer",this.fnAnimateBig())},leave:function(){this.parent();this.isUnlocked&&(!this.locked&&!this.dialog.bTileAnimate)&&(this.cursor="inherit",this.fnAnimateSmall())},clicked:function(){this.parent();if(this.isUnlocked&&(this.dialog.levelStorage.fnSaveLevel(this.level),this.dialog.anchor.nextLevel=this.level,this.dialog.fnClose(),ig.soundHandler.sfxPlayer.play("button"),typeof("function"==ig.onLevelStart)))ig.onLevelStart("Level "+(this.level+1))}});EntityLevelselectBtnStep=
Entity.extend({name:"BtnNextPrev",size:{x:52,y:51},animSheet:new ig.AnimationSheet("media/graphics/sprites/button-game.png",52,51),btnType:"next",type:ig.Entity.TYPE.A,cursor:"pointer",init:function(j,l,m){this.parent(j,l,m);this.addAnim("hover",0.1,[6]);this.addAnim("idle",0.1,[7]);this.currentAnim=this.anims.idle;ig.global.wm||("prev"==this.btnType&&(this.currentAnim.flip.x=!0),this.zIndex=this.fnGetSetting("enIdx").levelselect+1,ig.game.sortEntitiesDeferred())},clicked:function(){this.parent();
if(!this.dialog.bTileAnimate){var j=!1,j="prev"==this.btnType?0==this.dialog.selectedPageIndex?0:this.dialog.selectedPageIndex-1:this.dialog.selectedPageIndex==this.dialog.pageCount-1?this.dialog.pageCount-1:this.dialog.selectedPageIndex+1;this.dialog.fnChangePage(j);ig.soundHandler.sfxPlayer.play("button")}},over:function(){this.currentAnim=this.anims.hover;this.currentAnim.flip.x="prev"==this.btnType?!0:!1},leave:function(){this.currentAnim=this.anims.idle},fhShow:function(){},fnHide:function(){}})});
ig.baked=!0;
ig.module("game.entities.games.tilehint-game").requires("game.app.entity").defines(function(){EntityTilehintGame=Entity.extend({name:"TilehintGame",size:{x:98,y:98},tileType:!1,tileHalf:49,tileQuart:18,tileREdge:15,delay:!1,init:function(j,l,m){this.parent(j,l,m);ig.global.wm||(this.delay=new ig.Timer(this.delay),this.centerPos&&this.fnSetCenter("both",this.centerPos),this.zIndex=this.fnGetSetting("enIdx").tileHint,ig.game.sortEntitiesDeferred())},draw:function(){this.parent();if(!(0>this.delay.delta())){var j=
this.fnGetCenter(),l=this.fnGetBottomRight();if(this.tileDir)switch(this.tileDir){case "h":ig.system.context.beginPath();ig.system.context.moveTo(j.x-this.tileHalf,j.y-this.tileQuart);ig.system.context.lineTo(j.x+this.tileHalf,j.y-this.tileQuart);ig.system.context.lineTo(j.x+this.tileHalf,j.y+this.tileQuart);ig.system.context.lineTo(j.x-this.tileHalf,j.y+this.tileQuart);ig.system.context.fillStyle=this.fnGetSetting("color").tileHint;ig.system.context.fill();ig.system.context.restore();break;case "v":ig.system.context.beginPath();
ig.system.context.moveTo(j.x-this.tileQuart,j.y-this.tileHalf);ig.system.context.lineTo(j.x+this.tileQuart,j.y-this.tileHalf);ig.system.context.lineTo(j.x+this.tileQuart,j.y+this.tileHalf);ig.system.context.lineTo(j.x-this.tileQuart,j.y+this.tileHalf);ig.system.context.fillStyle=this.fnGetSetting("color").tileHint;ig.system.context.fill();ig.system.context.restore();break;case "t":ig.system.context.beginPath();ig.system.context.moveTo(j.x-this.tileQuart,j.y-this.tileREdge);ig.system.context.arc(j.x,
j.y-this.tileREdge,this.tileQuart,0,Math.PI,!0);ig.system.context.lineTo(j.x+this.tileQuart,j.y-this.tileREdge);ig.system.context.lineTo(j.x+this.tileQuart,j.y+this.tileHalf);ig.system.context.lineTo(j.x-this.tileQuart,j.y+this.tileHalf);ig.system.context.fillStyle=this.fnGetSetting("color").tileHint;ig.system.context.fill();ig.system.context.restore();break;case "l":ig.system.context.beginPath();ig.system.context.moveTo(j.x-this.tileREdge,j.y-this.tileQuart);ig.system.context.lineTo(j.x+this.tileHalf,
j.y-this.tileQuart);ig.system.context.lineTo(j.x+this.tileHalf,j.y+this.tileQuart);ig.system.context.lineTo(j.x-this.tileREdge,j.y+this.tileQuart);ig.system.context.arc(j.x-this.tileREdge,j.y,this.tileQuart,0.5*Math.PI,!0);ig.system.context.fillStyle=this.fnGetSetting("color").tileHint;ig.system.context.fill();ig.system.context.restore();break;case "r":ig.system.context.beginPath();ig.system.context.moveTo(j.x+this.tileREdge,j.y+this.tileQuart);ig.system.context.lineTo(j.x-this.tileHalf,j.y+this.tileQuart);
ig.system.context.lineTo(j.x-this.tileHalf,j.y-this.tileQuart);ig.system.context.lineTo(j.x+this.tileREdge,j.y-this.tileQuart);ig.system.context.arc(j.x+this.tileREdge,j.y,this.tileQuart,1.5*Math.PI,0.5*Math.PI);ig.system.context.fillStyle=this.fnGetSetting("color").tileHint;ig.system.context.fill();ig.system.context.restore();break;case "b":ig.system.context.beginPath();ig.system.context.moveTo(j.x-this.tileQuart,j.y-this.tileHalf);ig.system.context.lineTo(j.x+this.tileQuart,j.y-this.tileHalf);ig.system.context.lineTo(j.x+
this.tileQuart,j.y+this.tileREdge);ig.system.context.arc(j.x,j.y+this.tileREdge,this.tileQuart,0,Math.PI,!1);ig.system.context.lineTo(j.x-this.tileQuart,j.y+this.tileREdge);ig.system.context.fillStyle=this.fnGetSetting("color").tileHint;ig.system.context.fill();ig.system.context.restore();break;case "lt":ig.system.context.beginPath();ig.system.context.moveTo(this.pos.x+31,this.pos.y);ig.system.context.quadraticCurveTo(this.pos.x+23+8,this.pos.y+24-6,this.pos.x+23,this.pos.y+24);ig.system.context.quadraticCurveTo(this.pos.x+
16,this.pos.y+31,this.pos.x,this.pos.y+31);ig.system.context.lineTo(this.pos.x,this.pos.y+67);ig.system.context.lineTo(this.pos.x+10,this.pos.y+67);ig.system.context.quadraticCurveTo(this.pos.x+50-15,this.pos.y+50+16,this.pos.x+50,this.pos.y+50);ig.system.context.quadraticCurveTo(this.pos.x+67,this.pos.y+10+22,this.pos.x+67,this.pos.y+10);ig.system.context.lineTo(this.pos.x+67,this.pos.y);ig.system.context.lineTo(this.pos.x+31,this.pos.y);ig.system.context.fillStyle=this.fnGetSetting("color").tileHint;
ig.system.context.fill();ig.system.context.restore();break;case "lb":ig.system.context.beginPath();ig.system.context.moveTo(this.pos.x+31,l.y);ig.system.context.quadraticCurveTo(this.pos.x+24+9,l.y-24+10,this.pos.x+24,l.y-24);ig.system.context.quadraticCurveTo(this.pos.x+15,l.y-31-2,this.pos.x,l.y-31);ig.system.context.lineTo(this.pos.x,j.y-this.tileQuart);ig.system.context.lineTo(this.pos.x+10,j.y-this.tileQuart);ig.system.context.quadraticCurveTo(j.x-this.tileQuart+3,j.y-this.tileQuart,j.x+3,j.y);
ig.system.context.quadraticCurveTo(j.x+this.tileQuart,j.y+this.tileHalf-10-20,j.x+this.tileQuart,j.y+this.tileHalf-10);ig.system.context.lineTo(j.x+this.tileQuart,j.y+this.tileHalf);ig.system.context.lineTo(j.x-this.tileQuart,j.y+this.tileHalf);ig.system.context.fillStyle=this.fnGetSetting("color").tileHint;ig.system.context.fill();ig.system.context.restore();break;case "rb":ig.system.context.beginPath();ig.system.context.moveTo(j.x+this.tileQuart,j.y+this.tileHalf);ig.system.context.lineTo(j.x+this.tileQuart,
j.y+this.tileHalf-5);ig.system.context.quadraticCurveTo(l.x-24-8,l.y-24+8,l.x-24,l.y-24);ig.system.context.quadraticCurveTo(l.x-10-8,j.y+this.tileQuart+2,l.x-10,j.y+this.tileQuart);ig.system.context.lineTo(l.x,j.y+this.tileQuart);ig.system.context.lineTo(l.x,j.y-this.tileQuart);ig.system.context.lineTo(l.x-10,j.y-this.tileQuart);ig.system.context.quadraticCurveTo(j.x-5+this.tileQuart,j.y-this.tileQuart+1,j.x-2,j.y);ig.system.context.quadraticCurveTo(j.x-this.tileQuart+2,j.y+12,j.x-this.tileQuart,
l.y-10);ig.system.context.lineTo(j.x-this.tileQuart,l.y);ig.system.context.lineTo(j.x+this.tileQuart,j.y+this.tileHalf);ig.system.context.fillStyle=this.fnGetSetting("color").tileHint;ig.system.context.fill();ig.system.context.closePath();ig.system.context.restore();break;case "rt":ig.system.context.beginPath(),ig.system.context.moveTo(l.x,j.y-this.tileQuart),ig.system.context.lineTo(l.x-5,j.y-this.tileQuart),ig.system.context.quadraticCurveTo(l.x-24+5,this.pos.y+24+5,l.x-24,this.pos.y+24),ig.system.context.quadraticCurveTo(j.x+
this.tileQuart,this.pos.y+5+10,j.x+this.tileQuart,this.pos.y+5),ig.system.context.lineTo(j.x+this.tileQuart,this.pos.y),ig.system.context.lineTo(j.x-this.tileQuart,this.pos.y),ig.system.context.lineTo(j.x-this.tileQuart,this.pos.y+10),ig.system.context.quadraticCurveTo(j.x-2-15,j.y-15,j.x-2,j.y),ig.system.context.quadraticCurveTo(l.x-10-22,j.y+this.tileQuart,l.x-10,j.y+this.tileQuart),ig.system.context.lineTo(l.x,j.y+this.tileQuart),ig.system.context.lineTo(l.x,j.y-this.tileQuart),ig.system.context.fillStyle=
this.fnGetSetting("color").tileHint,ig.system.context.fill(),ig.system.context.closePath()}}}})});ig.baked=!0;
ig.module("game.entities.games.tutorial-game").requires("game.app.entity").defines(function(){EntityTutorialGame=Entity.extend({name:"TutorialGame",size:{x:97,y:97},animSheet:new ig.AnimationSheet("media/graphics/games/tutorial-frame.png",97,97),init:function(j,l,m){this.parent(j,l,m);this.addAnim("idle",0.1,[0]);this.currentAnim=this.anims.idle;ig.global.wm||(this.fnSetCenter("both",{x:288,y:396}),this.zIndex=this.fnGetSetting("enIdx").tutorial,ig.game.sortEntitiesDeferred(),this.tutorialPointer=
this.fnSpawn(EntityTutorialPointer,0,0))},kill:function(){this.tutorialPointer.kill();this.parent()}});EntityTutorialPointer=Entity.extend({name:"TutorialPointer",size:{x:53,y:62},animSheet:new ig.AnimationSheet("media/graphics/games/tutorial-pointer.png",53,62),init:function(j,l,m){this.parent(j,l,m);this.addAnim("idle",0.1,[0]);this.currentAnim=this.anims.idle;ig.global.wm||(this.fnSetCenter("both",{x:288,y:500}),this.zIndex=this.fnGetSetting("enIdx").tutorial,ig.game.sortEntitiesDeferred(),this.tween({pos:{x:this.pos.x,
y:this.pos.y-97}},2,{easing:ig.Tween.Easing.Sinusoidal.EaseInOut,delay:1,loop:ig.Tween.Loop.Revert}).start())},fnPause:function(){this.pauseTweens()},fnUnpause:function(){this.resumeTweens()}})});ig.baked=!0;
ig.module("game.entities.games.transitiontext-game").requires("game.app.entity").defines(function(){EntityTransitiontextGame=Entity.extend({name:"TransitiontextGame",size:{x:1,y:1},textAlpha:0,init:function(j,l,m){this.parent(j,l,m);ig.global.wm||(this.zIndex=this.fnGetSetting("enIdx").pathcomplete,ig.game.sortEntitiesDeferred(),this.fnAnimate())},fnAnimate:function(){var j=this,l=ig.system.width/2,m=ig.system.height/2;j.fnSetCenter("both",{x:l,y:m+60});var n=m-20,p=m-60,m=this.tween({pos:{x:l,y:m+
20},textAlpha:1},0.5,{easing:ig.Tween.Easing.Bounce.EaseOut}),n=this.tween({pos:{x:l,y:n}},1,{easing:ig.Tween.Easing.Linear.EaseNone}),l=this.tween({pos:{x:l,y:p},textAlpha:0},0.1,{easing:ig.Tween.Easing.Sinusoidal.EaseIn,onComplete:function(){j.board&&j.checkResult&&this.board.fnDeleteUncompleteTiles(j.checkResult);this.kill()}.bind(this)});m.chain(n);n.chain(l);m.start()},draw:function(){this.parent();var j=this.fnGetCenter();ig.system.context.shadowColor="#1AED1A";ig.system.context.shadowBlur=
5;var l=this.fnGetSetting("color").rgbTransitiontextShadow,m;m="rgba(R!,G!,B!,A!)".replace("R!",l.r);m=m.replace("G!",l.g);m=m.replace("B!",l.b);m=m.replace("A!",this.textAlpha);var n=this.customSize?25:30;ig.system.context.font=n+"pt sketch-block";ig.system.context.textAlign="center";ig.system.context.fillStyle=m;ig.system.context.fillText(this.message,j.x+2,j.y+2);l=this.fnGetSetting("color").rgbTransitiontext;m="rgba(R!,G!,B!,A!)".replace("R!",l.r);m=m.replace("G!",l.g);m=m.replace("B!",l.b);m=
m.replace("A!",this.textAlpha);ig.system.context.font=n+"pt sketch-block";ig.system.context.textAlign="center";ig.system.context.fillStyle=m;ig.system.context.fillText(this.message,j.x,j.y);ig.system.context.shadowColor="rgba(0,0,0,0)";ig.system.context.shadowBlur=0;ig.system.context.restore()},fnPause:function(){try{this.pauseTweens()}catch(j){}},fnUnpause:function(){try{this.resumeTweens()}catch(j){}}})});ig.baked=!0;
ig.module("game.entities.level-splasher").requires("game.app.entity").defines(function(){EntityLevelSplasher=Entity.extend({name:"LevelSplahser",size:{x:480,y:640},type:ig.Entity.TYPE.A,onStart:!1,onFinish:!1,killOnfinish:!0,alpha:null,init:function(j,l,m){this.parent(j,l,m);ig.global.wm||(this.zIndex=this.fnGetSetting("enIdx").levelsplasher,ig.game.sortEntitiesDeferred())},fnAnimateIn:function(){if(this.onStart)this.onStart(this);this.tween({alpha:0},0.25,{easing:ig.Tween.Easing.Sinusoidal.EaseOut,
onComplete:function(){if(this.onFinish)this.onFinish();this.killOnfinish&&this.kill();this.kill()}.bind(this)}).start()},fnAnimateOut:function(){if(this.onStart)this.onStart(this);this.tween({alpha:1},0.25,{easing:ig.Tween.Easing.Sinusoidal.EaseIn,onComplete:function(){if(this.onFinish)this.onFinish();this.killOnfinish&&this.kill()}.bind(this)}).start()},draw:function(){this.fnDrawOverlay(this.size.x,this.size.y,"rgba(0,0,0,"+this.alpha+")")}})});ig.baked=!0;
ig.module("game.services.bestpath").requires("game.app.service").defines(function(){BestpathService=Service.extend({bestPath:0,fnLoad:function(){this.bestPath=this._get("bestpath")||{};return this},fnGet:function(j){return this.bestPath[j]||0},fnSet:function(j,l){this.bestPath[l]=j},fnIsNewRecord:function(j,l){var m=this._get("bestpath")||!1;return m?m[l]?m[l]>j?!0:!1:!0:!0},fnSave:function(){this._set("bestpath",this.bestPath)}})});ig.baked=!0;
ig.module("game.services.tutorial").requires("game.app.service").defines(function(){TutorialService=Service.extend({fnGet:function(){return this._get("tutorial")||!1},fnSet:function(){this._set("tutorial",!0)}})});ig.baked=!0;
ig.module("game.entities.pointer").requires("impact.entity").defines(function(){EntityPointer=ig.Entity.extend({checkAgainst:ig.Entity.TYPE.BOTH,isFirstPressed:!1,isPressed:!1,isReleased:!1,isHovering:!1,hoveringItem:null,objectArray:[],clickedObjectList:[],ignorePause:!0,zIndex:5E3,check:function(j){this.objectArray.push(j)},clickObject:function(j){this.isFirstPressed&&"function"==typeof j.clicked&&(j.clicked(),this.addToClickedObjectList(j));this.isPressed&&!this.isReleased&&"function"==typeof j.clicking&&
j.clicking();this.isReleased&&"function"==typeof j.released&&(j.released(),this.removeFromClickedObjectList(j))},refreshPos:function(){this.pos=ig.game.io.getClickPos()},update:function(){this.parent();this.refreshPos();var j=null,l=-1;for(a=this.objectArray.length-1;-1<a;a--)this.objectArray[a].zIndex>l&&(l=this.objectArray[a].zIndex,j=this.objectArray[a]);if(null!=j)null!=this.hoveringItem?this.hoveringItem!=j&&("function"==typeof this.hoveringItem.leave&&this.hoveringItem.leave(),"function"==typeof j.over&&
j.over()):"function"==typeof j.over&&j.over(),this.hoveringItem=j,this.clickObject(j),this.objectArray=[];else if(null!=this.hoveringItem&&"function"==typeof this.hoveringItem.leave&&(this.hoveringItem.leave(),this.hoveringItem=null),this.isReleased){for(j=0;j<this.clickedObjectList.length;j++)l=this.clickedObjectList[j],"function"==typeof l.releasedOutside&&l.releasedOutside();this.clickedObjectList=[]}this.isFirstPressed=ig.input.pressed("click");this.isReleased=ig.input.released("click");this.isPressed=
ig.input.state("click")},addToClickedObjectList:function(j){this.clickedObjectList.push(j)},removeFromClickedObjectList:function(j){for(var l=[],m=0;m<this.clickedObjectList.length;m++){var n=this.clickedObjectList[m];n!=j&&l.push(n)}this.clickedObjectList=l}})});ig.baked=!0;
ig.module("game.entities.pointer-selector").requires("game.entities.pointer").defines(function(){EntityPointerSelector=EntityPointer.extend({zIndex:1E3,_wmDrawBox:!0,_wmBoxColor:"rgba(0, 0, 255, 0.7)",size:{x:20,y:20},init:function(j,l,m){this.parent(j,l,m)}})});ig.baked=!0;
ig.module("game.app.pointer").requires("game.entities.pointer-selector").defines(function(){PointerApp=EntityPointerSelector.extend({name:"PointerApp",size:{x:1,y:1},init:function(j,l,m){this.parent(j,l,m)},update:function(){this.parent();document.body.style.cursor=this.hoveringItem&&this.hoveringItem.cursor?this.hoveringItem.cursor:"inherit"},fnLetGo:function(){this.hoveringItem=null},fnGetCenter:function(j){var l={},l={x:this.pos.x+this.size.x/2,y:this.pos.y+this.size.y/2};j&&(l.x-=ig.game.screen.x,
l.y-=ig.game.screen.y);return l},fnSetCenter:function(j,l,m,n){if(!j||!l)return!1;switch(j){case "x":if("number"!=typeof l)return!1;this.pos.x=l-this.size.x/2+(m&&"number"==typeof m?m:0);break;case "y":if("number"!=typeof l)return!1;this.pos.y=l-this.size.y/2+(m&&"number"==typeof m?m:0);break;case "both":if("object"!=typeof l||!l.x||!l.y)return!1;j={x:0,y:0};j.x=m&&m.x?m.x:0;j.y=m&&m.y?m.y:0;this.pos={x:l.x-this.size.x/2+j.x,y:l.y-this.size.y/2+j.y}}n?(this.pos.x-=ig.game.screen.x,this.pos.y-=ig.game.screen.y):
(this.pos.x+=ig.game.screen.x,this.pos.y+=ig.game.screen.y);return this},check:function(j){j.disablePointer||this.parent(j)}})});ig.baked=!0;
ig.module("game.app.controller").requires("impact.entity","game.app.pointer").defines(function(){Controller=ig.Entity.extend({name:"Controller",_wmDrawBox:!0,_wmBoxColor:"rgba(0, 0, 255, 0.7)",size:{x:20,y:20},pos:{x:550,y:466},zIndex:1E3,localState:{},init:function(){ig.global.wm||(ig.game.controller=this,ig.game.pointer=ig.game.spawnEntity(PointerApp,ig.system.width/2,ig.system.height/2),ig.game.sortEntitiesDeferred())},fnGetState:function(j){return j?void 0!==ig.game.states[j]?ig.game.states[j]:
!1:ig.game.states},fnGetLocalState:function(j){return j?void 0!==this.localState[j]?this.localState[j]:!1:this.localState},fnGetSetting:function(j){return j?ig.game.settings[j]?ig.game.settings[j]:!1:ig.game.settings},fnSpawn:function(j,l,m,n){return ig.game.spawnEntity(j,l,m,n)},fnGetHelper:function(){return ig.game.helper}})});ig.baked=!0;
ig.module("game.entities.controllers.game-ctrl").requires("game.entities.games.board-game","game.entities.games.tile-game","game.entities.games.tile-helper","game.entities.games.ball-game","game.entities.games.starpick-game","game.entities.games.hintspin-game","game.entities.games.uiframe-bottom-game","game.entities.games.uiframe-top-game","game.entities.games.paused-game","game.entities.games.option-game","game.entities.games.starstatusuitop-game","game.entities.games.enddialog-game","game.entities.games.levelselect-game",
"game.entities.games.tilehint-game","game.entities.games.tutorial-game","game.entities.games.transitiontext-game","game.entities.level-splasher","game.services.level","game.services.score","game.services.bestpath","game.services.hint","game.services.tutorial","game.app.controller").defines(function(){EntityGameCtrl=Controller.extend({name:"GameCtrl",pathCompleted:!1,stepHistory:[],bestPath:new BestpathService,level:new LevelService,score:new ScoreService,tutorialService:new TutorialService,currentScore:0,
tutorial:!1,init:function(j,l,m){this.parent(j,l,m);this.fnSpawn(EntityLevelSplasher,0,0,{alpha:1,onFinish:function(){this.fnGetSetting("bShowTransitionText")&&this.fnSpawn(EntityTransitiontextGame,0,0,{message:_STRINGS.Game.go})}}).fnAnimateIn()},ready:function(){this.parent();if(!ig.global.wm){this.fnGetState().isPusedReset();this.fnSetLevelLayout();this.level=this.level.fnLoadLevel().fnGetLevel();this.tutorial=0===this.level&&!this.tutorialService.fnGet()||!1;this.score.fnLoad();this.bestPath.fnLoad();
this.board=this.fnSpawn(EntityBoardGame,0,0);this.uiFooter=this.fnSpawn(EntityUiframeBottomGame,0,544);this.uiTop=this.fnSpawn(EntityUiframeTopGame,0,0);this.fnSetTileLayout(this.fnGetSetting("layout")[this.level]);this.board.fnInitArrangeTiles();this.board.fnShuffle(this.fnGetSetting("layoutShuffle")[this.level]);var j=this.score.fnGet(this.level);this.startTopUi=this.fnSpawn(EntityStarstatusuitopGame,0,0,{score:j});this.fnSetTutorial()}},fnSetTutorial:function(){this.tutorial&&(this.tutorial=this.fnSpawn(EntityTutorialGame,
0,0))},fnAddScore:function(){3<this.score.fnGet(this.level)||(this.score.fnSet(this.score.fnGet(this.level)+1,this.level),this.startTopUi.fnAddScore())},fnSetLevelLayout:function(){var j=0;new LevelService;ig.game.queryString&&ig.game.queryString.layout&&(j=parseInt(ig.game.queryString.layout),this.fnGetSetting("layout")[j]&&this.level.fnSaveLevel(j).fnGetLevel())},fnSetTileLayout:function(j){for(il in j)this.board.fnAddTile(this.fnSpawn(EntityTileGame,0,0,{gridAx:{x:j[il].gridAx.x,y:j[il].gridAx.y},
tileId:il,tileType:j[il].type,tileDir:j[il].dir,ball:j[il].ball||!1,star:j[il].star||!1,hintSpin:j[il].hintspin||!1,isPath:j[il].isPath||!1}))},fnAddMoveHistory:function(j,l){this.stepHistory.push({id:j,dir:"right"==l?"left":"left"==l?"right":"top"==l?"bottom":"top"});this.uiFooter.fnActivateUndo()},fnUndo:function(){if(!this.pathCompleted&&0<this.stepHistory.length){var j=this.stepHistory[this.stepHistory.length-1];this.board.fnMoveTile(j.id,j.dir);this.stepHistory.pop();1>this.stepHistory.length&&
this.uiFooter.undoBtn.fnDeactivate()}},fnFast:function(){this.board.fnTriggerFast()},fnShowPauseDialog:function(){this.pauseDialog=this.fnSpawn(EntityPausedGame,0,0)},fnShowOptionDialog:function(){this.optionDialog=this.fnSpawn(EntityOptionGame,0,0)},fnShowEndGameDialog:function(){this.score.fnIsNewRecord(this.level)&&this.score.fnSave();this.bestPath.fnIsNewRecord(this.stepHistory.length,this.level)&&(this.bestPath.fnSet(this.stepHistory.length,this.level),this.bestPath.fnSave());var j=new LevelService;
this.fnGetSetting("layout").length-1>this.level&&this.level>=j.fnGetUnlockedLevel()&&j.fnSaveUnlockedLevel(this.level+1);this.endGameDialog=this.fnSpawn(EntityEnddialogGame,0,0)},fnShowSelectLevelDialog:function(){this.levelselectDialog=this.fnSpawn(EntityLevelselectGame,0,0)},fnReloadLevel:function(){this.levelSplasher=this.fnSpawn(EntityLevelSplasher,0,0,{alpha:0,onFinish:function(){ig.game.director.reloadLevel()},killOnfinish:!1}).fnAnimateOut()}})});ig.baked=!0;
ig.module("game.levels.game").requires("impact.image","game.entities.controllers.game-ctrl").defines(function(){LevelGame={entities:[{type:"EntityGameCtrl",x:550,y:466}],layer:[{name:"background",width:30,height:40,linkWithCollision:!1,visible:1,tilesetName:"media/graphics/backgrounds/desktop/background.jpg",repeat:!1,preRender:!0,distance:"1",tilesize:16,foreground:!1,data:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]}]};LevelGameResources=[new ig.Image("media/graphics/backgrounds/desktop/background.jpg")]});ig.baked=!0;
ig.module("game.entities.menus.bg-menu").requires("game.app.entity").defines(function(){EntityBgMenu=Entity.extend({name:"BgMenu",size:{x:480,y:640},animSheet:new ig.AnimationSheet("media/graphics/backgrounds/desktop/background.jpg",480,640),init:function(j,l,m){this.parent(j,l,m);this.addAnim("idle",0.1,[0]);this.currentAnim=this.anims.idle;ig.global.wm||(this.zIndex=this.fnGetSetting("enIdx").menubackground,ig.game.sortEntitiesDeferred())}})});ig.baked=!0;
ig.module("game.entities.menus.btnoption-menu").requires("game.app.entity").defines(function(){EntityBtnoptionMenu=Entity.extend({name:"BtnoptionMenu",size:{x:99,y:101},animSheet:new ig.AnimationSheet("media/graphics/sprites/button_setting.png",99,101),type:ig.Entity.TYPE.A,cursor:"pointer",init:function(j,l,m){this.parent(j,l,m);this.addAnim("idle",0.1,[0]);this.addAnim("hover",0.1,[1]);this.currentAnim=this.anims.idle;ig.global.wm||(this.anims.idle.scale.x=0,this.anims.idle.scale.y=0,this.anims.hover.scale.x=
0,this.anims.hover.scale.y=0,this.zIndex=this.fnGetSetting("enIdx").menubtn,ig.game.sortEntitiesDeferred(),this.fnEntrace())},fnEntrace:function(){this.tween({anims:{idle:{scale:{x:1,y:1}},hover:{scale:{x:1,y:1}}}},0.25,{easing:ig.Tween.Easing.Sinusoidal.EaseInOut,delay:this.delay}).start()},over:function(){this.parent();this.currentAnim=this.anims.hover},leave:function(){this.parent();this.currentAnim=this.anims.idle},clicked:function(){this.parent();0<ig.game.getEntitiesByType(EntityButtonMoreGames).length&&
ig.game.getEntitiesByType(EntityButtonMoreGames)[0].hide();ig.soundHandler.sfxPlayer.play("button");this.optionDialog=this.fnSpawn(EntityOptionGame,0,0)}})});ig.baked=!0;
ig.module("game.entities.menus.btnplay-menu").requires("game.app.entity").defines(function(){EntityBtnplayMenu=Entity.extend({name:"BtnplayMenu",size:{x:126,y:128},animSheet:new ig.AnimationSheet("media/graphics/sprites/button_play.png",126,128),type:ig.Entity.TYPE.A,cursor:"pointer",init:function(j,l,m){this.parent(j,l,m);this.addAnim("idle",0.1,[0]);this.addAnim("hover",0.1,[1]);this.currentAnim=this.anims.idle;ig.global.wm||(this.anims.idle.scale.x=0,this.anims.idle.scale.y=0,this.anims.hover.scale.x=
0,this.anims.hover.scale.y=0,this.zIndex=this.fnGetSetting("enIdx").menubtn,ig.game.sortEntitiesDeferred(),this.fnEntrace())},fnEntrace:function(){this.tween({anims:{idle:{scale:{x:1,y:1}},hover:{scale:{x:1,y:1}}}},0.25,{easing:ig.Tween.Easing.Sinusoidal.EaseInOut,delay:this.delay}).start()},over:function(){this.parent();this.currentAnim=this.anims.hover},leave:function(){this.parent();this.currentAnim=this.anims.idle},clicked:function(){this.parent();0<ig.game.getEntitiesByType(EntityButtonMoreGames).length&&
ig.game.getEntitiesByType(EntityButtonMoreGames)[0].hide();ig.soundHandler.sfxPlayer.play("button");this.levelselectDialog=this.fnSpawn(EntityLevelselectGame,0,0);if(typeof("function"==ig.onPlayButton))ig.onPlayButton()}})});ig.baked=!0;
ig.module("game.entities.controllers.mainmenu-ctrl").requires("game.app.controller","game.entities.menus.bg-menu","game.entities.menus.btnoption-menu","game.entities.games.option-game","game.entities.games.levelselect-game","game.entities.level-splasher","game.entities.menus.btnplay-menu").defines(function(){EntityMainmenuCtrl=Controller.extend({name:"MainmenuCtrl",init:function(j,l,m){this.parent(j,l,m)},ready:function(){this.parent();this.fnSpawn(EntityLevelSplasher,0,0,{alpha:1}).fnAnimateIn();
this.bg=this.fnSpawn(EntityBgMenu,0,0);this.fnInitButton()},fnInitButton:function(){this.btnPlay=this.fnSpawn(EntityBtnplayMenu,0,0,{delay:0});this.btnPlay.fnSetCenter("both",{x:ig.system.width/2,y:ig.system.height/2+50});_SETTINGS.MoreGames.Enabled?(this.btnOption=this.fnSpawn(EntityBtnoptionMenu,0,0,{delay:0.2}),this.btnMoregames=this.fnSpawn(EntityButtonMoreGames,270,440,{delay:0.4}),this.btnOption.pos={x:ig.system.width/2-80-this.btnOption.size.x/2,y:ig.system.height/2+120}):(this.btnOption=this.fnSpawn(EntityBtnoptionMenu,
0,0,{delay:0.2}),this.btnOption.pos={x:ig.system.width/2-this.btnOption.size.x/2,y:ig.system.height/2+120})},fnGotoGameLevel:function(){this.levelSplasher=this.fnSpawn(EntityLevelSplasher,0,0,{alpha:0,onFinish:function(){ig.game.director.loadLevel(2)},killOnfinish:!1}).fnAnimateOut()}})});ig.baked=!0;
ig.module("game.levels.mainmenu").requires("impact.image","game.entities.controllers.mainmenu-ctrl").defines(function(){LevelMainmenu={entities:[{type:"EntityMainmenuCtrl",x:568,y:80}],layer:[{name:"background",width:30,height:40,linkWithCollision:!1,visible:1,tilesetName:"media/graphics/backgrounds/desktop/background.jpg",repeat:!1,preRender:!0,distance:"1",tilesize:16,foreground:!1,data:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]}]};LevelMainmenuResources=[new ig.Image("media/graphics/backgrounds/desktop/background.jpg")]});ig.baked=!0;
ig.module("game.app.levels").requires("impact.game","game.levels.game","game.levels.mainmenu").defines(function(){ig.Game.inject({beginLevel:1,oLevels:{arMobile:[LevelMainmenu,LevelGame],arDesktop:[LevelMainmenu,LevelGame]},init:function(){this.parent()},fnMergeLevels:function(j,l){j||[];return!l?j:ig.ua.mobile?0>l?j.concat(this.oLevels.arMobile):this.oLevels.arMobile.concat(j):0>l?j.concat(this.oLevels.arDesktop):this.oLevels.arDesktop.concat(j)},fnGetBeginLevel:function(){this.beginLevel=!1===this.beginLevel?
this.director.currentLevel:this.beginLevel;var j=this.queryString&&this.queryString.level?parseInt(this.queryString.level):this.beginLevel;return this.director.levels[j]?j:this.beginLevel}})});ig.baked=!0;
ig.module("game.app.helper").requires("impact.game").defines(function(){ig.Game.inject({init:function(){this.parent()},helper:{fnR1D:function(j){return Math.round(10*j)/10},fnR2D:function(j){return Math.round(100*j)/100},fnR3D:function(j){return Math.round(1E3*j)/1E3},fnR4D:function(j){return Math.round(1E4*j)/1E4},fnR5D:function(j){return Math.round(1E5*j)/1E5},fnGetDistance:function(j,l){return Math.sqrt((l.x-=j.x)*l.x+(l.y-=j.y)*l.y)},fnCreateTileHelper:function(j){ig.game.spawnEntity(EntityTileHelper,
0,0,j)},fnRoundRect:function(j,l,m,n,p,s,A,v){"undefined"==typeof v&&(v=!0);"undefined"===typeof s&&(s=5);if("number"===typeof s)s={tl:s,tr:s,br:s,bl:s};else{var r={tl:0,tr:0,br:0,bl:0},u;for(u in r)s[u]=s[u]||r[u]}j.beginPath();j.moveTo(l+s.tl,m);j.lineTo(l+n-s.tr,m);j.quadraticCurveTo(l+n,m,l+n,m+s.tr);j.lineTo(l+n,m+p-s.br);j.quadraticCurveTo(l+n,m+p,l+n-s.br,m+p);j.lineTo(l+s.bl,m+p);j.quadraticCurveTo(l,m+p,l,m+p-s.bl);j.lineTo(l,m+s.tl);j.quadraticCurveTo(l,m,l+s.tl,m);j.closePath();A&&j.fill();
v&&j.stroke()}}})});ig.baked=!0;ig.module("game.services.testing").requires("game.app.service").defines(function(){TestingService=Service.extend({init:function(){this.parent("puzzle-ball-testing")},fnGet:function(){return this._get("easier")||[]},fnSet:function(j,l){var m=this.fnGet();m.push({easy:l,hard:j});this._set("easier",m)},fnReset:function(j){if(j)try{var l=JSON.parse(j);this._set("easier",l);return!0}catch(m){return!1}else return this._unset("easier"),!0}})});ig.baked=!0;
ig.module("game.app.minimain").requires("impact.game","game.app.settings","game.app.states","game.app.querystring","game.app.levels","game.app.helper","game.services.sound","game.services.level","game.services.hint","game.services.testing").defines(function(){ig.Game.inject({controller:!1,pointer:!1,init:function(){this.parent()},fnPause:function(){for(var j=ig.game.entities.length-1;0<=j;j--)this.entities[j].fnPause&&"function"==typeof this.entities[j].fnPause&&(this.entities[j].fnPause(),this.states.isPaused=
!0)},fnUnpause:function(){for(var j=this.entities.length-1;0<=j;j--)this.entities[j].fnUnpause&&"function"==typeof this.entities[j].fnUnpause&&(this.entities[j].fnUnpause(),this.states.isPusedReset())},cheat:{unlockLevel:function(j){this.enabled&&(j=!j?ig.game.settings.layout.length:j,j--,(new LevelService).fnSaveUnlockedLevel(j))},addHint:function(j){if(this.enabled){j=!j?1:j;for(var l=new HintService,m=0;m<j;m++)l.fnAdd();"GameCtrl"==ig.game.controller.name&&(ig.game.controller.uiFooter.hintRemaining=
l.fnGet())}}},test:{data:[],service:new TestingService,thanks:"Thank You!",easier:function(j,l){if(this.enabled){if("GameCtrl"!=ig.game.controller.name&&(!l||!j))return console.info("You are in Main Menu, you need to provide first and second parameter"),this.thanks;if(!j&&!l){if(0==ig.game.controller.level)return console.info("You are in level 1, you need to provide first and second parameter"),this.thanks;l=ig.game.controller.level+1;this.service.fnSet(l,l);console.info("OK!")}else if(j&&!l)l=ig.game.controller.level+
1,j>=l?console.info("First parameter should less than second parameter"):(this.service.fnSet(j,l),console.info("OK!"));else if(j>=l)console.info("First parameter should less than second parameter");else{if(!j)return console.info("First parameter should higher than 0"),this.thanks;this.service.fnSet(j,l);console.info("OK!")}return this.thanks}},easierReset:function(j){this.service.fnReset(j)?console.info("OK!"):console.info("Data should in stringified json");return"Thank You!"},easierReport:function(){console.info("Thank You!. Let we know this report by copy and paste to the chat room");
return JSON.stringify(this.service.fnGet())}}})});this.START_BRANDING_SPLASH;ig.baked=!0;
ig.module("plugins.branding.splash").requires("impact.impact","impact.entity").defines(function(){ig.BrandingSplash=ig.Class.extend({init:function(){ig.game.spawnEntity(EntityBranding,0,0)}});EntityBranding=ig.Entity.extend({gravityFactor:0,size:{x:32,y:32},splashlogo:new ig.Image("branding/logo.png"),init:function(j,l,m){this.parent(j,l,m);this.pos.x=ig.system.width/2;this.pos.y=ig.system.height/2-ig.system.height;j=this.tween({pos:{y:ig.system.height/2}},0.5,{easing:ig.Tween.Easing.Bounce.EaseIn});
l=this.tween({},2.5,{onComplete:function(){ig.game.director.loadLevel(ig.game.director.currentLevel)}});j.chain(l);j.start()},createClickableLayer:function(){console.log("Build clickable layer");this.checkClickableLayer("branding-splash",_SETTINGS.Branding.Logo.Link,!0)},doesClickableLayerExist:function(j){for(k in dynamicClickableEntityDivs)if(k==j)return!0;return!1},checkClickableLayer:function(j,l,m){"undefined"==typeof wm&&(this.doesClickableLayerExist(j)?(ig.game.showOverlay([j]),$("#"+j).find("[href]").attr("href",
l)):this.createClickableOutboundLayer(j,l,"media/graphics/misc/invisible.png",m))},createClickableOutboundLayer:function(j,l,m,n){var p=ig.$new("div");p.id=j;document.body.appendChild(p);$("#"+p.id).css("float","left");$("#"+p.id).css("position","absolute");if(ig.ua.mobile){var s=window.innerHeight/mobileHeight,A=window.innerWidth/mobileWidth;$("#"+p.id).css("left",this.pos.x*A);$("#"+p.id).css("top",this.pos.y*s);$("#"+p.id).css("width",this.size.x*A);$("#"+p.id).css("height",this.size.y*s)}else s=
w/2-destW/2,A=h/2-destH/2,console.log(s,A),$("#"+p.id).css("left",s+this.pos.x*multiplier),$("#"+p.id).css("top",A+this.pos.y*multiplier),$("#"+p.id).css("width",this.size.x*multiplier),$("#"+p.id).css("height",this.size.y*multiplier);n?$("#"+p.id).html("<a target='_blank' href='"+l+"'><img style='width:100%;height:100%' src='"+m+"'></a>"):$("#"+p.id).html("<a href='"+l+"'><img style='width:100%;height:100%' src='"+m+"'></a>");dynamicClickableEntityDivs[j]={};dynamicClickableEntityDivs[j].width=this.size.x*
multiplier;dynamicClickableEntityDivs[j].height=this.size.y*multiplier;dynamicClickableEntityDivs[j].entity_pos_x=this.pos.x;dynamicClickableEntityDivs[j].entity_pos_y=this.pos.y},draw:function(){ig.system.context.fillStyle="#000000";ig.system.context.fillRect(0,0,ig.system.width,ig.system.height);this.splashlogo.draw(this.pos.x-this.splashlogo.width/2,this.pos.y-this.splashlogo.height/2);this.parent()}})});this.END_BRANDING_SPLASH;ig.baked=!0;
ig.module("game.entities.buttons.button").requires("impact.entity","plugins.data.vector").defines(function(){EntityButton=ig.Entity.extend({collides:ig.Entity.COLLIDES.NEVER,type:ig.Entity.TYPE.A,size:new Vector2(48,48),fillColor:null,zIndex:95E3,init:function(j,l,m){this.parent(j,l,m);!ig.global.wm&&!isNaN(m.zIndex)&&(this.zIndex=m.zIndex);j=Math.floor(256*Math.random());l=Math.floor(256*Math.random());m=Math.floor(256*Math.random());this.fillColor="rgba("+j+","+m+","+l+",1)"},clicked:function(){throw"no implementation on clicked()";
},clicking:function(){throw"no implementation on clicking()";},released:function(){throw"no implementation on released()";}})});ig.baked=!0;
ig.module("plugins.clickable-div-layer").requires("plugins.data.vector").defines(function(){ClickableDivLayer=ig.Class.extend({pos:new Vector2(0,0),size:new Vector2(0,0),identifier:null,invisImagePath:"media/graphics/misc/invisible.png",init:function(j){this.pos=new Vector2(j.pos.x,j.pos.y);this.size=new Vector2(j.size.x,j.size.y);var l="more-games",m="www.google.com",n=!1;j.div_layer_name&&(l=j.div_layer_name);j.link&&(m=j.link);j.newWindow&&(n=j.newWindow);this.createClickableLayer(l,m,n)},createClickableLayer:function(j,
l,m){this.identifier=j;var n=ig.domHandler.getElementById("#"+j);n?(ig.domHandler.show(n),ig.domHandler.attr(n,"href",l)):this.createClickableOutboundLayer(j,l,this.invisImagePath,m)},update:function(j,l){this.pos.x===j&&this.pos.y===l||(ig.sizeHandler.dynamicClickableEntityDivs[this.identifier]={},ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].width=this.size.x,ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].height=this.size.y,ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].entity_pos_x=
this.pos.x,ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].entity_pos_y=this.pos.y)},createClickableOutboundLayer:function(j,l,m,n){var p=ig.domHandler.create("div");ig.domHandler.attr(p,"id",j);var s=ig.domHandler.create("a");n?(ig.domHandler.attr(s,"href",l),ig.domHandler.attr(s,"target","_blank")):ig.domHandler.attr(s,"href",l);l=ig.domHandler.create("img");ig.domHandler.css(l,{width:"100%",height:"100%"});ig.domHandler.attr(l,"src",m);m=Math.min(ig.sizeHandler.scaleRatioMultiplier.x,
ig.sizeHandler.scaleRatioMultiplier.y);if(ig.ua.mobile){n=Math.floor(this.pos.x*ig.sizeHandler.scaleRatioMultiplier.x)+"px";var A=Math.floor(this.pos.y*ig.sizeHandler.scaleRatioMultiplier.y)+"px",v=Math.floor(this.size.x*ig.sizeHandler.scaleRatioMultiplier.x)+"px";m=Math.floor(this.size.y*ig.sizeHandler.scaleRatioMultiplier.y)+"px"}else n=ig.domHandler.getElementById("#canvas"),n=ig.domHandler.getOffsets(n),A=n.top,n=Math.floor(n.left+this.pos.x*m)+"px",A=Math.floor(A+this.pos.y*m)+"px",v=Math.floor(this.size.x*
m)+"px",m=Math.floor(this.size.y*m)+"px";ig.domHandler.css(p,{"float":"left",position:"absolute",left:n,top:A,width:v,height:m,"z-index":3});ig.domHandler.addEvent(p,"mousemove",ig.input.mousemove.bind(ig.input),!1);ig.domHandler.appendChild(s,l);ig.domHandler.appendChild(p,s);ig.domHandler.appendToBody(p);ig.sizeHandler.dynamicClickableEntityDivs[j]={};ig.sizeHandler.dynamicClickableEntityDivs[j].width=this.size.x;ig.sizeHandler.dynamicClickableEntityDivs[j].height=this.size.y;ig.sizeHandler.dynamicClickableEntityDivs[j].entity_pos_x=
this.pos.x;ig.sizeHandler.dynamicClickableEntityDivs[j].entity_pos_y=this.pos.y}})});ig.baked=!0;
ig.module("game.entities.buttons.button-branding-logo").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonBrandingLogo=EntityButton.extend({type:ig.Entity.TYPE.A,gravityFactor:0,logo:new ig.AnimationSheet("branding/logo.png",_SETTINGS.Branding.Logo.Width,_SETTINGS.Branding.Logo.Height),zIndex:10001,size:{x:64,y:66},clickableLayer:null,link:null,newWindow:!1,div_layer_name:"branding-logo",name:"brandinglogo",init:function(j,l,m){this.parent(j,l,m);
if(!ig.global.wm){if("undefined"==typeof wm)if(_SETTINGS.Branding.Logo.Enabled)this.size.x=_SETTINGS.Branding.Logo.Width,this.size.y=_SETTINGS.Branding.Logo.Height,this.anims.idle=new ig.Animation(this.logo,0,[0],!0),this.currentAnim=this.anims.idle,m&&m.centralize&&(this.pos.x=ig.system.width/2-this.size.x/2,console.log("centralize true ... centering branded logo ...")),_SETTINGS.Branding.Logo.LinkEnabled&&(this.link=_SETTINGS.Branding.Logo.Link,this.newWindow=_SETTINGS.Branding.Logo.NewWindow,this.clickableLayer=
new ClickableDivLayer(this));else{this.kill();return}this.div_layer_name=m.div_layer_name?m.div_layer_name:"branding-logo"}},show:function(){var j=ig.domHandler.getElementById("#"+this.div_layer_name);ig.domHandler.show(j)},hide:function(){var j=ig.domHandler.getElementById("#"+this.div_layer_name);ig.domHandler.hide(j)},clicked:function(){},clicking:function(){},released:function(){}})});ig.baked=!0;
ig.module("game.entities.branding-logo-placeholder").requires("impact.entity","game.entities.buttons.button-branding-logo").defines(function(){EntityBrandingLogoPlaceholder=ig.Entity.extend({gravityFactor:0,size:{x:32,y:32},_wmDrawBox:!0,_wmBoxColor:"rgba(0, 0, 255, 0.7)",init:function(j,l,m){this.parent(j,l,m);if(m)switch(console.log("settings found ... using that div layer name"),j=m.div_layer_name,console.log("settings.centralize:",m.centralize),m.centralize){case "true":console.log("centralize true");
centralize=!0;break;case "false":console.log("centralize false");centralize=!1;break;default:console.log("default ... centralize false"),centralize=!1}else j="branding-logo",centralize=!1;if("undefined"==typeof wm){if(_SETTINGS.Branding.Logo.Enabled)try{ig.game.spawnEntity(EntityButtonBrandingLogo,this.pos.x,this.pos.y,{div_layer_name:j,centralize:centralize})}catch(n){console.log(n)}this.kill()}}})});ig.baked=!0;
ig.module("game.entities.buttons.button-more-games").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonMoreGames=EntityButton.extend({type:ig.Entity.TYPE.A,gravityFactor:0,logo:new ig.AnimationSheet("media/graphics/sprites/button_moregames.png",99,101),size:{x:99,y:101},clickableLayer:null,link:null,newWindow:!1,div_layer_name:"more-games",name:"moregames",init:function(j,l,m){this.parent(j,l,m);ig.global.wm||(this.div_layer_name=m.div_layer_name?
m.div_layer_name:"more-games",_SETTINGS.MoreGames.Enabled?(this.anims.idle=new ig.Animation(this.logo,0,[0],!0),this.anims.hover=new ig.Animation(this.logo,0,[1],!0),this.currentAnim=this.anims.idle,_SETTINGS.MoreGames.Link&&(this.link=_SETTINGS.MoreGames.Link),_SETTINGS.MoreGames.NewWindow&&(this.newWindow=_SETTINGS.MoreGames.NewWindow),this.clickableLayer=new ClickableDivLayer(this),this.anims.idle.scale.x=0,this.anims.idle.scale.y=0,this.anims.hover.scale.x=0,this.anims.hover.scale.y=0,this.zIndex=
ig.game.settings.enIdx.menubtn,this.fnEntrace()):this.kill())},fnEntrace:function(){this.tween({anims:{idle:{scale:{x:1,y:1}},hover:{scale:{x:1,y:1}}}},0.25,{easing:ig.Tween.Easing.Sinusoidal.EaseInOut,delay:this.delay}).start()},show:function(){var j=ig.domHandler.getElementById("#"+this.div_layer_name);ig.domHandler.show(j)},hide:function(){var j=ig.domHandler.getElementById("#"+this.div_layer_name);ig.domHandler.hide(j)},clicked:function(){},clicking:function(){},released:function(){},over:function(){this.currentAnim=
this.anims.hover},leave:function(){this.currentAnim=this.anims.idle}})});ig.baked=!0;
ig.module("game.entities.opening-shield").requires("impact.entity").defines(function(){EntityOpeningShield=ig.Entity.extend({size:{x:48,y:48},move:0,mIconAnim:0,shieldAnim:0,titleAnim:0,shieldImage:new ig.Image("media/graphics/opening/shield.png"),mIconImage:new ig.Image("media/graphics/opening/m_icon.png"),titleImage:new ig.Image("media/graphics/opening/title.png"),init:function(j,l,m){this.parent(j,l,m)},ready:function(){if(!ig.wm)if(_SETTINGS.DeveloperBranding.Splash.Enabled){this.initTimer=new ig.Timer(0.1);
try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.openingSound)}catch(j){console.log(j)}}else ig.game.director.nextLevel(),ig.system.context.globalAlpha=1,this.kill()},update:function(){this.parent();this.updateOriginalShieldOpening()},draw:function(){this.parent();ig.global.wm||(this.nextLevelTimer&&0>this.nextLevelTimer.delta()&&(ig.system.context.globalAlpha=-this.nextLevelTimer.delta()),this.drawOriginalShieldOpening())},updateOriginalShieldOpening:function(){this.initTimer&&0<this.initTimer.delta()&&
(this.initTimer=null,this.sheildTimer=new ig.Timer(0.05));this.sheildTimer&&0<this.sheildTimer.delta()&&(3>this.shieldAnim?(this.shieldAnim++,this.sheildTimer.reset()):(this.sheildTimer=null,this.moveTimer=new ig.Timer(0.001),this.mIconTimer=new ig.Timer(0.05),this.titleTimer=new ig.Timer(0.15)));this.moveTimer&&0<this.moveTimer.delta()&&(this.move+=0.3,this.moveTimer.reset());this.mIconTimer&&0<this.mIconTimer.delta()&&(12>this.mIconAnim?(this.mIconAnim++,this.moveTimer.reset()):this.mIconTimer=
null);this.titleTimer&&0<this.titleTimer.delta()&&(11>this.titleAnim?(this.titleAnim++,this.titleTimer.reset()):(this.titleTimer=null,this.nextLevelTimer=new ig.Timer(1)));this.nextLevelTimer&&0<this.nextLevelTimer.delta()&&(this.nextLevelTimer=null,ig.game.director.nextLevel(),ig.system.context.globalAlpha=1)},drawOriginalShieldOpening:function(){if(this.moveTimer){var j=ig.system.context;j.save();var l=ig.system.width/2,m=ig.system.height/2;j.translate(l,m);j.rotate(this.move*Math.PI/180);j.beginPath();
j.moveTo(0,0);for(var n=0,p=1;48>=p;p+=1)j.lineTo(0+800*Math.cos(2*p*Math.PI/48),0+800*Math.sin(2*p*Math.PI/48)),n++,2==n&&(n=0,j.lineTo(0,0));j.translate(-l,-m);l=j.createRadialGradient(l,m,100,l,m,250);l.addColorStop(0,"rgba(255,255,255,0.1)");l.addColorStop(1,"rgba(0,0,0,0)");j.fillStyle=l;j.fill();j.restore()}this.shieldImage.drawTile(ig.system.width/2-91,0-(768-ig.system.height)/2,this.shieldAnim,182,768);this.moveTimer&&(this.mIconImage.drawTile(ig.system.width/2-96,ig.system.height/2-70,this.mIconAnim,
166,160),this.titleImage.drawTile(ig.system.width/2-204,ig.system.height/2+100,this.titleAnim,409,76));ig.system.context.globalAlpha=1}})});ig.baked=!0;
ig.module("game.entities.opening-kitty").requires("impact.entity").defines(function(){EntityOpeningKitty=ig.Entity.extend({size:{x:48,y:48},kittyAnim:-1,kittyImage:new ig.Image("media/graphics/opening/kitty.png"),kittyTitleImage:new ig.Image("media/graphics/opening/kittytitle.png"),soundKey:"kittyopeningSound",init:function(j,l,m){this.parent(j,l,m)},ready:function(){if(!ig.wm)if(_SETTINGS.DeveloperBranding.Splash.Enabled){this.initTimer=new ig.Timer(0.1);try{ig.soundHandler.sfxPlayer.play(this.soundKey)}catch(j){console.log(j)}}else ig.game.director.nextLevel(),
ig.system.context.globalAlpha=1,this.kill()},update:function(){this.parent();this.updateKittyOpening()},draw:function(){this.parent();ig.global.wm||(this.nextLevelTimer&&0>this.nextLevelTimer.delta()&&(ig.system.context.globalAlpha=-this.nextLevelTimer.delta()),this.drawKittyOpening())},updateKittyOpening:function(){this.initTimer&&0<this.initTimer.delta()&&(this.initTimer=null,this.kittyTimer=new ig.Timer(0.15));this.kittyTimer&&0<this.kittyTimer.delta()&&(7>this.kittyAnim?(this.kittyAnim++,this.kittyTimer.reset()):
(this.kittyTimer=null,this.nextLevelTimer=new ig.Timer(2)));this.nextLevelTimer&&0<this.nextLevelTimer.delta()&&(this.nextLevelTimer=null,ig.game.director.nextLevel(),ig.system.context.globalAlpha=1)},drawKittyOpening:function(){var j=ig.system.context.createLinearGradient(0,0,0,ig.system.height);j.addColorStop(0,"#ffed94");j.addColorStop(1,"#ffcd85");ig.system.context.fillStyle=j;ig.system.context.fillRect(0,0,ig.system.width,ig.system.height);0<=this.kittyAnim&&(this.kittyImage.drawTile(ig.system.width/
2-this.kittyImage.width/8,ig.system.height/2-this.kittyImage.height/4,this.kittyAnim,218,325),this.kittyTitleImage.drawTile(ig.system.width/2-this.kittyTitleImage.width/2,ig.system.height/2+this.kittyImage.height/4+10,this.kittyAnim,380,37));ig.system.context.globalAlpha=1}})});ig.baked=!0;
ig.module("game.entities.select").requires("impact.entity").defines(function(){EntitySelect=ig.Entity.extend({type:ig.Entity.TYPE.B,checkAgainst:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,canSelect:!1,canSelectTimerDuration:0.35,zIndex:99999,isHovering:!1,isSelected:!1,init:function(j,l,m){this.parent(j,l,m);this.canSelectTimer=new ig.Timer(this.canSelectTimerDuration)},doesClickableLayerExist:function(j){for(k in dynamicClickableEntityDivs)if(k==j)return!0;return!1},checkClickableLayer:function(j,
l,m){"undefined"==typeof wm&&(this.doesClickableLayerExist(j)?(ig.game.showOverlay([j]),$("#"+j).find("[href]").attr("href",l)):this.createClickableOutboundLayer(j,l,"media/graphics/misc/invisible.png",m))},createClickableOutboundLayer:function(j,l,m,n){var p=ig.$new("div");p.id=j;document.body.appendChild(p);$("#"+p.id).css("float","left");$("#"+p.id).css("width",this.size.x*multiplier);$("#"+p.id).css("height",this.size.y*multiplier);$("#"+p.id).css("position","absolute");var s=w/2-destW/2,A=h/
2-destH/2;w==mobileWidth?($("#"+p.id).css("left",this.pos.x),$("#"+p.id).css("top",this.pos.y)):($("#"+p.id).css("left",s+this.pos.x*multiplier),$("#"+p.id).css("top",A+this.pos.y*multiplier));n?$("#"+p.id).html("<a target='_blank' href='"+l+"'><img style='width:100%;height:100%' src='"+m+"'></a>"):$("#"+p.id).html("<a href='"+l+"'><img style='width:100%;height:100%' src='"+m+"'></a>");dynamicClickableEntityDivs[j]={};dynamicClickableEntityDivs[j].width=$("#"+p.id).width();dynamicClickableEntityDivs[j].height=
$("#"+p.id).height();dynamicClickableEntityDivs[j].entity_pos_x=this.pos.x;dynamicClickableEntityDivs[j].entity_pos_y=this.pos.y},hovered:function(){this.isHovering=!0;this.dehoverOthers()},dehoverOthers:function(){var j=ig.game.getEntitiesByType(EntitySelect);for(i=0;i<j.length;i++)j[i]!=this&&(j[i].isHovering=!1)},deselectOthers:function(){var j=ig.game.getEntitiesByType(EntitySelect);for(i=0;i<j.length;i++)j[i]!=this&&(j[i].isSelected=!1)},update:function(){this.parent();this.canSelectTimer&&0<
this.canSelectTimer.delta()&&(this.canSelect=!0,this.canSelectTimer=null)}})});ig.baked=!0;ig.module("game.levels.opening").requires("impact.image","game.entities.opening-kitty").defines(function(){LevelOpening={entities:[{type:"EntityOpeningKitty",x:520,y:212}],layer:[]}});ig.baked=!0;
ig.module("game.entities.buttons.button-sound").requires("game.entities.buttons.button").defines(function(){EntityButtonSound=EntityButton.extend({type:ig.Entity.TYPE.A,gravityFactor:0,logo:new ig.AnimationSheet("branding/logo.png",_SETTINGS.Branding.Logo.Width,_SETTINGS.Branding.Logo.Height),zIndex:10001,size:{x:50,y:50},mutetest:!1,name:"soundtest",init:function(j,l,m){this.parent(j,l,m)},draw:function(){this.parent();ig.system.context.fillRect(this.pos.x,this.pos.y,50,50)},clicked:function(){console.log("pressed");
this.mutetest?(console.log("unmute"),ig.soundHandler.unmuteAll(!0),this.mutetest=!1):(console.log("mute"),ig.soundHandler.muteAll(!0),this.mutetest=!0)},clicking:function(){},released:function(){}})});ig.baked=!0;
ig.module("game.levels.test-desktop").requires("impact.image","game.entities.branding-logo-placeholder","game.entities.buttons.button-more-games","game.entities.pointer","game.entities.buttons.button-sound").defines(function(){LevelTestDesktop={entities:[{type:"EntityBrandingLogoPlaceholder",x:296,y:396,settings:{div_layer_name:"layer_mainmenu",centralize:"true"}},{type:"EntityButtonMoreGames",x:432,y:284,settings:{div_layer_name:"layer_moregames_mainmenu"}},{type:"EntityPointer",x:608,y:120},{type:"EntityButtonSound",
x:192,y:284}],layer:[{name:"background",width:40,height:30,linkWithCollision:!1,visible:1,tilesetName:"media/graphics/backgrounds/desktop/background.jpg",repeat:!1,preRender:!0,distance:"1",tilesize:16,foreground:!1,data:[[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40],[41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80],[81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,
96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120],[121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160],[161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200],[201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,
221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240],[241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280],[281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320],[321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,
345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360],[361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400],[401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440],[441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,
469,470,471,472,473,474,475,476,477,478,479,480],[481,482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,517,518,519,520],[521,522,523,524,525,526,527,528,529,530,531,532,533,534,535,536,537,538,539,540,541,542,543,544,545,546,547,548,549,550,551,552,553,554,555,556,557,558,559,560],[561,562,563,564,565,566,567,568,569,570,571,572,573,574,575,576,577,578,579,580,581,582,583,584,585,586,587,588,589,590,591,592,
593,594,595,596,597,598,599,600],[601,602,603,604,605,606,607,608,609,610,611,612,613,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628,629,630,631,632,633,634,635,636,637,638,639,640],[641,642,643,644,645,646,647,648,649,650,651,652,653,654,655,656,657,658,659,660,661,662,663,664,665,666,667,668,669,670,671,672,673,674,675,676,677,678,679,680],[681,682,683,684,685,686,687,688,689,690,691,692,693,694,695,696,697,698,699,700,701,702,703,704,705,706,707,708,709,710,711,712,713,714,715,716,
717,718,719,720],[721,722,723,724,725,726,727,728,729,730,731,732,733,734,735,736,737,738,739,740,741,742,743,744,745,746,747,748,749,750,751,752,753,754,755,756,757,758,759,760],[761,762,763,764,765,766,767,768,769,770,771,772,773,774,775,776,777,778,779,780,781,782,783,784,785,786,787,788,789,790,791,792,793,794,795,796,797,798,799,800],[801,802,803,804,805,806,807,808,809,810,811,812,813,814,815,816,817,818,819,820,821,822,823,824,825,826,827,828,829,830,831,832,833,834,835,836,837,838,839,840],
[841,842,843,844,845,846,847,848,849,850,851,852,853,854,855,856,857,858,859,860,861,862,863,864,865,866,867,868,869,870,871,872,873,874,875,876,877,878,879,880],[881,882,883,884,885,886,887,888,889,890,891,892,893,894,895,896,897,898,899,900,901,902,903,904,905,906,907,908,909,910,911,912,913,914,915,916,917,918,919,920],[921,922,923,924,925,926,927,928,929,930,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960],[961,962,963,964,
965,966,967,968,969,970,971,972,973,974,975,976,977,978,979,980,981,982,983,984,985,986,987,988,989,990,991,992,993,994,995,996,997,998,999,1E3],[1001,1002,1003,1004,1005,1006,1007,1008,1009,1010,1011,1012,1013,1014,1015,1016,1017,1018,1019,1020,1021,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040],[1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,
1072,1073,1074,1075,1076,1077,1078,1079,1080],[1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1120],[1121,1122,1123,1124,1125,1126,1127,1128,1129,1130,1131,1132,1133,1134,1135,1136,1137,1138,1139,1140,1141,1142,1143,1144,1145,1146,1147,1148,1149,1150,1151,1152,1153,1154,1155,1156,1157,1158,1159,1160],[1161,1162,1163,1164,1165,1166,1167,1168,1169,1170,
1171,1172,1173,1174,1175,1176,1177,1178,1179,1180,1181,1182,1183,1184,1185,1186,1187,1188,1189,1190,1191,1192,1193,1194,1195,1196,1197,1198,1199,1200]]}]};LevelTestDesktopResources=[new ig.Image("media/graphics/backgrounds/desktop/background.jpg")]});ig.baked=!0;
ig.module("game.levels.test-mobile").requires("impact.image","game.entities.branding-logo-placeholder","game.entities.buttons.button-more-games","game.entities.pointer").defines(function(){LevelTestMobile={entities:[{type:"EntityBrandingLogoPlaceholder",x:216,y:548,settings:{div_layer_name:"layer_mainmenu",centralize:"true"}},{type:"EntityButtonMoreGames",x:204,y:372,settings:{div_layer_name:"layer_moregames_mainmenu"}},{type:"EntityPointer",x:444,y:192}],layer:[{name:"background",width:30,height:40,
linkWithCollision:!1,visible:1,tilesetName:"media/graphics/backgrounds/mobile/background.jpg",repeat:!1,preRender:!0,distance:"1",tilesize:16,foreground:!1,data:[[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],[31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60],[61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90],[91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,
111,112,113,114,115,116,117,118,119,120],[121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150],[151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180],[181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210],[211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,
235,236,237,238,239,240],[241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270],[271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300],[301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330],[331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,
359,360],[361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390],[391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420],[421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,442,443,444,445,446,447,448,449,450],[451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480],[481,
482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,509,510],[511,512,513,514,515,516,517,518,519,520,521,522,523,524,525,526,527,528,529,530,531,532,533,534,535,536,537,538,539,540],[541,542,543,544,545,546,547,548,549,550,551,552,553,554,555,556,557,558,559,560,561,562,563,564,565,566,567,568,569,570],[571,572,573,574,575,576,577,578,579,580,581,582,583,584,585,586,587,588,589,590,591,592,593,594,595,596,597,598,599,600],[601,602,603,604,605,
606,607,608,609,610,611,612,613,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628,629,630],[631,632,633,634,635,636,637,638,639,640,641,642,643,644,645,646,647,648,649,650,651,652,653,654,655,656,657,658,659,660],[661,662,663,664,665,666,667,668,669,670,671,672,673,674,675,676,677,678,679,680,681,682,683,684,685,686,687,688,689,690],[691,692,693,694,695,696,697,698,699,700,701,702,703,704,705,706,707,708,709,710,711,712,713,714,715,716,717,718,719,720],[721,722,723,724,725,726,727,728,729,
730,731,732,733,734,735,736,737,738,739,740,741,742,743,744,745,746,747,748,749,750],[751,752,753,754,755,756,757,758,759,760,761,762,763,764,765,766,767,768,769,770,771,772,773,774,775,776,777,778,779,780],[781,782,783,784,785,786,787,788,789,790,791,792,793,794,795,796,797,798,799,800,801,802,803,804,805,806,807,808,809,810],[811,812,813,814,815,816,817,818,819,820,821,822,823,824,825,826,827,828,829,830,831,832,833,834,835,836,837,838,839,840],[841,842,843,844,845,846,847,848,849,850,851,852,853,
854,855,856,857,858,859,860,861,862,863,864,865,866,867,868,869,870],[871,872,873,874,875,876,877,878,879,880,881,882,883,884,885,886,887,888,889,890,891,892,893,894,895,896,897,898,899,900],[901,902,903,904,905,906,907,908,909,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,930],[931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960],[961,962,963,964,965,966,967,968,969,970,971,972,973,974,975,976,977,
978,979,980,981,982,983,984,985,986,987,988,989,990],[991,992,993,994,995,996,997,998,999,1E3,1001,1002,1003,1004,1005,1006,1007,1008,1009,1010,1011,1012,1013,1014,1015,1016,1017,1018,1019,1020],[1021,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050],[1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080],[1081,
1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110],[1111,1112,1113,1114,1115,1116,1117,1118,1119,1120,1121,1122,1123,1124,1125,1126,1127,1128,1129,1130,1131,1132,1133,1134,1135,1136,1137,1138,1139,1140],[1141,1142,1143,1144,1145,1146,1147,1148,1149,1150,1151,1152,1153,1154,1155,1156,1157,1158,1159,1160,1161,1162,1163,1164,1165,1166,1167,1168,1169,1170],[1171,1172,1173,1174,1175,1176,1177,1178,1179,1180,
1181,1182,1183,1184,1185,1186,1187,1188,1189,1190,1191,1192,1193,1194,1195,1196,1197,1198,1199,1200]]}]};LevelTestMobileResources=[new ig.Image("media/graphics/backgrounds/mobile/background.jpg")]});ig.baked=!0;
ig.module("game.main").requires("impact.game","plugins.patches.webkit-image-smoothing-patch","plugins.patches.windowfocus-onMouseDown-patch","plugins.handlers.dom-handler","plugins.handlers.size-handler","plugins.handlers.api-handler","plugins.audio.sound-handler","plugins.io.io-manager","plugins.splash-loader","plugins.tween","plugins.url-parameters","plugins.director","plugins.impact-storage","plugins.coolmath-api","game.app.minimain","plugins.branding.splash","game.entities.branding-logo-placeholder",
"game.entities.buttons.button-more-games","game.entities.opening-shield","game.entities.opening-kitty","game.entities.pointer","game.entities.pointer-selector","game.entities.select","game.services.sound","game.levels.opening","game.levels.test-desktop","game.levels.test-mobile","game.levels.mainmenu","game.levels.game").defines(function(){
    this.FRAMEBREAKER;

    MyGame = ig.Game.extend({
        io:null,
        paused:false,
        soundService:new SoundService(),
        init: function() {
            this.parent();
            // SERVER-SIDE INTEGRATIONS
            this.setupMarketJsGameCenter();

            //The io manager so you can access ig.game.io.mouse
            this.io = new IoManager();
            this.setupUrlParams = new ig.UrlParameters();

            this.removeLoadingWheel();

            this.finalize();

        },

        setupMarketJsGameCenter:function()
        {
            if(_SETTINGS)
            {
                if(_SETTINGS['MarketJSGameCenter']){

                    var el = ig.domHandler.getElementByClass('gamecenter-activator');

                    if(_SETTINGS['MarketJSGameCenter']['Activator']['Enabled']){
                        if(_SETTINGS['MarketJSGameCenter']['Activator']['Position']){

                            console.log('MarketJSGameCenter activator settings present ....')

                            ig.domHandler.css(el
                                    ,{position:"absolute"
                                        ,left:_SETTINGS['MarketJSGameCenter']['Activator']['Position']['Left']
                                        ,top:_SETTINGS['MarketJSGameCenter']['Activator']['Position']['Top']
                                        ,"z-index":3
                                    });

                        }
                    }
                    ig.domHandler.show(el);
                }else{
                    console.log('MarketJSGameCenter settings not defined in game settings')
                }
            }
        },

        finalize:function(){
            if(ig.ua.mobile){
                // Inject link
                var elem = ig.domHandler.getElementById("#play");
                ig.domHandler.attr(elem,'onclick'
                            ,'ig.soundHandler.sfxPlayer.play("staticSound");ig.game.splashClick();');
                ig.domHandler.show(elem);
                // Special hack
                // $('body').height($('#game').height()+75);
                // sizeHandler();
                // Special hack
                //$('body').height($('#game').height());
            }else{
                this.start();
            }
            ig.sizeHandler.reorient();
        },


        removeLoadingWheel:function(){
            // Remove the loading wheel
            try{
                $('#ajaxbar').css('background','none');
            }catch(err){
                console.log(err)
            }
        },

        showDebugMenu:function(){
            console.log('showing debug menu ...');
            // SHOW DEBUG LINES
            ig.Entity._debugShowBoxes = true;

            // SHOW DEBUG PANELS
            $('.ig_debug').show();
        },

        start:function(){
            this.resetPlayerStats();

            // TEST Eg: load level using Director plugin

            // TEST Eg: load level using Director plugin
            if(ig.ua.mobile){
                this.director = new ig.Director(this,[
                        LevelOpening,
                        LevelMainmenu,
                        LevelGame,
                        // LevelTestMobile,
                ]);
            }else{
                this.director = new ig.Director(this,[
                        LevelOpening,
                        LevelMainmenu,
                        LevelGame,
                        // LevelTestDesktop,
                ]);
            }

            // CALL LOAD LEVELS
            if(_SETTINGS['Branding']['Splash']['Enabled']){
                try{
                    this.branding = new ig.BrandingSplash();
                }catch(err){
                    console.log(err)
                    console.log('Loading original levels ...')
                    this.director.loadLevel(this.director.currentLevel);
                }
            }else{
                this.director.loadLevel(this.director.currentLevel);
            }

            // this.spawnEntity(EntityPointerSelector,50,50);

            // MUSIC // Changed to use ig.soundHandler

            ig.soundHandler.bgmPlayer.play(ig.soundHandler.bgmPlayer.soundList.background);
            ig.soundHandler.bgmPlayer.volume(this.soundService.fnGetBgm());
        },

        fpsCount: function(){
            if(!this.fpsTimer){
                this.fpsTimer = new ig.Timer(1);
            }
            if(this.fpsTimer && this.fpsTimer.delta() < 0){
                if(this.fpsCounter != null){
                    this.fpsCounter ++ ;
                }else{
                    this.fpsCounter = 0 ;
                }
            }else{
                ig.game.fps = this.fpsCounter ;
                this.fpsCounter = 0 ;
                this.fpsTimer.reset();
            }
        },

        endGame:function(){
            console.log('End game')
            // IMPORTANT
            ig.soundHandler.bgmPlayer.stop();

            // SUBMIT STATISTICS - USE ONLY WHEN MARKETJS API IS CONFIGURED
            // this.submitStats();
            ig.apiHandler.run("MJSEnd");
        },

        resetPlayerStats:function(){
            ig.log('resetting player stats ...');
            this.playerStats = {
                // EG: coins,score,lives, etc
                id:this.playerStats?this.playerStats.id:null, // FOR FACEBOOK LOGIN IDS
            }
        },

        splashClick:function()
        {
            var elem = ig.domHandler.getElementById("#play")
            ig.domHandler.hide(elem);
            // Show ads
            ig.apiHandler.run("MJSFooter");
            ig.apiHandler.run("MJSHeader");

            if(typeof(ig.onPlayButton == 'function')){
                ig.onPlayButton();
            }

            ig.game.start();
            //ig.soundHandler.bgmPlayer.play(ig.soundHandler.bgmPlayer.soundList.bgm);
        },

        pauseGame:function(){
            ig.system.stopRunLoop.call(ig.system);
            console.log('Game Paused');
        },

        resumeGame:function(){
            ig.system.startRunLoop.call(ig.system);
            console.log('Game Resumed');
        },

        showOverlay:function(divList){
            for(i=0;i<divList.length;i++){
                if($('#'+divList[i])) $('#'+divList[i]).show();
                if(document.getElementById(divList[i])) document.getElementById(divList[i]).style.visibility="visible";
            }

            // OPTIONAL
            //this.pauseGame();
        },

        hideOverlay:function(divList){
            for(i=0;i<divList.length;i++){
                if($('#'+divList[i])) $('#'+divList[i]).hide();
                if(document.getElementById(divList[i])) document.getElementById(divList[i]).style.visibility="hidden";
            }

            // OPTIONAL
            //this.resumeGame();
        },

        currentBGMVolume:1,
        addition:0.1,
        // MODIFIED UPDATE() function to utilize Pause button. See EntityPause (pause.js)
        update:function(){

            //Optional - to use
            //this.fpsCount();
            if( this.paused ) {
            // only update some of the entities when paused:
                this.updateWhilePaused();
            }
            else {
                // call update() as normal when not paused
                this.parent();

                //BGM looping fix for mobile
                if(ig.ua.mobile && ig.soundHandler) // A win phone fix by yew meng added into ig.soundHandler
                {
                    ig.soundHandler.forceLoopBGM();
                }
            }
        },

        updateWhilePaused:function()
        {
            for( var i = 0; i < this.entities.length; i++ ) {
                if( this.entities[i].ignorePause ) {
                    this.entities[i].update();
                }
            }
        },

        draw: function(){
            this.parent();
                //Optional - to use , debug console , e.g : ig.game.debugCL("debug something");
                //hold click on screen for 2s to enable debug console
            //this.drawDebug();
        },

        /**
        * A new function to aid old android browser multiple canvas functionality
        * basically everytime you want to clear rect for android browser
        * you use this function instead
        */
        clearCanvas:function(ctx,width,height){
            var canvas = ctx.canvas;
            ctx.clearRect(0, 0, width, height);
            /*
            var w=canvas.width;
            canvas.width=1;
            canvas.width=w;
            */
            /*
            canvas.style.visibility = "hidden"; // Force a change in DOM
            canvas.offsetHeight; // Cause a repaint to take play
            canvas.style.visibility = "inherit"; // Make visible again
            */

            canvas.style.display = "none";// Detach from DOM
            canvas.offsetHeight; // Force the detach
            canvas.style.display = "inherit"; // Reattach to DOM

        },

        drawDebug: function(){    //-----draw debug-----
            if(!ig.global.wm){
                // enable console
                this.debugEnable();
                //debug postion set to top left
                if(this.viewDebug){

                    //draw debug bg
                    ig.system.context.fillStyle = '#000000';
                    ig.system.context.globalAlpha = 0.35 ;
                    ig.system.context.fillRect(0,0,ig.system.width/4,ig.system.height);
                    ig.system.context.globalAlpha = 1 ;

                    if(this.debug && this.debug.length > 0){
                        //draw debug console log
                        for(i = 0; i < this.debug.length; i++){
                            ig.system.context.font = "10px Arial";
                            ig.system.context.fillStyle = '#ffffff';
                            ig.system.context.fillText(this.debugLine - this.debug.length + i + ": " + this.debug[i],10,50 + 10 * i);
                        }

                        // delete console log 1 by 1 per 2s , OPTIONAL
                        //if(!this.debugTimer){
                        //    this.debugTimer = new ig.Timer(2);
                        //}else if(this.debugTimer && this.debugTimer.delta() > 0){
                        //    this.debug.splice(0,1);
                        //    if(this.debug.length > 0){
                        //        this.debugTimer.reset();
                        //    }else{
                        //        this.debugTimer = null ;
                        //    }
                        //}
                    }
                }
            }
        },

        debugCL: function(consoleLog){ // ----- add debug console log -----
            //add console log to array
            if(!this.debug){
                this.debug = [] ;
                this.debugLine = 1 ;
                this.debug.push(consoleLog);
            }else{
                if(this.debug.length < 50){
                    this.debug.push(consoleLog);
                }else{
                    this.debug.splice(0,1);
                    this.debug.push(consoleLog);
                }
                this.debugLine++;
            }
            console.log(consoleLog);
        },

        debugEnable: function(){    // enable debug console
            //hold on screen for more than 2s then can enable debug
            if(ig.input.pressed('click')){
                this.debugEnableTimer = new ig.Timer(2);
            }
            if(this.debugEnableTimer && this.debugEnableTimer.delta() < 0){
                if(ig.input.released('click')){
                    this.debugEnableTimer = null ;
                }
            }else if(this.debugEnableTimer && this.debugEnableTimer.delta() > 0){
                this.debugEnableTimer = null ;
                if(this.viewDebug){
                    this.viewDebug = false;
                }else{
                    this.viewDebug = true;
                }
            }
        },
    });

    ig.domHandler = null;
    ig.domHandler = new ig.DomHandler();
    ig.domHandler.forcedDeviceDetection();
    ig.domHandler.forcedDeviceRotation();

    //API handler
    ig.apiHandler = new ig.ApiHandler();

    //Size handler has a dependency on the dom handler so it must be initialize after dom handler
    ig.sizeHandler = new ig.SizeHandler(ig.domHandler);

    //Setup the canvas

    var fps=60;
    if(ig.ua.mobile)
    {
        ig.Sound.enabled = false;
        ig.main( '#canvas', MyGame, fps, ig.sizeHandler.mobile.actualResolution.x,  ig.sizeHandler.mobile.actualResolution.y, ig.sizeHandler.scale, ig.SplashLoader );
        ig.sizeHandler.resize();

    }
    else
    {
        ig.main( '#canvas', MyGame, fps, ig.sizeHandler.desktop.actualResolution.x,  ig.sizeHandler.desktop.actualResolution.y, ig.sizeHandler.scale, ig.SplashLoader );
    }

    //Added sound handler with the tag ig.soundHandler
    ig.soundHandler = null;
    ig.soundHandler = new ig.SoundHandler();

    ig.sizeHandler.reorient();

    });
